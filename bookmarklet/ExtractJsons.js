javascript:(function()%7Bjavascript%3A(function() %7B%0A  %2F%2F --- Configuration ---%0A  const SIDEBAR_ID %3D 'json-extractor-sidebar-v3'%3B%0A  const SIDEBAR_WIDTH %3D '380px'%3B%0A  const HIGHLIGHT_CLASS %3D 'json-extractor-rainbow-highlight'%3B%0A  const NOTIFICATION_TIMEOUT %3D 2500%3B%0A%0A  %2F%2F --- Check if sidebar already exists ---%0A  if (document.getElementById(SIDEBAR_ID)) %7B%0A    document.getElementById(SIDEBAR_ID).remove()%3B%0A    document.body.style.marginRight %3D ''%3B%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> el.classList.remove(HIGHLIGHT_CLASS))%3B%0A    const existingStyle %3D document.querySelector('%23json-extractor-styles')%3B%0A    if (existingStyle) existingStyle.remove()%3B%0A    const existingBadge %3D document.getElementById('json-extractor-badge')%3B%0A    if (existingBadge) existingBadge.remove()%3B%0A    return%3B%0A  %7D%0A%0A  %2F%2F --- State Variables ---%0A  let isSelecting %3D false%3B%0A  let capturedData %3D %5B%5D%3B%0A  let originalCursor %3D document.body.style.cursor%3B%0A  let highlightedElement %3D null%3B%0A  let mouseMoveThrottle %3D null%3B%0A%0A  %2F%2F --- Inject CSS for Rainbow Highlight and Notifications ---%0A  const styleElement %3D document.createElement('style')%3B%0A  styleElement.id %3D 'json-extractor-styles'%3B%0A  styleElement.textContent %3D %60%0A    %40keyframes rainbow-glow-animation %7B%0A      0%25 %7B %0A        outline-color%3A hsl(0%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(0%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(0%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(0%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      17%25 %7B %0A        outline-color%3A hsl(60%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(60%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(60%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(60%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      33%25 %7B %0A        outline-color%3A hsl(120%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(120%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(120%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(120%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      50%25 %7B %0A        outline-color%3A hsl(180%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(180%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(180%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(180%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      67%25 %7B %0A        outline-color%3A hsl(240%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(240%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(240%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(240%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      83%25 %7B %0A        outline-color%3A hsl(300%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(300%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(300%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(300%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      100%25 %7B %0A        outline-color%3A hsl(360%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(360%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(360%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(360%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D %7B%0A      outline%3A 3px solid hsl(0%2C 100%25%2C 65%25) !important%3B%0A      outline-offset%3A 2px !important%3B%0A      animation%3A rainbow-glow-animation 2.5s linear infinite !important%3B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.05) !important%3B%0A      cursor%3A crosshair !important%3B%0A      position%3A relative !important%3B %0A      z-index%3A 999998 !important%3B %0A      transition%3A all 0.2s ease-in-out !important%3B%0A      pointer-events%3A auto !important%3B%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D%3Ahover %7B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.1) !important%3B%0A    %7D%0A    %23json-extractor-notification %7B%0A      position%3A fixed%3B%0A      top%3A 20px%3B%0A      left%3A 50%25%3B%0A      transform%3A translateX(-50%25)%3B%0A      background-color%3A %23333%3B%0A      color%3A white%3B%0A      padding%3A 12px 25px%3B%0A      border-radius%3A 8px%3B%0A      z-index%3A 1000001%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      font-size%3A 14px%3B%0A      box-shadow%3A 0 5px 15px rgba(0%2C0%2C0%2C0.3)%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.3s ease-in-out%2C top 0.3s ease-in-out%3B%0A      pointer-events%3A none%3B%0A    %7D%0A    %23json-extractor-notification.show %7B%0A      opacity%3A 1%3B%0A      top%3A 30px%3B%0A    %7D%0A    %23json-extractor-notification.success %7B%0A      background-color%3A %234CAF50%3B%0A    %7D%0A    %23json-extractor-notification.error %7B%0A      background-color%3A %23F44336%3B%0A    %7D%0A    %23json-extractor-notification.info %7B%0A      background-color%3A %232196F3%3B%0A    %7D%0A    %23json-extractor-badge %7B%0A      position%3A fixed%3B%0A      background%3A rgba(0%2C 0%2C 0%2C 0.8)%3B%0A      color%3A white%3B%0A      padding%3A 4px 8px%3B%0A      border-radius%3A 12px%3B%0A      font-size%3A 11px%3B%0A      font-weight%3A 600%3B%0A      z-index%3A 1000002%3B%0A      pointer-events%3A none%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.2s ease-in-out%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      white-space%3A nowrap%3B%0A      box-shadow%3A 0 2px 8px rgba(0%2C0%2C0%2C0.3)%3B%0A    %7D%0A    %23json-extractor-badge.show %7B%0A      opacity%3A 1%3B%0A    %7D%0A  %60%3B%0A  document.head.appendChild(styleElement)%3B%0A%0A  %2F%2F --- Create Sidebar ---%0A  const sidebar %3D document.createElement('div')%3B%0A  sidebar.id %3D SIDEBAR_ID%3B%0A  sidebar.style.cssText %3D %60%0A    position%3A fixed%3B%0A    top%3A 0%3B%0A    right%3A 0%3B%0A    width%3A %24%7BSIDEBAR_WIDTH%7D%3B%0A    height%3A 100vh%3B%0A    background%3A %23282c34%3B%0A    color%3A %23abb2bf%3B%0A    z-index%3A 999999%3B%0A    font-family%3A 'Inter'%2C 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A    font-size%3A 14px%3B%0A    overflow-y%3A auto%3B%0A    box-shadow%3A -8px 0 25px rgba(0%2C0%2C0%2C0.5)%3B%0A    border-left%3A 4px solid %2361afef%3B%0A    pointer-events%3A auto%3B%0A    display%3A flex%3B%0A    flex-direction%3A column%3B%0A    transition%3A transform 0.3s ease-in-out%3B%0A  %60%3B%0A%0A  %2F%2F --- Create Sidebar Content ---%0A  sidebar.innerHTML %3D %60%0A    <div style%3D"padding%3A 25px%3B border-bottom%3A 1px solid %233b4048%3B">%0A      <h3 style%3D"margin%3A 0 0 20px 0%3B color%3A %2361afef%3B font-size%3A 20px%3B font-weight%3A 600%3B">%0A        <svg xmlns%3D"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg" viewBox%3D"0 0 24 24" fill%3D"currentColor" style%3D"width%3A24px%3B height%3A24px%3B vertical-align%3Amiddle%3B margin-right%3A8px%3B">%0A          <path d%3D"M12 2.5a.75.75 0 0 1 .75.75v2.518l4.08 2.04a.75.75 0 0 1-.03 1.33l-4.3 2.15a.75.75 0 0 1-.5 0l-4.3-2.15a.75.75 0 0 1-.03-1.33L11.25 5.768V3.25a.75.75 0 0 1 .75-.75ZM11.25 13.617v2.633a.75.75 0 0 0 .5.715l4.3 2.15a.75.75 0 0 0 .97-.031.75.75 0 0 0 .03-.97l-4.08-2.04a.75.75 0 0 0-.72-.017Zm1.5 0-.72.017a.75.75 0 0 1-.72-.017L7.23 11.58a.75.75 0 0 0 .03.97.75.75 0 0 0 .97.03l4.3-2.15a.75.75 0 0 0 .5-.715v-2.633Z" %2F>%0A          <path fill-rule%3D"evenodd" d%3D"M22.5 12c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5c1.836 0 3.562.462 5.074 1.286a.75.75 0 0 1-.6 1.372A9.004 9.004 0 0 0 12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9h-2.25a.75.75 0 0 1 0-1.5H22.5Z" clip-rule%3D"evenodd" %2F>%0A        <%2Fsvg>%0A        JSON Data Extractor%0A      <%2Fh3>%0A      <div style%3D"display%3A grid%3B grid-template-columns%3A 1fr 1fr%3B gap%3A 12px%3B">%0A        <button id%3D"start-selection-btn" class%3D"sidebar-btn primary">üéØ Start Selecting<%2Fbutton>%0A        <button id%3D"clear-data-btn" class%3D"sidebar-btn danger">üóë%EF%B8%8F Clear All<%2Fbutton>%0A        <button id%3D"copy-json-btn" class%3D"sidebar-btn info">üìã Copy JSON<%2Fbutton>%0A        <button id%3D"copy-items-btn" class%3D"sidebar-btn info">üìÑ Copy Items<%2Fbutton>%0A        <button id%3D"export-json-btn" class%3D"sidebar-btn success">üíæ Download JSON<%2Fbutton>%0A      <%2Fdiv>%0A      <button id%3D"close-sidebar-btn" class%3D"sidebar-btn secondary" style%3D"width%3A100%25%3B margin-top%3A12px%3B">‚ùå Close Extractor<%2Fbutton>%0A      <div id%3D"selection-status-msg" style%3D"margin-top%3A 15px%3B padding%3A 10px%3B background%3A %233b4048%3B border-radius%3A 6px%3B font-size%3A 13px%3B display%3A none%3B text-align%3A center%3B">%0A        Click an element to capture data. Press <kbd style%3D"background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B">ESC<%2Fkbd> to stop.%0A      <%2Fdiv>%0A    <%2Fdiv>%0A%0A    <div style%3D"padding%3A 20px%3B flex-grow%3A 1%3B display%3A flex%3B flex-direction%3A column%3B min-height%3A 0%3B">%0A      <div style%3D"margin-bottom%3A 15px%3B">%0A        <label for%3D"extraction-mode-select" style%3D"display%3A block%3B margin-bottom%3A 8px%3B font-weight%3A 500%3B color%3A %23c8ccd4%3B">Extraction Mode%3A<%2Flabel>%0A        <select id%3D"extraction-mode-select" class%3D"sidebar-select">%0A          <option value%3D"partialJSON" selected>Best-Effort JSON Parts<%2Foption>%0A          <option value%3D"textContent">Text Content<%2Foption>%0A          <option value%3D"innerHTML">Inner HTML<%2Foption>%0A          <option value%3D"attributes">All Attributes<%2Foption>%0A          <option value%3D"dataset">Data Attributes (data-*)<%2Foption>%0A          <option value%3D"computed">Key Computed Styles<%2Foption>%0A          <option value%3D"custom">Attempt Custom JSON<%2Foption>%0A        <%2Fselect>%0A      <%2Fdiv>%0A      <div style%3D"display%3A flex%3B justify-content%3A space-between%3B align-items%3A center%3B margin-bottom%3A 10px%3B">%0A        <span style%3D"font-weight%3A 500%3B color%3A %23c8ccd4%3B">Captured Items%3A <span id%3D"item-count-display">0<%2Fspan><%2Fspan>%0A        <span style%3D"font-size%3A 12px%3B color%3A %239da5b4%3B">Size%3A <span id%3D"data-size-display">0 KB<%2Fspan><%2Fspan>%0A      <%2Fdiv>%0A      <div style%3D"background%3A %2321252b%3B border-radius%3A 6px%3B padding%3A 15px%3B flex-grow%3A 1%3B overflow-y%3A auto%3B border%3A 1px solid %233b4048%3B min-height%3A 150px%3B">%0A        <pre id%3D"json-output-display" style%3D"margin%3A 0%3B font-family%3A 'Fira Code'%2C 'Courier New'%2C monospace%3B font-size%3A 12.5px%3B white-space%3A pre-wrap%3B word-break%3A break-all%3B color%3A %23d19a66%3B">No data captured yet...<%2Fpre>%0A      <%2Fdiv>%0A    <%2Fdiv>%0A    <style>%0A      .sidebar-btn %7B background%3A %234b5263%3B color%3A %23d4d7dd%3B border%3A none%3B padding%3A 10px 15px%3B border-radius%3A 6px%3B cursor%3A pointer%3B font-size%3A 13px%3B font-weight%3A 500%3B transition%3A background-color 0.2s%2C transform 0.1s%3B text-align%3A center%3B %7D%0A      .sidebar-btn%3Ahover %7B background%3A %235c6370%3B %7D%0A      .sidebar-btn%3Aactive %7B transform%3A scale(0.98)%3B %7D%0A      .sidebar-btn.primary %7B background%3A %2361afef%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.primary%3Ahover %7B background%3A %23529bda%3B %7D%0A      .sidebar-btn.danger %7B background%3A %23e06c75%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.danger%3Ahover %7B background%3A %23c95f69%3B %7D%0A      .sidebar-btn.info %7B background%3A %2356b6c2%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.info%3Ahover %7B background%3A %234aa7b3%3B %7D%0A      .sidebar-btn.success %7B background%3A %2398c379%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.success%3Ahover %7B background%3A %2389b16c%3B %7D%0A      .sidebar-btn.secondary %7B background%3A %233b4048%3B color%3A %23abb2bf%3B %7D%0A      .sidebar-btn.secondary%3Ahover %7B background%3A %23454c58%3B %7D%0A      .sidebar-select %7B width%3A 100%25%3B padding%3A 10px%3B border-radius%3A 6px%3B background%3A %233b4048%3B color%3A %23abb2bf%3B border%3A 1px solid %23454c58%3B font-size%3A 13px%3B %7D%0A      %23%24%7BSIDEBAR_ID%7D kbd %7B background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B border%3A 1px solid %237d8590%3B box-shadow%3A 1px 1px 1px rgba(0%2C0%2C0%2C0.2)%3B %7D%0A    <%2Fstyle>%0A  %60%3B%0A  document.body.appendChild(sidebar)%3B%0A  document.body.style.marginRight %3D SIDEBAR_WIDTH%3B%0A%0A  %2F%2F --- Helper Functions ---%0A  function showNotification(message%2C type %3D 'info'%2C duration %3D NOTIFICATION_TIMEOUT) %7B%0A    let notification %3D document.getElementById('json-extractor-notification')%3B%0A    if (!notification) %7B%0A      notification %3D document.createElement('div')%3B%0A      notification.id %3D 'json-extractor-notification'%3B%0A      document.body.appendChild(notification)%3B%0A    %7D%0A    notification.textContent %3D message%3B%0A    notification.className %3D %60show %24%7Btype%7D%60%3B %0A    setTimeout(() %3D> %7B%0A      notification.className %3D notification.className.replace('show'%2C '').trim()%3B%0A    %7D%2C duration)%3B%0A  %7D%0A%0A  function createBadge() %7B%0A    let badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (!badge) %7B%0A      badge %3D document.createElement('div')%3B%0A      badge.id %3D 'json-extractor-badge'%3B%0A      document.body.appendChild(badge)%3B%0A    %7D%0A    return badge%3B%0A  %7D%0A%0A  function countJsonComponents(element%2C mode) %7B%0A    if (!element) return 0%3B%0A    %0A    try %7B%0A      const rawText %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A      %0A      %2F%2F Skip counting for very large text to prevent hanging%0A      if (rawText.length > 50000) return 0%3B%0A      %0A      switch (mode) %7B%0A        case 'textContent'%3A%0A        case 'innerHTML'%3A%0A        case 'attributes'%3A%0A        case 'dataset'%3A%0A        case 'computed'%3A%0A          return 1%3B %2F%2F These modes always return 1 object%0A          %0A        case 'custom'%3A%0A          try %7B%0A            JSON.parse(rawText)%3B%0A            return 1%3B%0A          %7D catch (e) %7B%0A            let count %3D 0%3B%0A            for (let attr of element.attributes) %7B%0A              if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A                try %7B%0A                  JSON.parse(attr.value)%3B%0A                  count%2B%2B%3B%0A                %7D catch (e2) %7B%0A                  %2F%2F Invalid JSON%2C don't count%0A                %7D%0A              %7D%0A            %7D%0A            return count%3B%0A          %7D%0A          %0A        case 'partialJSON'%3A%0A          %2F%2F Simplified counting to avoid hanging - just count likely JSON objects%0A          try %7B%0A            const parsedOuter %3D JSON.parse(rawText)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A              %2F%2F Just return 1 for input%2Foutput structure to avoid complex parsing during hover%0A              return 1%3B%0A            %7D%0A          %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to simple greedy count%0A          %7D%0A          %0A          %2F%2F Simple count of JSON-like structures without full parsing%0A          const jsonObjects %3D (rawText.match(%2F%5C%7B%5B%5E%7B%7D%5D*%5C%7D%2Fg) %7C%7C %5B%5D).length%3B%0A          const jsonArrays %3D (rawText.match(%2F%5C%5B%5B%5E%5C%5B%5C%5D%5D*%5C%5D%2Fg) %7C%7C %5B%5D).length%3B%0A          return jsonObjects %2B jsonArrays%3B%0A          %0A        default%3A%0A          return 0%3B%0A      %7D%0A    %7D catch (e) %7B%0A      return 0%3B%0A    %7D%0A  %7D%0A%0A  function showBadge(count%2C x%2C y) %7B%0A    const badge %3D createBadge()%3B%0A    if (count > 0) %7B%0A      badge.textContent %3D %60%24%7Bcount%7D JSON%24%7Bcount %3D%3D%3D 1 %3F '' %3A 's'%7D%60%3B%0A      badge.style.left %3D (x %2B 15) %2B 'px'%3B%0A      badge.style.top %3D (y - 25) %2B 'px'%3B%0A      badge.classList.add('show')%3B%0A    %7D else %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  function hideBadge() %7B%0A    const badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (badge) %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Modern clipboard copy function%0A  async function copyToClipboard(text) %7B%0A    try %7B%0A      if (navigator.clipboard %26%26 window.isSecureContext) %7B%0A        await navigator.clipboard.writeText(text)%3B%0A        return true%3B%0A      %7D else %7B%0A        %2F%2F Fallback for older browsers or non-secure contexts%0A        const textarea %3D document.createElement('textarea')%3B%0A        textarea.value %3D text%3B%0A        textarea.style.position %3D 'fixed'%3B%0A        textarea.style.left %3D '-999999px'%3B%0A        textarea.style.top %3D '-999999px'%3B%0A        document.body.appendChild(textarea)%3B%0A        textarea.focus()%3B%0A        textarea.select()%3B%0A        const result %3D document.execCommand('copy')%3B%0A        document.body.removeChild(textarea)%3B%0A        return result%3B%0A      %7D%0A    %7D catch (err) %7B%0A      console.error('Copy failed%3A'%2C err)%3B%0A      return false%3B%0A    %7D%0A  %7D%0A%0A  function repairJsonStringLiterals(jsonString) %7B%0A    let repaired %3D ''%3B%0A    let inString %3D false%3B%0A    let escapeNext %3D false%3B%0A%0A    for (let i %3D 0%3B i < jsonString.length%3B i%2B%2B) %7B%0A        const char %3D jsonString%5Bi%5D%3B%0A        if (escapeNext) %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D false%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '%5C%5C') %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D true%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '"') %7B%0A            inString %3D !inString%3B%0A            repaired %2B%3D char%3B%0A            continue%3B%0A        %7D%0A        if (inString) %7B%0A            if (char %3D%3D%3D '%5Cn') repaired %2B%3D '%5C%5Cn'%3B%0A            else if (char %3D%3D%3D '%5Cr') repaired %2B%3D '%5C%5Cr'%3B%0A            else if (char %3D%3D%3D '%5Ct') repaired %2B%3D '%5C%5Ct'%3B%0A            else repaired %2B%3D char%3B%0A        %7D else %7B%0A            repaired %2B%3D char%3B%0A        %7D%0A    %7D%0A    return repaired%3B%0A  %7D%0A%0A  function flattenUnnecessaryArrays(data) %7B%0A    %2F%2F Simple single-level flatten to avoid infinite loops%0A    %2F%2F Only flatten if it's an array with exactly 1 element that is also an array%0A    if (Array.isArray(data) %26%26 data.length %3D%3D%3D 1 %26%26 Array.isArray(data%5B0%5D)) %7B%0A      return data%5B0%5D%3B%0A    %7D%0A    return data%3B%0A  %7D%0A%0A  function extractGreedyJson(text) %7B%0A    const results %3D %5B%5D%3B%0A    let remainingText %3D text.trim()%3B%0A    %0A    while (remainingText.length > 0) %7B%0A        let foundThisIteration %3D false%3B%0A        let firstJsonCharIndex %3D -1%3B%0A%0A        for (let i %3D 0%3B i < remainingText.length%3B i%2B%2B) %7B%0A            if (remainingText%5Bi%5D %3D%3D%3D '%7B' %7C%7C remainingText%5Bi%5D %3D%3D%3D '%5B') %7B%0A                firstJsonCharIndex %3D i%3B%0A                break%3B%0A            %7D%0A        %7D%0A%0A        if (firstJsonCharIndex %3D%3D%3D -1) break%3B %0A%0A        const textToParse %3D remainingText.substring(firstJsonCharIndex)%3B%0A%0A        for (let i %3D 1%3B i <%3D textToParse.length%3B i%2B%2B) %7B%0A            const segment %3D textToParse.substring(0%2C i)%3B%0A            %0A            if ((segment.startsWith('%7B') %26%26 segment.endsWith('%7D')) %7C%7C (segment.startsWith('%5B') %26%26 segment.endsWith('%5D'))) %7B%0A                try %7B%0A                    JSON.parse(segment)%3B%0A                    results.push(segment)%3B%0A                    remainingText %3D textToParse.substring(i)%3B %0A                    foundThisIteration %3D true%3B%0A                    break%3B %0A                %7D catch (e) %7B%0A                    try %7B%0A                        const repairedSegment %3D repairJsonStringLiterals(segment)%3B%0A                        if (repairedSegment !%3D%3D segment) %7B%0A                            JSON.parse(repairedSegment)%3B%0A                            results.push(repairedSegment)%3B%0A                            remainingText %3D textToParse.substring(i)%3B%0A                            foundThisIteration %3D true%3B%0A                            break%3B %0A                        %7D%0A                    %7D catch (e2) %7B%0A                        %2F%2F Continue extending segment%0A                    %7D%0A                %7D%0A            %7D%0A        %7D%0A        %0A        if (!foundThisIteration) %7B%0A            remainingText %3D remainingText.substring(firstJsonCharIndex %2B 1)%3B%0A        %7D%0A    %7D%0A    return results%3B%0A  %7D%0A%0A  function extractJSON(element%2C mode) %7B%0A    const timestamp %3D new Date().toISOString()%3B%0A    const commonData %3D %7B%0A        selector%3A getSelector(element)%2C%0A        tag%3A element.tagName.toLowerCase()%2C%0A        timestamp%3A timestamp%0A    %7D%3B%0A    const rawTextForPartial %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A%0A    switch (mode) %7B%0A      case 'textContent'%3A%0A        return %7B ...commonData%2C textContent%3A rawTextForPartial %7D%3B%0A      case 'innerHTML'%3A%0A        return %7B ...commonData%2C innerHTML%3A element.innerHTML %7D%3B%0A      case 'attributes'%3A%0A        let attrs %3D %7B%7D%3B%0A        for (let attr of element.attributes) attrs%5Battr.name%5D %3D attr.value%3B%0A        return %7B ...commonData%2C attributes%3A attrs %7D%3B%0A      case 'dataset'%3A%0A        return %7B ...commonData%2C dataset%3A %7B ...element.dataset %7D %7D%3B%0A      case 'computed'%3A%0A        let styles %3D window.getComputedStyle(element)%3B%0A        let computedStyles %3D %7B%7D%3B%0A        %5B'display'%2C 'position'%2C 'width'%2C 'height'%2C 'color'%2C 'background-color'%2C 'font-size'%2C 'font-family'%2C 'font-weight'%2C 'margin'%2C 'padding'%2C 'border'%2C 'opacity'%2C 'visibility'%2C 'z-index'%2C 'overflow'%2C 'text-align'%2C 'line-height'%5D.forEach(prop %3D> %7B%0A          computedStyles%5Bprop%5D %3D styles.getPropertyValue(prop)%3B%0A        %7D)%3B%0A        return %7B ...commonData%2C computedStyles%3A computedStyles %7D%3B%0A      case 'custom'%3A %0A        let jsonText %3D rawTextForPartial%3B%0A        try %7B%0A          const parsedText %3D JSON.parse(jsonText)%3B%0A          return %7B ...commonData%2C source%3A 'textContent'%2C parsedJSON%3A parsedText %7D%3B%0A        %7D catch (e) %7B%0A          let jsonAttrs %3D %7B%7D%3B%0A          let foundInDataAttr %3D false%3B%0A          for (let attr of element.attributes) %7B%0A            if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A              try %7B%0A                jsonAttrs%5Battr.name%5D %3D JSON.parse(attr.value)%3B%0A                foundInDataAttr %3D true%3B%0A              %7D catch (e2) %7B%0A                jsonAttrs%5Battr.name%5D %3D %60Error parsing%3A %24%7Battr.value.substring(0%2C50)%7D...%60%3B%0A              %7D%0A            %7D%0A          %7D%0A          if (foundInDataAttr) %7B%0A            return %7B ...commonData%2C source%3A 'dataAttributes'%2C possibleJSON%3A jsonAttrs %7D%3B%0A          %7D else %7B%0A            return %7B ...commonData%2C source%3A 'none'%2C error%3A 'Could not parse JSON from text or data attributes.'%2C rawTextSample%3A jsonText.substring(0%2C 200) %7D%3B%0A          %7D%0A        %7D%0A      case 'partialJSON'%3A %0A        try %7B%0A            const parsedOuter %3D JSON.parse(rawTextForPartial)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A                let finalOutputString %3D parsedOuter.output%3B%0A                let parsedInnerJson %3D null%3B%0A                try %7B%0A                    parsedInnerJson %3D JSON.parse(finalOutputString)%3B%0A                %7D catch (innerParseError) %7B%0A                    const repairedInnerOutput %3D repairJsonStringLiterals(finalOutputString)%3B%0A                    try %7B%0A                        parsedInnerJson %3D JSON.parse(repairedInnerOutput)%3B%0A                    %7D catch (repairedInnerParseError) %7B%0A                        parsedInnerJson %3D null%3B%0A                    %7D%0A                %7D%0A%0A                if (parsedInnerJson !%3D%3D null) %7B%0A                    %2F%2F Flatten unnecessary nested arrays%0A                    const flattened %3D flattenUnnecessaryArrays(parsedInnerJson)%3B%0A                    return Array.isArray(flattened) %3F flattened %3A %5Bflattened%5D%3B%0A                %7D%0A            %7D%0A        %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to greedy extraction%0A        %7D%0A%0A        const extractedStringParts %3D extractGreedyJson(rawTextForPartial)%3B %0A        if (extractedStringParts.length > 0) %7B%0A            const parsed %3D extractedStringParts.map(jsonStringPart %3D> %7B%0A                try %7B%0A                    const parsedJson %3D JSON.parse(jsonStringPart)%3B%0A                    return flattenUnnecessaryArrays(parsedJson)%3B%0A                %7D catch (e) %7B%0A                    return jsonStringPart%3B %2F%2F Fallback to string if parsing fails%0A                %7D%0A            %7D)%3B%0A            %0A            %2F%2F Flatten the results - if we get nested arrays%2C flatten them%0A            const result %3D %5B%5D%3B%0A            parsed.forEach(item %3D> %7B%0A                if (Array.isArray(item)) %7B%0A                    result.push(...item)%3B%0A                %7D else %7B%0A                    result.push(item)%3B%0A                %7D%0A            %7D)%3B%0A            %0A            return result.length > 0 %3F result %3A null%3B%0A        %7D else %7B%0A            return null%3B %0A        %7D%0A      default%3A%0A        return %7B ...commonData%2C error%3A 'Unknown extraction mode' %7D%3B%0A    %7D%0A  %7D%0A%0A  function getSelector(element) %7B%0A    if (!element %7C%7C !element.tagName) return 'unknown'%3B%0A    if (element.id) return %60%23%24%7Belement.id%7D%60%3B%0A%0A    let path %3D %5B%5D%3B%0A    let current %3D element%3B%0A    while (current %26%26 current.parentElement %26%26 path.length < 7) %7B %0A      let selectorPart %3D current.tagName.toLowerCase()%3B%0A      const parent %3D current.parentElement%3B%0A      if (parent) %7B%0A        const siblings %3D Array.from(parent.children).filter(child %3D> child.tagName %3D%3D%3D current.tagName)%3B%0A        if (siblings.length > 1) %7B%0A          const index %3D siblings.indexOf(current) %2B 1%3B%0A          selectorPart %2B%3D %60%3Anth-of-type(%24%7Bindex%7D)%60%3B%0A        %7D else %7B%0A            if (current.classList %26%26 current.classList.length > 0) %7B%0A                const distinctiveClass %3D Array.from(current.classList).find(cls %3D> %7B%0A                    if (!cls %7C%7C !%2F%5E%5Ba-zA-Z%5D%2F.test(cls.charAt(0))) return false%3B %0A                    try %7B%0A                        return parent.querySelectorAll(%60%24%7Bcurrent.tagName.toLowerCase()%7D.%24%7BCSS.escape(cls)%7D%60).length %3D%3D%3D 1%3B%0A                    %7D catch (e) %7B%0A                        return false%3B %0A                    %7D%0A                %7D)%3B%0A                if (distinctiveClass) %7B%0A                    selectorPart %2B%3D %60.%24%7BCSS.escape(distinctiveClass)%7D%60%3B%0A                %7D%0A            %7D%0A        %7D%0A      %7D%0A      path.unshift(selectorPart)%3B%0A      if (current.tagName.toLowerCase() %3D%3D%3D 'body') break%3B%0A      current %3D parent%3B%0A    %7D%0A    return path.join(' > ')%3B%0A  %7D%0A%0A  function updateDisplay() %7B%0A    const jsonDisplay %3D document.getElementById('json-output-display')%3B%0A    const itemCount %3D document.getElementById('item-count-display')%3B%0A    const dataSize %3D document.getElementById('data-size-display')%3B%0A%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      jsonDisplay.textContent %3D 'No data captured yet... Hover and click elements when selection is active.'%3B%0A      jsonDisplay.style.color %3D '%239da5b4'%3B %0A    %7D else %7B%0A      %2F%2F Use proper JSON stringification without double-escaping%0A      jsonDisplay.textContent %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A      jsonDisplay.style.color %3D '%23d19a66'%3B %0A    %7D%0A%0A    itemCount.textContent %3D capturedData.length%3B%0A    const sizeInBytes %3D new TextEncoder().encode(JSON.stringify(capturedData)).length%3B %0A    dataSize.textContent %3D %60%24%7B(sizeInBytes %2F 1024).toFixed(2)%7D KB%60%3B%0A  %7D%0A%0A  function handleMouseOver(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Remove highlight from previous element%0A    if (highlightedElement %26%26 highlightedElement !%3D%3D target) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A    %7D%0A    %0A    %2F%2F Add highlight to current element%0A    target.classList.add(HIGHLIGHT_CLASS)%3B%0A    highlightedElement %3D target%3B%0A    %0A    %2F%2F Show badge with JSON count%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const count %3D countJsonComponents(target%2C mode)%3B%0A    showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %0A    %2F%2F Prevent event bubbling to avoid highlighting parent elements%0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseOut(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Only remove highlight if we're leaving this element and not entering a child%0A    if (target %3D%3D%3D highlightedElement %26%26 !target.contains(e.relatedTarget)) %7B%0A        target.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A        hideBadge()%3B%0A    %7D%0A    %0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseMove(e) %7B%0A    if (!isSelecting %7C%7C !highlightedElement) return%3B%0A    %0A    %2F%2F Throttle mouse move updates to prevent performance issues%0A    if (mouseMoveThrottle) return%3B%0A    %0A    mouseMoveThrottle %3D setTimeout(() %3D> %7B%0A      %2F%2F Double-check we're still selecting before updating%0A      if (!isSelecting) %7B%0A        mouseMoveThrottle %3D null%3B%0A        return%3B%0A      %7D%0A      mouseMoveThrottle %3D null%3B%0A      %2F%2F Update badge position to follow cursor%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %7D%2C 50)%3B %2F%2F Update at most every 50ms%0A  %7D%0A%0A  function handleClick(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification') return%3B%0A%0A    e.preventDefault()%3B%0A    e.stopPropagation()%3B%0A%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const extractionResult %3D extractJSON(target%2C mode)%3B %0A%0A    %2F%2F Visual feedback for successful extraction%0A    target.style.transition %3D 'background-color 0.2s ease-out'%3B%0A    target.style.backgroundColor %3D 'rgba(152%2C 195%2C 121%2C 0.5)'%3B %0A    setTimeout(() %3D> %7B%0A      target.style.backgroundColor %3D ''%3B %0A      if(isSelecting %26%26 highlightedElement %3D%3D%3D target) %7B%0A          target.classList.add(HIGHLIGHT_CLASS)%3B%0A      %7D%0A    %7D%2C 300)%3B%0A    %0A    if (mode %3D%3D%3D 'partialJSON') %7B%0A        if (Array.isArray(extractionResult) %26%26 extractionResult.length > 0) %7B %0A            extractionResult.forEach(item %3D> capturedData.push(item))%3B%0A            showNotification(%60‚úÖ Captured %24%7BextractionResult.length%7D JSON part(s) from %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B %0A            showNotification(%60‚Ñπ%EF%B8%8F No JSON parts found in %24%7Btarget.tagName.toLowerCase()%7D.%60%2C 'info')%3B%0A        %7D%0A    %7D else %7B %0A        if (extractionResult) %7B %0A            capturedData.push(extractionResult)%3B%0A            showNotification(%60‚úÖ Captured %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B%0A            showNotification(%60‚ö†%EF%B8%8F Extraction failed for %24%7Btarget.tagName.toLowerCase()%7D. No data returned.%60%2C 'error')%3B%0A        %7D%0A    %7D%0A    updateDisplay()%3B%0A  %7D%0A%0A  function startSelectionMode() %7B%0A    isSelecting %3D true%3B%0A    originalCursor %3D document.body.style.cursor%3B%0A    document.body.style.cursor %3D 'crosshair'%3B%0A    %0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%23e06c75'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D '‚èπ%EF%B8%8F Stop Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'block'%3B%0A%0A    %2F%2F Use capture phase for better event handling%0A    document.addEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.addEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.addEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.addEventListener('click'%2C handleClick%2C true)%3B%0A    document.addEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A  %7D%0A%0A  function stopSelectionMode() %7B%0A    isSelecting %3D false%3B%0A    document.body.style.cursor %3D originalCursor%3B%0A%0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%2361afef'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'üéØ Start Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'none'%3B%0A%0A    %2F%2F Remove event listeners%0A    document.removeEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.removeEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.removeEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.removeEventListener('click'%2C handleClick%2C true)%3B%0A    document.removeEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A%0A    %2F%2F Force clean up any remaining highlights%0A    if (highlightedElement) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A    %7D%0A    %0A    %2F%2F Remove ALL highlight classes from any element that might have them%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      %2F%2F Force remove any inline styles that might have been added%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    hideBadge()%3B%0A    %0A    %2F%2F Clear any pending throttle%0A    if (mouseMoveThrottle) %7B%0A      clearTimeout(mouseMoveThrottle)%3B%0A      mouseMoveThrottle %3D null%3B%0A    %7D%0A    %0A    %2F%2F Double-check that selection is truly off by removing cursor style%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  function handleEscapeKey(e) %7B%0A    if (e.key %3D%3D%3D 'Escape' %26%26 isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Event Listeners%0A  document.getElementById('start-selection-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D else %7B%0A      startSelectionMode()%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('clear-data-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length > 0) %7B%0A        const userConfirmed %3D confirm("Are you sure you want to clear all captured data%3F")%3B%0A        if (userConfirmed) %7B%0A            capturedData %3D %5B%5D%3B%0A            updateDisplay()%3B%0A            showNotification('üóë%EF%B8%8F All data cleared.'%2C 'info')%3B%0A        %7D%0A    %7D else %7B%0A        showNotification('No data to clear.'%2C 'info')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-json-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    const jsonString %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A    const success %3D await copyToClipboard(jsonString)%3B%0A    %0A    if (success) %7B%0A      showNotification('üìã JSON copied to clipboard!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy JSON. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-items-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    %2F%2F Convert each item to JSON string and join with commas%0A    const itemsString %3D capturedData.map(item %3D> JSON.stringify(item%2C null%2C 2)).join('%2C%5Cn')%3B%0A    const success %3D await copyToClipboard(itemsString)%3B%0A    %0A    if (success) %7B%0A      showNotification('üìÑ Items copied to clipboard (without array brackets)!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy items. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('export-json-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to export.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    const blob %3D new Blob(%5BJSON.stringify(capturedData%2C null%2C 2)%5D%2C %7B type%3A 'application%2Fjson' %7D)%3B%0A    const url %3D URL.createObjectURL(blob)%3B%0A    const a %3D document.createElement('a')%3B%0A    a.href %3D url%3B%0A    a.download %3D %60extracted-data-%24%7Bnew Date().toISOString().slice(0%2C19).replace(%2F%5B%3AT%5D%2Fg%2C'-')%7D.json%60%3B%0A    document.body.appendChild(a)%3B%0A    a.click()%3B%0A    document.body.removeChild(a)%3B%0A    URL.revokeObjectURL(url)%3B%0A    showNotification('üíæ JSON download started!'%2C 'success')%3B%0A  %7D)%3B%0A%0A  document.getElementById('close-sidebar-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    cleanupAndClose()%3B%0A  %7D)%3B%0A  %0A  function cleanupAndClose() %7B%0A    %2F%2F Force stop selection mode first%0A    stopSelectionMode()%3B %0A    %0A    %2F%2F Remove all traces of the extractor%0A    document.body.style.marginRight %3D ''%3B%0A    sidebar.remove()%3B%0A    styleElement.remove()%3B %0A    %0A    %2F%2F Clean up notifications and badge%0A    const notificationEl %3D document.getElementById('json-extractor-notification')%3B%0A    if (notificationEl) notificationEl.remove()%3B%0A    const badgeEl %3D document.getElementById('json-extractor-badge')%3B%0A    if (badgeEl) badgeEl.remove()%3B%0A    %0A    %2F%2F Final cleanup of any remaining highlights%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    %2F%2F Reset cursor completely%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  updateDisplay()%3B%0A%0A  %2F%2F Update badge when extraction mode changes%0A  document.getElementById('extraction-mode-select').addEventListener('change'%2C () %3D> %7B%0A    if (isSelecting %26%26 highlightedElement) %7B%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      %2F%2F Use a simple position near the element center%0A      const rect %3D highlightedElement.getBoundingClientRect()%3B%0A      const x %3D rect.left %2B rect.width %2F 2%3B%0A      const y %3D rect.top %2B rect.height %2F 2%3B%0A      showBadge(count%2C x%2C y)%3B%0A    %7D%0A  %7D)%3B%0A%0A%7D)()%3B%7D)()%3B