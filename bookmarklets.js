// Bookmarklet Loader
// Loads bookmarklets from the bookmarklet folder and displays them

// Embedded bookmarklets data (fallback for file:// protocol)
const EMBEDDED_BOOKMARKLETS = [
  {
    "name": "Example Bookmarklet",
    "description": "A sample bookmarklet to demonstrate the system",
    "file": "example.js",
    "icon": "ðŸ”–",
    "code": "javascript:(function(){ alert('Hello from bookmarklet!'); })();"
  },
  {
    "name": "HTML Analyser",
    "description": "Analyzes HTML structure and displays element information, attributes, and hierarchy",
    "file": "HTMLAnalyser.js",
    "icon": "ðŸ”",
    "code": "javascript:void function(){(function(){var t=Math.max,n=Math.min;function i(){try{return!!document.head%26%26(document.head.appendChild(Be),!0)}catch(t){return console.error(\"Failed to append styles:\",t),!1}}function d(e,t){try{e.innerHTML=Te%3FTe.createHTML(t):t}catch(n){console.error(\"Failed to set innerHTML:\",n);try{e.innerHTML=t}catch(e){console.error(\"Fallback innerHTML also failed:\",e)}}}function l(e){return e.className%3F\"object\"==typeof e.className%26%26void 0!==e.className.baseVal%3Fe.className.baseVal:\"string\"==typeof e.className%3Fe.className:\"\":\"\"}function r(){const e=[],t={};(window.__REACT_DEVTOOLS_GLOBAL_HOOK__||document.querySelector(\"[data-reactroot], [data-reactid], [data-react-helmet]\"))%26%26(e.push(\"React\"),t.React=a()),(window.ng||document.querySelector(\"[ng-app], [ng-controller], [ng-model]\")||document.querySelector(\"*[class*=\\"ng-\\"]\"))%26%26(e.push(\"Angular\"),t.Angular=o()),(window.__VUE__||document.querySelector(\"[v-app], [v-bind], [v-model], [v-if]\")||document.querySelector(\"*[class*=\\"v-\\"]\"))%26%26(e.push(\"Vue\"),t.Vue=s()),document.querySelector(\"[class*=\\"svelte-\\"]\")%26%26e.push(\"Svelte\"),(window.jQuery||window.$)%26%26(e.push(\"jQuery\"),t.jQuery={version:window.jQuery%3Fwindow.jQuery.fn.jquery:\"Unknown\"}),document.querySelector(\".container, .row, .col, .navbar, .btn-primary\")%26%26(e.push(\"Bootstrap\"),t.Bootstrap=c());const n=Array.from(document.querySelectorAll(\"*\")).some(e=>{const t=l(e).split(\" \");return 3<t.length%26%26t.some(e=>/^(bg-|text-|p-|m-|flex|grid|border-|rounded-|shadow-|hover:)/.test(e))});n%26%26e.push(\"Tailwind CSS\"),document.querySelector(\".MuiButton-root, .MuiAppBar-root, .MuiTextField-root\")%26%26e.push(\"Material UI\"),document.querySelector(\".ant-btn, .ant-table, .ant-form\")%26%26e.push(\"Ant Design\"),document.querySelector(\"[class^=\\"chakra-\\"]\")%26%26e.push(\"Chakra UI\");const i=/^[a-zA-Z]+(-[a-zA-Z0-9]+){2,}$/,d=Array.from(document.querySelectorAll(\"*\")).filter(e=>Array.from(e.classList).some(e=>i.test(e)));if(3<d.length%26%26e.push(\"Styled Components\"),(document.querySelector(\"%23__next, [data-nextjs]\")||document.querySelector(\"script[src*=\\"/_next/\\"]\"))%26%26e.push(\"Next.js\"),(document.querySelector(\"%23___gatsby, [data-gatsby]\")||document.querySelector(\"script[src*=\\"/gatsby-\\"]\"))%26%26e.push(\"Gatsby\"),(document.querySelector(\"%23__nuxt, %23__layout\")||document.querySelector(\"script[src*=\\"/_nuxt/\\"]\"))%26%26e.push(\"Nuxt.js\"),(window.Alpine||document.querySelector(\"[x-data], [x-show], [x-bind]\"))%26%26e.push(\"Alpine.js\"),(window.Ember||document.querySelector(\"[data-ember-action]\"))%26%26e.push(\"Ember.js\"),window.history%26%26window.history.pushState){const t=window.React%26%26window.ReactRouter||document.querySelector(\"base[href=\\"/\\"]\")||e.includes(\"Angular\")||e.includes(\"Vue\")||e.includes(\"Next.js\")||e.includes(\"Gatsby\");t%26%26e.push(\"SPA Routing\")}return(window.Redux||window.__REDUX_DEVTOOLS_EXTENSION__)%26%26e.push(\"Redux\"),window.MobX%26%26e.push(\"MobX\"),window.Vuex%26%26e.push(\"Vuex\"),{list:e,details:t}}function a(){const e={version:\"Unknown\",elements:0,reactDOMElements:0,componentStructure:[]};window.React%26%26window.React.version%26%26(e.version=window.React.version);const t=document.querySelectorAll(\"[data-reactroot], [data-reactid], [data-react-helmet], [class*=\\"react-\\"]\");e.elements=t.length,e.reactDOMElements=document.querySelectorAll(\"[data-reactid]\").length;const n=document.querySelector(\"[data-reactroot]\");if(n){function t(e,n=0){if(3<n)return null;const i=Array.from(e.children).filter(e=>{const t=Array.from(e.classList);return t.some(e=>/^[A-Z]/.test(e))||e.tagName.includes(\"-\")||e.hasAttribute(\"data-reactid\")});return i.map(e=>({tagName:e.tagName.toLowerCase(),classes:Array.from(e.classList),children:t(e,n+1)}))}e.componentStructure=t(n)}return e}function o(){const e={version:\"Unknown\",elements:0,directives:[],components:[]};document.querySelector(\"[ng-version]\")%3Fe.version=document.querySelector(\"[ng-version]\").getAttribute(\"ng-version\"):document.querySelector(\"*[class*=\\"ng-\\"]\")%26%26(e.version=\"AngularJS (1.x)\"),e.elements=document.querySelectorAll(\"[ng-app], [ng-controller], [ng-model], *[class*=\\"ng-\\"]\").length;const t=document.querySelectorAll(\"*\"),n=new Set;t.forEach(e=>{Array.from(e.attributes).forEach(e=>{(e.name.startsWith(\"ng-\")||e.name.startsWith(\"data-ng-\"))%26%26n.add(e.name)})}),e.directives=Array.from(n);const i=Array.from(document.querySelectorAll(\"*\")).filter(e=>e.tagName.includes(\"-\")%26%26(e.hasAttribute(\"[\")||e.hasAttribute(\"[(\")||e.hasAttribute(\"*ngIf\")||e.hasAttribute(\"*ngFor\")));return e.components=i.map(e=>e.tagName.toLowerCase()),e}function s(){const e={version:\"Unknown\",elements:0,components:[],directives:[]};window.Vue%26%26(e.version=window.Vue.version),e.elements=document.querySelectorAll(\"[v-app], [v-bind], [v-model], [v-if], [v-for], [v-on], [v-show], [v-cloak], *[class*=\\"v-\\"]\").length;const t=Array.from(document.querySelectorAll(\"*\")).filter(e=>e.tagName.includes(\"-\")%26%26(e.hasAttribute(\"v-bind\")||e.hasAttribute(\":\")||e.hasAttribute(\"%40\")||e.hasAttribute(\"v-on\")));e.components=t.map(e=>e.tagName.toLowerCase());const n=document.querySelectorAll(\"*\"),i=new Set;return n.forEach(e=>{Array.from(e.attributes).forEach(e=>{(e.name.startsWith(\"v-\")||e.name.startsWith(\":\")||e.name.startsWith(\"%40\"))%26%26i.add(e.name)})}),e.directives=Array.from(i),e}function c(){const e={version:\"Unknown\",elements:0,components:[],elements:document.querySelectorAll(\".container, .row, .col, .navbar, .btn, .card, .alert, .badge, .modal\").length},t={\".navbar\":\"Navbar\",\".carousel\":\"Carousel\",\".dropdown\":\"Dropdown\",\".modal\":\"Modal\",\".card\":\"Card\",\".alert\":\"Alert\",\".progress\":\"Progress\",\".breadcrumb\":\"Breadcrumb\",\".accordion\":\"Accordion\",\".collapse\":\"Collapse\",\".toast\":\"Toast\",\".spinner\":\"Spinner\",\".pagination\":\"Pagination\"};for(const[n,i]of Object.entries(t))document.querySelector(n)%26%26e.components.push(i);return document.querySelector(\".navbar-expand\")%3Fdocument.querySelector(\".spinner-border\")%3Fe.version=\"Bootstrap 5.x or 4.x\":e.version=\"Bootstrap 4.x\":document.querySelector(\".navbar-default\")%3Fe.version=\"Bootstrap 3.x\":document.querySelector(\".navbar-inner\")%26%26(e.version=\"Bootstrap 2.x\"),e}function u(e){if(!e)return null;if(e===document.body)return\"body\";if(e.id)return\"%23\"+CSS.escape(e.id);const t=[\"data-testid\",\"data-cy\",\"data-test\",\"name\"];for(const n of t)if(e.hasAttribute(n)){const t=e.getAttribute(n),i=`[${n}=\"${CSS.escape(t)}\"]`;if(1===document.querySelectorAll(i).length)return i}const n=l(e);if(n){const e=n.split(/\s+/).filter(Boolean);if(0<e.length)for(let t=1;t<=e.length;t++)for(const n of m(e,t)){const e=n.map(e=>\".\"+CSS.escape(e)).join(\"\");if(1===document.querySelectorAll(e).length)return e}}const i=e.parentElement;if(!i)return null;const d=e.tagName.toLowerCase(),r=Array.from(i.children).filter(e=>e.tagName.toLowerCase()===d);if(1===r.length){const e=u(i);return e%3F`${e} > ${d}`:d}else{const t=r.indexOf(e)+1,n=u(i);return n%3F`${n} > ${d}:nth-child(${t})`:`${d}:nth-child(${t})`}}function m(e,t){return t>e.length%3F[]:1===t%3Fe.map(e=>[e]):e.reduce((n,i,d)=>{const l=m(e.slice(d+1),t-1),r=l.map(e=>[i,...e]);return[...n,...r]},[])}function f(e){const t={};[\"onclick\",\"onchange\",\"onsubmit\",\"onkeyup\",\"onkeydown\",\"onmousedown\",\"onmouseup\",\"onmouseover\",\"onmouseout\",\"onfocus\",\"onblur\",\"oninput\",\"ondrag\",\"ondrop\"].forEach(n=>{if(e.hasAttribute(n)){const i=n.substring(2);t[i]=e.getAttribute(n)}});const n=Array.from(e.classList).join(\" \");return(n.includes(\"ng-click\")||e.hasAttribute(\"ng-click\"))%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"v-on:click\")||e.hasAttribute(\"%40click\"))%26%26(t.click=\"Vue click binding\"),(e.hasAttribute(\"v-on:change\")||e.hasAttribute(\"%40change\"))%26%26(t.change=\"Vue change binding\"),e.hasAttribute(\"(click)\")%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"onClick\")||n.includes(\"clickable\")||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26\"button\"===e.type)%26%26!t.click%26%26(t.click=\"Probable click handler\"),(\"A\"===e.tagName||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26[\"button\",\"submit\",\"reset\"].includes(e.type))%26%26!t.click%26%26(t.click=\"Native click behavior\"),\"FORM\"!==e.tagName||t.submit||(t.submit=\"Native form submission\"),(\"INPUT\"===e.tagName||\"SELECT\"===e.tagName||\"TEXTAREA\"===e.tagName)%26%26(!t.change%26%26(t.change=\"Native change behavior\"),!t.input%26%26\"SELECT\"!==e.tagName%26%26(t.input=\"Native input behavior\")),t}function h(e){const t={},n=Array.from(e.attributes),i=n.filter(e=>e.name.startsWith(\"aria-\"));if(0<i.length%26%26(t.ariaAttributes={},i.forEach(e=>{t.ariaAttributes[e.name]=e.value})),e.hasAttribute(\"role\")%26%26(t.role=e.getAttribute(\"role\")),t.focusable=0<=e.tabIndex||[\"A\",\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName),[\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName)%26%26e.id){const n=document.querySelector(`label[for=\"${e.id}\"]`);n%26%26(t.labelText=n.textContent.trim())}return\"IMG\"===e.tagName%26%26(t.altText=e.alt||\"(missing alt text)\"),t}function g(e){const t=window.getComputedStyle(e);return{position:t.position,display:t.display,visibility:t.visibility,zIndex:t.zIndex,overflow:t.overflow,opacity:t.opacity,boxSizing:t.boxSizing,pointerEvents:t.pointerEvents,flexDirection:t.flexDirection,gridTemplateColumns:t.gridTemplateColumns,gridTemplateRows:t.gridTemplateRows}}function p(e){const t=e.getBoundingClientRect();return{x:t.left+window.scrollX,y:t.top+window.scrollY,width:t.width,height:t.height,viewportX:t.left,viewportY:t.top,isInViewport:0<=t.top%26%260<=t.left%26%26t.bottom<=window.innerHeight%26%26t.right<=window.innerWidth}}function y(e){const t=u(e);return{querySelector:`document.querySelector('${t}')`,traversal:b(e),byId:e.id%3F`document.getElementById('${e.id}')`:null,byClass:l(e)%3F`document.getElementsByClassName('${l(e).split(\" \")[0]}')[0]`:null,byTagName:`document.getElementsByTagName('${e.tagName.toLowerCase()}')[0]`,eventCode:E(e)}}function b(e){if(e===document.body)return\"document.body\";if(e.id)return`document.getElementById('${e.id}')`;const t=[];for(let n=e;n%26%26n!==document.body;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t.unshift(d),n=e}if(0===t.length)return null;let n=\"document.body\";return t.forEach(e=>{n+=`.children[${e}]`}),n}function E(e){const t=u(e),n=f(e),i=Object.keys(n);if(0===i.length)return null;let d=``;return d+=`const element = document.querySelector('${t}');\n`,i.forEach(e=>{d+=`element.addEventListener('${e}', (event) => {\n  console.log('${e} event triggered');\n});\n`}),d}function v(e){const t=u(e);return`const element = document.querySelector('${t}');element.textContent = 'New text';element.setAttribute('data-custom', 'value');element.classList.toggle('active');element.style.backgroundColor = 'lightblue';const newChild = document.createElement('div');newChild.textContent = 'Child element';element.appendChild(newChild);`}function x(e=document.body,t=3){function n(e,i=0){if(!e||i>t)return null;const d={tagName:e.tagName%3F.toLowerCase()||\"text\",nodeType:e.nodeType,id:e.id||null,className:e.className||null,textContent:3===e.nodeType%3Fe.textContent:null,childCount:e.childNodes%3F.length||0,selector:u(e),depth:i,children:[]};if(0<e.attributes%3F.length%26%26(d.attributes={},Array.from(e.attributes).forEach(e=>{d.attributes[e.name]=e.value})),1===e.nodeType)try{d.accessible=h(e),d.hasEventListeners=0<Object.keys(f(e)).length,d.geometry=p(e)}catch(t){d.error=t.message}return e.childNodes%26%26i<t%26%26e.childNodes.forEach(e=>{const t=n(e,i+1);t%26%26d.children.push(t)}),d}return n(e)}function S(e){if(!e||\"FORM\"!==e.tagName)return null;const t={action:e.action,method:e.method,id:e.id,name:e.name,enctype:e.enctype,controls:[]},n=e.querySelectorAll(\"input, select, textarea, button\");return n.forEach(e=>{const n={type:e.tagName.toLowerCase(),name:e.name,id:e.id,value:e.value,placeholder:e.placeholder,required:e.required,disabled:e.disabled,attributes:{}};if(\"INPUT\"===e.tagName%26%26(n.inputType=e.type,(\"checkbox\"===e.type||\"radio\"===e.type)%26%26(n.checked=e.checked),\"file\"===e.type%26%26(n.accept=e.accept,n.multiple=e.multiple)),\"SELECT\"===e.tagName%26%26(n.multiple=e.multiple,n.options=Array.from(e.options).map(e=>({value:e.value,text:e.text,selected:e.selected}))),e.id){const t=document.querySelector(`label[for=\"${e.id}\"]`);t%26%26(n.label=t.textContent.trim())}Array.from(e.attributes).forEach(e=>{[\"id\",\"name\",\"value\",\"type\",\"placeholder\",\"required\",\"disabled\"].includes(e.name)||(n.attributes[e.name]=e.value)}),t.controls.push(n)}),t.submissionCode=k(e),t}function k(e){const t=e.id||null,n=t%3F`document.getElementById('${t}')`:`document.querySelector('form')`,i=e.querySelectorAll(\"input[name], select[name], textarea[name]\");let d=`document.querySelector('${u(e)}').addEventListener('submit', function(event) {  event.preventDefault();  const formData = new FormData(this);  const formValues = {};  for (const [key, value] of formData.entries()) {    formValues[key] = value;  }  console.log('Form values:', formValues);  fetch('${e.action||\"url-here\"}', {    method: '${e.method.toUpperCase()||\"POST\"}',    body: formData  })  .then(response => response.json())  .then(data => console.log('Success:', data))  .catch(error => console.error('Error:', error));});function getFormValues() {  const form = ${n};  const values = {};`;return i.forEach(e=>{const t=e.name;d+=\"checkbox\"===e.type%3F`  values['${t}'] = form.elements['${t}'].checked;\n`:\"radio\"===e.type%3F`  values['${t}'] = form.querySelector('input[name=\"${t}\"]:checked')%3F.value;\n`:\"SELECT\"===e.tagName%26%26e.multiple%3F`  values['${t}'] = Array.from(form.elements['${t}'].selectedOptions).map(opt => opt.value);\n`:`  values['${t}'] = form.elements['${t}'].value;\n`}),d+=`  return values;}`,d}function L(){const e=document.createElement(\"div\");e.id=\"html-analyzer-tool\",d(e,`        <h3 id=\"tool-header\">HTML Structure Analyzer</h3>        <div class=\"tab-container\">          <div class=\"tab-buttons\">            <button id=\"inspector-tab\" class=\"tab-button active\">Inspector</button>            <button id=\"dom-tab\" class=\"tab-button\">DOM Explorer</button>            <button id=\"extractor-tab\" class=\"tab-button\">Extractor</button>            <button id=\"framework-tab\" class=\"tab-button\">Frameworks</button>            <button id=\"code-tab\" class=\"tab-button\">Code</button>          </div>                    <div id=\"inspector-tab-content\" class=\"tab-content active\">            <button id=\"enable-inspection-btn\" class=\"primary\">Select Element</button>            <div class=\"button-group\">              <button id=\"highlight-events-btn\">Event Listeners</button>              <button id=\"highlight-accessibility-btn\">A11y</button>              <button id=\"show-z-index-btn\">Z-Index</button>            </div>                        <div id=\"element-breadcrumbs\" class=\"breadcrumb-trail\" style=\"display: none;\">                          </div>                        <div id=\"element-info-container\" style=\"display: none;\">                          </div>          </div>                    <div id=\"dom-tab-content\" class=\"tab-content\">            <div class=\"inspector-section\">              <div class=\"tree-view-container\">                <div class=\"tree-view-header\">                  <span>DOM Tree Explorer</span>                  <div>                    <button id=\"refresh-tree-btn\" class=\"small-btn\" title=\"Refresh Tree\">â†»</button>                    <button id=\"expand-all-btn\" class=\"small-btn\" title=\"Expand All\">+</button>                    <button id=\"collapse-all-btn\" class=\"small-btn\" title=\"Collapse All\">-</button>                  </div>                </div>                <div id=\"dom-tree-view\" class=\"tree-view\">                                  </div>              </div>            </div>                        <div class=\"search-container\">              <input type=\"text\" id=\"tree-search\" class=\"search-input\" placeholder=\"Filter elements (e.g. div, .class, %23id)\">            </div>                        <div class=\"button-group\">              <button id=\"analyze-dom-btn\" class=\"secondary\">Analyze Structure</button>              <button id=\"find-duplicates-btn\" class=\"secondary\">Find Duplicate IDs</button>            </div>                        <div class=\"button-group\">              <button id=\"analyze-form-btn\">Analyze Forms</button>              <button id=\"analyze-accessibility-btn\">Analyze A11y</button>            </div>          </div>                    <div id=\"extractor-tab-content\" class=\"tab-content\">            <button id=\"extract-content-btn\" class=\"primary\">Extract Content as Markdown</button>            <button id=\"select-content-btn\">Select Content Container</button>            <div class=\"button-group\">              <button id=\"copy-markdown-btn\">Copy to Clipboard</button>              <button id=\"preview-markdown-btn\">Preview Content</button>              <button id=\"download-markdown-btn\">Download</button>            </div>                        <div class=\"extractor-options\">              <div class=\"option-group\">                <label>                  <input type=\"checkbox\" id=\"extract-images\" checked>                  Include images                </label>                <label>                  <input type=\"checkbox\" id=\"extract-links\" checked>                  Preserve links                </label>                <label>                  <input type=\"checkbox\" id=\"extract-tables\" checked>                  Include tables                </label>              </div>                            <div class=\"option-group\">                <label>                  <input type=\"checkbox\" id=\"clean-whitespace\" checked>                  Clean whitespace                </label>                <label>                  <input type=\"checkbox\" id=\"strip-scripts\">                  Remove scripts                </label>              </div>            </div>          </div>                    <div id=\"framework-tab-content\" class=\"tab-content\">            <div id=\"framework-info-container\">              <div class=\"loading-indicator\">Analyzing frameworks...</div>            </div>                        <button id=\"analyze-frameworks-btn\" class=\"primary\">Detect Frameworks</button>            <div class=\"button-group\">              <button id=\"analyze-css-btn\">Analyze CSS Usage</button>              <button id=\"analyze-specificity-btn\">CSS Specificity</button>            </div>                        <div id=\"framework-detail-view\"></div>          </div>                    <div id=\"code-tab-content\" class=\"tab-content\">            <div class=\"code-section\">              <div class=\"code-section-header\">Element Access</div>              <div class=\"button-group\">                <button id=\"generate-selectors-btn\" class=\"primary\">Generate Selectors</button>                <button id=\"generate-traversal-btn\">DOM Traversal</button>              </div>            </div>                        <div class=\"code-section\">              <div class=\"code-section-header\">Interaction Code</div>              <div class=\"button-group\">                <button id=\"generate-access-btn\">Element Access</button>                <button id=\"generate-event-btn\">Event Handlers</button>              </div>            </div>                        <div class=\"code-section\">              <div class=\"code-section-header\">Test Automation</div>              <div class=\"button-group\">                <button id=\"generate-cypress-btn\">Cypress</button>                <button id=\"generate-playwright-btn\">Playwright</button>                <button id=\"generate-selenium-btn\">Selenium</button>              </div>            </div>                        <div id=\"code-output-container\"></div>          </div>        </div>                <div class=\"status-bar\">          <div id=\"status-message\">Ready</div>          <div class=\"button-group\">            <button id=\"export-info-btn\" class=\"small-btn\">Export</button>            <button id=\"help-btn\" class=\"small-btn\">Help</button>            <button id=\"close-tool-btn\" class=\"small-btn danger\">Ã—</button>          </div>        </div>      `);try{if(!document.body)throw new Error(\"document.body not available\");document.body.appendChild(e),C(),R(),j(),w(),setTimeout(()=>{z()},500)}catch(t){throw console.error(\"Failed to create tool panel:\",t),t}}function C(){const e=document.createElement(\"style\");e.textContent=`        .tree-view-container {          border: 1px solid var(--border-color);          border-radius: 4px;          margin-bottom: 10px;          max-height: 300px;          overflow: auto;        }                .tree-view-header {          padding: 5px 10px;          background: var(--button-bg);          border-bottom: 1px solid var(--border-color);          display: flex;          justify-content: space-between;          align-items: center;          font-weight: bold;          font-size: 13px;        }                .tree-view {          padding: 5px;          font-family: monospace;          font-size: 12px;          line-height: 1.4;        }                .small-btn {          width: auto !important;          padding: 2px 5px !important;          margin: 0 2px !important;          font-size: 12px !important;          display: inline-block !important;        }                .status-bar {          margin-top: 10px;          padding-top: 5px;          border-top: 1px solid var(--border-color);          display: flex;          justify-content: space-between;          align-items: center;          font-size: 12px;        }                %23status-message {          color: var(--text-color);          font-style: italic;        }                .loading-indicator {          padding: 10px;          text-align: center;          font-style: italic;          color: var(--text-color);        }                .code-section {          margin-bottom: 15px;        }                .code-section-header {          font-weight: bold;          margin-bottom: 5px;          color: var(--text-color);        }                .extractor-options {          margin: 10px 0;          padding: 10px;          border: 1px solid var(--border-color);          border-radius: 4px;        }                .option-group {          display: flex;          flex-wrap: wrap;          gap: 10px;          margin-bottom: 8px;        }                .option-group label {          display: flex;          align-items: center;          font-size: 12px;        }                .option-group input[type=\"checkbox\"] {          margin-right: 5px;        }                .framework-list {          display: flex;          flex-wrap: wrap;          gap: 5px;          margin: 10px 0;        }                .framework-badge {          padding: 4px 8px;          border-radius: 12px;          font-size: 12px;          background: var(--primary-bg);          color: white;          display: inline-flex;          align-items: center;        }                .framework-badge.react { background: %2361dafb; color: %23000; }        .framework-badge.vue { background: %2342b883; color: %23fff; }        .framework-badge.angular { background: %23dd0031; color: %23fff; }        .framework-badge.svelte { background: %23ff3e00; color: %23fff; }        .framework-badge.jquery { background: %230769ad; color: %23fff; }        .framework-badge.bootstrap { background: %237952b3; color: %23fff; }        .framework-badge.tailwind { background: %2338b2ac; color: %23fff; }                .framework-details {          margin-top: 15px;          border-top: 1px solid var(--border-color);          padding-top: 10px;        }                .framework-details h4 {          margin: 0 0 10px 0;          font-size: 14px;        }                .framework-detail-section {          margin-bottom: 15px;        }                .framework-property {          display: flex;          font-size: 12px;          margin-bottom: 3px;        }                .framework-property-name {          font-weight: bold;          width: 100px;        }                .framework-property-value {          flex: 1;        }                .tree-node {          padding: 2px 0;          white-space: nowrap;          display: flex;          align-items: center;        }                .tree-node:hover {          background: var(--button-hover);        }                .tree-node-selected {          background: var(--primary-bg) !important;          color: white;        }                .tree-node-children {          padding-left: 16px;          border-left: 1px dotted var(--border-color);          margin-left: 6px;        }                .tree-node-hidden {          display: none;        }                .tree-node-toggle {          width: 16px;          height: 16px;          text-align: center;          line-height: 14px;          cursor: pointer;          font-size: 10px;          user-select: none;        }                .tree-node-icon {          width: 16px;          height: 16px;          margin: 0 4px;          display: inline-block;          font-size: 12px;          text-align: center;        }                .tree-node-label {          cursor: pointer;          user-select: none;          font-size: 12px;        }                .tree-node-tag {          color: %23e76f51;        }                .tree-node-id {          color: %2300bfff;          font-weight: bold;        }                .tree-node-class {          color: %23ffd166;        }                .tree-node-filter-highlight {          background: rgba(255, 255, 0, 0.2);          border-radius: 2px;        }                .specificity-table {          width: 100%25;          border-collapse: collapse;          font-size: 12px;        }                .specificity-table th, .specificity-table td {          text-align: left;          padding: 4px;          border-bottom: 1px solid var(--border-color);        }                .specificity-table th {          background: var(--button-bg);          font-weight: bold;        }                .specificity-table tr:hover {          background: var(--button-hover);        }                .property-conflict {          background: rgba(255, 87, 34, 0.1);        }                .property-winning {          background: rgba(0, 200, 83, 0.1);        }                .test-code-tabs {          display: flex;          border-bottom: 1px solid var(--border-color);          margin-bottom: 10px;        }                .test-code-tab {          padding: 5px 10px;          cursor: pointer;          border: 1px solid transparent;          border-bottom: none;          border-radius: 4px 4px 0 0;          margin-right: 2px;          font-size: 12px;        }                .test-code-tab.active {          background: var(--button-bg);          border-color: var(--border-color);        }      `,document.head.appendChild(e)}function w(){const e=document.getElementById(\"dom-tree-view\");e%26%26(d(e,\"<div class=\\"loading-indicator\\">Loading DOM tree...</div>\"),setTimeout(()=>{const t=document.documentElement,n=N(t);d(e,n),q(),B()},100))}function N(e,t=2,n=0){if(!e||30<n)return\"\";const i=e.tagName%3Fe.tagName.toLowerCase():\"text\",d=e.id%3Fe.id:\"\",l=e.className%26%26\"string\"==typeof e.className%3Fe.className:\"\",r=e.childNodes%26%260<e.childNodes.length,a=n<t,o=I(e);let s=`<span class=\"tree-node-tag\">${i}</span>`;if(d%26%26(s+=` <span class=\"tree-node-id\">%23${d}</span>`),l%26%26l.trim()){const e=l.split(/\s+/).filter(Boolean);e.length%26%26(2>=e.length%3Fs+=` <span class=\"tree-node-class\">.${e.join(\".\")}</span>`:s+=` <span class=\"tree-node-class\">.${e[0]}...</span>`)}if(e.attributes%26%260<e.attributes.length){const t=e.attributes.length;s+=` <span class=\"tree-node-attrs\">(${t} attrs)</span>`}let c=`        <div class=\"tree-node\" data-node-id=\"${o}\">          <span class=\"tree-node-toggle\">${r%3Fa%3F\"\u25BE\":\"\u25B8\":\"\u2022\"}</span>          <span class=\"tree-node-icon\">${A(e)}</span>          <span class=\"tree-node-label\">${s}</span>        </div>      `;if(r){let i=`<div class=\"tree-node-children\" ${a%3F\"\":\"style=\\"display:none\\"\"}>`;Array.from(e.children).forEach(e=>{i+=N(e,t,n+1)}),1>n%26%26Array.from(e.childNodes).forEach(e=>{e.nodeType===Node.TEXT_NODE%26%26e.textContent.trim()%26%26(i+=`                <div class=\"tree-node\" data-node-type=\"text\">                  <span class=\"tree-node-toggle\">â€¢</span>                  <span class=\"tree-node-icon\">T</span>                  <span class=\"tree-node-label\">%23text</span>                </div>              `)}),i+=`</div>`,c+=i}return c}function I(e){if(!e)return\"unknown\";if(e.id)return`id:${e.id}`;let t=\"\",n=e;for(;n%26%26n!==document.documentElement;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t=`.${d}${t}`,n=e}return`path:${t||\"0\"}`}function A(e){if(!e)return\"%3F\";switch(e.tagName%26%26e.tagName.toLowerCase()){case\"html\":return\"H\";case\"head\":return\"\u2699\uFE0F\";case\"body\":return\"B\";case\"div\":return\"D\";case\"span\":return\"S\";case\"a\":return\"\uD83D\uDD17\";case\"img\":return\"\uD83D\uDDBC\uFE0F\";case\"button\":return\"\uD83D\uDD18\";case\"input\":return\"\uD83D\uDCDD\";case\"form\":return\"\uD83D\uDCCB\";case\"table\":return\"\uD83D\uDD32\";case\"ul\":case\"ol\":return\"\uD83D\uDCC4\";case\"li\":return\"\u2022\";case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":return\"H\"+e.tagName.substring(1);case\"script\":return\"\uD83D\uDCDC\";case\"style\":return\"\uD83C\uDFA8\";case\"link\":return\"\uD83D\uDD17\";case\"meta\":return\"M\";case\"iframe\":return\"\uD83D\uDCDF\";case\"svg\":return\"\u2693\";case\"video\":return\"\uD83D\uDCF9\";case\"audio\":return\"\uD83D\uDD0A\";case\"canvas\":return\"\uD83C\uDFAD\";default:return\"E\";}}function q(){document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-node\"),n=e.nextElementSibling;if(n%26%26n.classList.contains(\"tree-node-children\")){const e=\"none\"!==n.style.display;n.style.display=e%3F\"none\":\"block\",t.target.textContent=e%3F\"\u25B8\":\"\u25BE\"}t.stopPropagation()})}),document.querySelectorAll(\".tree-node-label\").forEach(e=>{e.addEventListener(\"click\",t=>{M(t.target.closest(\".tree-node\")),t.stopPropagation()})}),document.getElementById(\"refresh-tree-btn\")%3F.addEventListener(\"click\",()=>{w()}),document.getElementById(\"expand-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"block\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25BE\")})}),document.getElementById(\"collapse-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"none\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25B8\")})})}function B(){const e=document.getElementById(\"tree-search\");e%26%26e.addEventListener(\"input\",t=>{const e=t.target.value.trim().toLowerCase();return e%3Fvoid document.querySelectorAll(\".tree-node\").forEach(t=>{const n=t.querySelector(\".tree-node-label\");if(!n)return;const i=n.textContent.toLowerCase(),l=i.includes(e);if(l){t.classList.remove(\"tree-node-hidden\");const i=n.innerHTML,l=new RegExp(`(${T(e)})`,\"gi\");d(n,i.replace(l,\"<mark class=\\"tree-node-filter-highlight\\">$1</mark>\"));for(let e=t.parentElement;e;){if(e.classList.contains(\"tree-node-children\")){e.style.display=\"block\";const t=e.previousElementSibling;if(t%26%26t.classList.contains(\"tree-node\")){const e=t.querySelector(\".tree-node-toggle\");e%26%26(e.textContent=\"\u25BE\")}}e=e.parentElement}}else{const e=t.nextElementSibling;e%26%26e.classList.contains(\"tree-node-children\")%26%26e.querySelector(\".tree-node:not(.tree-node-hidden)\")%3Ft.classList.remove(\"tree-node-hidden\"):t.classList.add(\"tree-node-hidden\")}}):void document.querySelectorAll(\".tree-node\").forEach(e=>{e.classList.remove(\"tree-node-hidden\");const t=e.querySelector(\".tree-node-label\");t%26%26d(t,t.innerHTML.replace(/<mark class=\"tree-node-filter-highlight\">(.*%3F)<\/mark>/g,\"$1\"))})})}function T(e){return e.replace(/[.*+%3F^${}()|[\]\\]/g,\"\\$%26\")}function M(e){if(!e)return;document.querySelectorAll(\".tree-node-selected\").forEach(e=>{e.classList.remove(\"tree-node-selected\")}),e.classList.add(\"tree-node-selected\");const t=e.dataset.nodeId;if(!t)return;let n=null;if(t.startsWith(\"id:\")){const e=t.substring(3);n=document.getElementById(e)}else if(t.startsWith(\"path:\")){const e=t.substring(5).split(\".\");n=document.documentElement;for(let t=1;t<e.length;t++){const i=parseInt(e[t]);if(n.children%26%26i<n.children.length)n=n.children[i];else{n=null;break}}}n%26%26(ne(n),n.scrollIntoView({behavior:\"smooth\",block:\"center\"}),document.getElementById(\"inspector-tab\").click())}function z(){function e(e){return e.replace(/([A-Z])/g,\" $1\").replace(/^./,e=>e.toUpperCase())}const t=document.getElementById(\"framework-info-container\");if(!t)return;const n=r();let i=\"\";n.list%26%260<n.list.length%3F(i+=`<div class=\"framework-list\">`,n.list.forEach(e=>{const t=e.toLowerCase().replace(/\s+/g,\"\");i+=`<div class=\"framework-badge ${t}\">${e}</div>`}),i+=`</div>`,n.details%26%26Object.entries(n.details).forEach(([t,n])=>{i+=`<div class=\"framework-details\">`,i+=`<h4>${t} Details</h4>`,i+=`<div class=\"framework-detail-section\">`,Object.entries(n).forEach(([t,n])=>{\"object\"==typeof n%26%26null!==n%3FArray.isArray(n)%3F(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n.length} items</div>`,i+=`</div>`,0<n.length%26%26(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\"></div>`,i+=`<div class=\"framework-property-value\">`,n.slice(0,5).forEach(e=>{i+=`<div>${\"string\"==typeof e%3Fe:JSON.stringify(e)}</div>`}),5<n.length%26%26(i+=`<div>...and ${n.length-5} more</div>`),i+=`</div>`,i+=`</div>`)):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">[Object]</div>`,i+=`</div>`):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n}</div>`,i+=`</div>`)}),i+=`</div>`,i+=`</div>`})):i=`<div class=\"framework-info-message\">No frameworks detected on this page. This appears to be a static HTML page.</div>`,d(t,i)}function R(){const t=document.getElementById(\"html-analyzer-tool\"),n=document.getElementById(\"tool-header\");n.addEventListener(\"mousedown\",n=>{n.preventDefault(),Me.isMoving=!0,Me.moveOffset={x:n.clientX-t.getBoundingClientRect().left,y:n.clientY-t.getBoundingClientRect().top},document.addEventListener(\"mousemove\",O),document.addEventListener(\"mouseup\",()=>{Me.isMoving=!1,document.removeEventListener(\"mousemove\",O)},{once:!0})})}function O(i){if(!Me.isMoving)return;const e=document.getElementById(\"html-analyzer-tool\"),d=i.clientX-Me.moveOffset.x,l=i.clientY-Me.moveOffset.y,r=window.innerWidth-e.offsetWidth,a=window.innerHeight-e.offsetHeight;e.style.left=`${t(0,n(d,r))}px`,e.style.top=`${t(0,n(l,a))}px`}function j(){document.querySelectorAll(\".tab-button\").forEach(e=>{e.addEventListener(\"click\",Z)}),document.getElementById(\"enable-inspection-btn\").addEventListener(\"click\",J),document.getElementById(\"highlight-events-btn\").addEventListener(\"click\",re),document.getElementById(\"highlight-accessibility-btn\").addEventListener(\"click\",ae),document.getElementById(\"show-z-index-btn\").addEventListener(\"click\",oe),document.getElementById(\"extract-content-btn\").addEventListener(\"click\",ce),document.getElementById(\"select-content-btn\").addEventListener(\"click\",ue),document.getElementById(\"copy-markdown-btn\").addEventListener(\"click\",he),document.getElementById(\"preview-markdown-btn\").addEventListener(\"click\",me),document.getElementById(\"download-markdown-btn\").addEventListener(\"click\",fe),document.getElementById(\"analyze-dom-btn\").addEventListener(\"click\",ge),document.getElementById(\"analyze-form-btn\").addEventListener(\"click\",pe),document.getElementById(\"find-duplicates-btn\").addEventListener(\"click\",se),document.getElementById(\"tree-search\").addEventListener(\"input\",xe),document.getElementById(\"generate-selectors-btn\").addEventListener(\"click\",ye),document.getElementById(\"generate-traversal-btn\").addEventListener(\"click\",Ee),document.getElementById(\"generate-access-btn\").addEventListener(\"click\",ve),document.getElementById(\"export-info-btn\").addEventListener(\"click\",Ne),document.getElementById(\"close-tool-btn\").addEventListener(\"click\",Ie)}function H(e,t=\"Preview\",n=\"text\"){D();const i=document.createElement(\"div\");i.id=\"preview-overlay\";let l=\"\";if(\"markdown\"===n%3Fl=`          <div id=\"preview-tabs\">            <button id=\"preview-tab-markdown\" class=\"active\">Markdown</button>            <button id=\"preview-tab-html\">HTML</button>            <button id=\"preview-tab-rendered\">Rendered</button>          </div>        `:\"structure\"===n%26%26(l=`          <div id=\"preview-tabs\">            <button id=\"preview-tab-tree\" class=\"active\">Tree View</button>            <button id=\"preview-tab-json\">JSON</button>          </div>        `),d(i,`        <div id=\"preview-container\">          <div id=\"preview-header\">            <h3>${t}</h3>            <button id=\"close-preview-btn\" class=\"danger\">Ã—</button>          </div>          ${l}          <div id=\"preview-content\">${\"html\"===n%3Fe:\"rendered\"===n%3F\"\":Y(e)}</div>          <div id=\"preview-actions\">            <button id=\"preview-copy-btn\">Copy to Clipboard</button>            <button id=\"preview-download-btn\" class=\"primary\">Download</button>            <button id=\"preview-close-btn\">Close</button>          </div>        </div>      `),document.body.appendChild(i),document.getElementById(\"close-preview-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-close-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-copy-btn\").addEventListener(\"click\",()=>{Q(e),X(\"Copied to clipboard!\")}),document.getElementById(\"preview-download-btn\").addEventListener(\"click\",()=>{we(e,t,n)}),\"markdown\"===n){const t=G(e);document.getElementById(\"preview-tab-markdown\").addEventListener(\"click\",()=>{U(\"markdown\"),d(document.getElementById(\"preview-content\"),Y(e))}),document.getElementById(\"preview-tab-html\").addEventListener(\"click\",()=>{U(\"html\"),d(document.getElementById(\"preview-content\"),Y(t))}),document.getElementById(\"preview-tab-rendered\").addEventListener(\"click\",()=>{U(\"rendered\"),d(document.getElementById(\"preview-content\"),t)})}else if(\"structure\"===n){const t=F(e),n=JSON.stringify(e,null,2);document.getElementById(\"preview-tab-tree\").addEventListener(\"click\",()=>{U(\"tree\"),d(document.getElementById(\"preview-content\"),t),_()}),document.getElementById(\"preview-tab-json\").addEventListener(\"click\",()=>{U(\"json\"),d(document.getElementById(\"preview-content\"),Y(n))}),d(document.getElementById(\"preview-content\"),t),_()}}function _(){document.querySelectorAll(\".tree-toggler\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-item\"),n=e.querySelector(\".tree-children\");n%26%26(n.style.display=\"none\"===n.style.display%3F\"block\":\"none\",t.target.textContent=\"none\"===n.style.display%3F\"\u25B8\":\"\u25BE\")})}),document.querySelectorAll(\".tree-item-label\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.dataset.elementId;if(e){const t=document.querySelector(e);t%26%26(ie(t),le(t))}})})}function U(e){document.querySelectorAll(\"%23preview-tabs button\").forEach(e=>{e.classList.remove(\"active\")}),document.getElementById(`preview-tab-${e}`).classList.add(\"active\"),Me.previewActiveTab=e}function D(){const e=document.getElementById(\"preview-overlay\");e%26%26e.remove()}function $(e){if(!e)return;const t=document.getElementById(\"element-info-container\"),n=document.getElementById(\"element-breadcrumbs\");t.style.display=\"block\",n.style.display=\"block\",d(n,\"\"),V(e,n);const i=e.tagName.toLowerCase(),r=e.id%3F`%23${e.id}`:\"\",a=l(e),o=a%3F`.${a.split(\" \").join(\".\")}`:\"\",s=u(e),c=f(e),m=h(e),b=g(e),E=p(e);d(t,`        <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Basic Information</div>          <div><strong>Element:</strong> ${i}${r}${o}</div>          <div><strong>Unique Selector:</strong> ${s}</div>          <div><strong>Text Content:</strong> ${e.textContent.substring(0,50)}${50<e.textContent.length%3F\"...\":\"\"}</div>          <div><strong>Child Elements:</strong> ${e.children.length}</div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Attributes</div>          <div class=\"property-list\">            ${Array.from(e.attributes).map(e=>`              <div class=\"property-item\">                <div class=\"property-name\">${e.name}</div>                <div class=\"property-value\">${e.value}</div>              </div>            `).join(\"\")}          </div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Event Listeners</div>          ${0<Object.keys(c).length%3FObject.entries(c).map(([e,t])=>`<span class=\"badge badge-warning\">${e}</span>`).join(\"\"):\"<div>No event listeners detected</div>\"}        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Accessibility</div>          ${0<Object.keys(m).length%3F`<div class=\"property-list\">              ${Object.entries(m).map(([e,t])=>\"ariaAttributes\"===e%26%26\"object\"==typeof t%3FObject.entries(t).map(([e,t])=>`                    <div class=\"property-item\">                      <div class=\"property-name\">${e}</div>                      <div class=\"property-value\">${t}</div>                    </div>                  `).join(\"\"):`                    <div class=\"property-item\">                      <div class=\"property-name\">${e}</div>                      <div class=\"property-value\">${JSON.stringify(t)}</div>                    </div>                  `).join(\"\")}            </div>`:\"<div>No accessibility attributes detected</div>\"}        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Key Styles</div>          <div class=\"property-list\">            ${Object.entries(b).map(([e,t])=>`              <div class=\"property-item\">                <div class=\"property-name\">${e}</div>                <div class=\"property-value\">${t}</div>              </div>            `).join(\"\")}          </div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Actions</div>          <div class=\"button-group\">            <button id=\"generate-selector-btn\" class=\"secondary\">Generate Selector</button>            <button id=\"generate-js-access-btn\" class=\"secondary\">JS Access</button>          </div>          <div class=\"button-group\">            <button id=\"copy-outer-html-btn\" class=\"info\">Copy HTML</button>            <button id=\"inspect-children-btn\" class=\"info\">Inspect Children</button>          </div>        </div>      `),document.getElementById(\"generate-selector-btn\").addEventListener(\"click\",()=>{W(s,\"CSS Selector\")}),document.getElementById(\"generate-js-access-btn\").addEventListener(\"click\",()=>{const t=y(e);let n=`const element = ${t.querySelector};${t.byId%3F`const elementById = ${t.byId};`:\"\"}${t.byClass%3F`const elementByClass = ${t.byClass};`:\"\"}${t.byTagName%3F`const elementByTag = ${t.byTagName};`:\"\"}`;W(n,\"JavaScript Element Access\")}),document.getElementById(\"copy-outer-html-btn\").addEventListener(\"click\",()=>{Q(e.outerHTML),X(\"HTML copied to clipboard!\")}),document.getElementById(\"inspect-children-btn\").addEventListener(\"click\",()=>{P(e)})}function V(e,t){let n=e;const i=[];for(;n%26%26n!==document.documentElement;)i.unshift({element:n,tag:n.tagName.toLowerCase(),id:n.id,classes:n.className}),n=n.parentElement;i.unshift({element:document.documentElement,tag:\"html\",id:\"\",classes:\"\"}),i.forEach((e,n)=>{const i=document.createElement(\"span\");i.className=\"breadcrumb-item\";let d=e.tag;if(e.id%26%26(d+=`%23${e.id}`),e.classes){const t=e.classes.split(\" \")[0];t%26%26(d+=`.${t}`),1<e.classes.split(\" \").length%26%26(d+=\"...\")}i.textContent=d,i.dataset.index=n,i.addEventListener(\"click\",()=>{ie(e.element),$(e.element),Me.selectedElement=e.element}),t.appendChild(i)})}function P(e){const t=Array.from(e.children);if(0===t.length)return void X(\"This element has no child elements\");let n=`<div class=\"element-tree\">        <div class=\"tree-item\">          <span class=\"tree-toggler\">â–¾</span>          <span class=\"tree-item-label\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}</span>          <div class=\"tree-children\">      `;t.forEach(e=>{const t=u(e);n+=`          <div class=\"tree-item\">            <span class=\"tree-toggler\">${0<e.children.length%3F\"\u25B8\":\"\u2022\"}</span>            <span class=\"tree-item-label\" data-element-id=\"${t}\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}${l(e)%3F\" .\"+l(e).split(\" \")[0]:\"\"}</span>            ${0<e.children.length%3F\"<div class=\\"tree-children\\" style=\\"display: none;\\"></div>\":\"\"}          </div>        `}),n+=`          </div>        </div>      </div>`,H(n,\"Child Elements\",\"html\"),_()}function F(e){function t(e,n=0){if(!e)return\"\";let i=\"\";const d=e.children%26%260<e.children.length;i+=`<div class=\"tree-item\">`,i+=`<span class=\"tree-toggler\">${d%3F\"\u25BE\":\"\u2022\"}</span>`;let r=e.tagName||\"text\";e.id%26%26(r+=` %23${e.id}`);const a=l(e);if(a%26%26(r+=` .${a.split(\" \")[0]}`),i+=e.selector%3F`<span class=\"tree-item-label\" data-element-id=\"${e.selector}\">${r}</span>`:`<span class=\"tree-item-label\">${r}</span>`,e.attributes||e.textContent){let t=\"\";if(e.attributes){const n=Object.keys(e.attributes).length;0<n%26%26(t+=` [${n} attr]`)}if(e.textContent){const n=e.textContent.trim();if(0<n.length){const e=20<n.length%3Fn.substring(0,20)+\"...\":n;t+=` \"${e}\"`}}t%26%26(i+=`<span style=\"color: %23888;\">${t}</span>`)}return d%26%26(i+=`<div class=\"tree-children\">`,e.children.forEach(e=>{i+=t(e,n+1)}),i+=`</div>`),i+=`</div>`,i}return t(e)}function X(e,t=2e3){const n=document.querySelector(\".tooltip\");n%26%26n.remove();const i=document.createElement(\"div\");i.className=\"tooltip\",i.textContent=e,document.body.appendChild(i);const d=i.getBoundingClientRect();i.style.left=`${(window.innerWidth-d.width)/2}px`,i.style.top=`20px`,setTimeout(()=>{i%26%26i.parentNode%26%26i.remove()},t)}function W(e,t){H(e,t,\"text\")}function Q(e){const t=document.createElement(\"textarea\");t.value=e,t.style.position=\"fixed\",t.style.opacity=\"0\",document.body.appendChild(t),t.select();try{document.execCommand(\"copy\")}catch(e){console.error(\"Failed to copy text: \",e)}document.body.removeChild(t)}function Y(e){return e.replace(/%26/g,\"%26amp;\").replace(/</g,\"%26lt;\").replace(/>/g,\"%26gt;\").replace(/\"/g,\"%26quot;\").replace(/'/g,\"%26%23039;\")}function G(e){return e%3Fe.replace(/```(\w*)\n([\s\S]*%3F)\n```/g,\"<pre><code class=\\"language-$1\\">$2</code></pre>\").replace(/`([^`]+)`/g,\"<code>$1</code>\").replace(/^%23 (.*$)/gm,\"<h1>$1</h1>\").replace(/^%23%23 (.*$)/gm,\"<h2>$1</h2>\").replace(/^%23%23%23 (.*$)/gm,\"<h3>$1</h3>\").replace(/^%23%23%23%23 (.*$)/gm,\"<h4>$1</h4>\").replace(/^%23%23%23%23%23 (.*$)/gm,\"<h5>$1</h5>\").replace(/^%23%23%23%23%23%23 (.*$)/gm,\"<h6>$1</h6>\").replace(/\*\*(.*%3F)\*\*/g,\"<strong>$1</strong>\").replace(/\*(.*%3F)\*/g,\"<em>$1</em>\").replace(/^\s*- (.*$)/gm,\"<ul><li>$1</li></ul>\").replace(/^\s*\d+\. (.*$)/gm,\"<ol><li>$1</li></ol>\").replace(/\[(.*%3F)\]\((.*%3F)\)/g,\"<a href=\\"$2\\">$1</a>\").replace(/^(%3F!<[^>]*>)(.*$)/gm,\"<p>$1</p>\").replace(/<\/ul>\s*<ul>/g,\"\").replace(/<\/ol>\s*<ol>/g,\"\"):\"\"}function Z(t){document.querySelectorAll(\".tab-button\").forEach(e=>{e.classList.remove(\"active\")}),document.querySelectorAll(\".tab-content\").forEach(e=>{e.classList.remove(\"active\")}),t.target.classList.add(\"active\");const e=t.target.id,n=e.replace(\"-tab\",\"-tab-content\");document.getElementById(n).classList.add(\"active\"),Me.activeTab=e.replace(\"-tab\",\"\")}function J(){Me.isInspecting=!Me.isInspecting;const e=document.getElementById(\"enable-inspection-btn\");e.textContent=Me.isInspecting%3F\"Cancel Selection\":\"Select Element\",e.classList.toggle(\"primary\",!Me.isInspecting),e.classList.toggle(\"danger\",Me.isInspecting),Me.isInspecting%3F(document.addEventListener(\"mouseover\",K,!0),document.addEventListener(\"mouseout\",ee,!0),document.addEventListener(\"click\",te,!0),X(\"Hover over elements and click to select one for inspection\")):(document.removeEventListener(\"mouseover\",K,!0),document.removeEventListener(\"mouseout\",ee,!0),document.removeEventListener(\"click\",te,!0),de())}function K(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(de(),ie(t.target,!1),Me.hoveredElement=t.target))}function ee(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||t.target===Me.hoveredElement%26%26(de(),Me.hoveredElement=null))}function te(t){Me.isInspecting%26%26(t.preventDefault(),t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(ne(t.target),J()))}function ne(e){Me.selectedElement=e,de(),ie(e,!0),$(e),Me.inspectionHistory.find(t=>t===e)%26%26(Me.inspectionHistory=Me.inspectionHistory.filter(t=>t!==e)),Me.inspectionHistory.unshift(e),10<Me.inspectionHistory.length%26%26Me.inspectionHistory.pop()}function ie(e,t=!1){if(!e)return;de(),e.classList.add(\"element-highlight\");const n=document.createElement(\"div\");n.className=\"element-label\";let i=e.tagName.toLowerCase();e.id%26%26(i+=`%23${e.id}`);const d=l(e);if(d){const e=d.split(/\s+/).filter(e=>e%26%26\"element-highlight\"!==e);0<e.length%26%26(i+=`.${e[0]}`,1<e.length%26%26(i+=`+${e.length-1}`))}n.textContent=i,e.appendChild(n),Me.highlightedElements.push({element:e,label:n}),t%26%26le(e)}function de(){document.querySelectorAll(\".element-highlight\").forEach(e=>{e.classList.remove(\"element-highlight\")}),document.querySelectorAll(\".element-label\").forEach(e=>{e.remove()}),Me.highlightedElements=[]}function le(e){if(e){const t=e.getBoundingClientRect();(0>t.top||t.bottom>window.innerHeight)%26%26e.scrollIntoView({behavior:\"smooth\",block:\"center\"})}}function re(){de();const e=document.getElementById(\"highlight-events-btn\");if(\"events\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight Event Listeners\");Me.visualMode=\"events\",e.textContent=\"Remove Event Highlights\";const t=document.querySelectorAll(\"a, button, input, select, textarea, [onclick], [onkeyup], [onchange], [role=\\"button\\"], [role=\\"link\\"], [role=\\"checkbox\\"], [role=\\"menuitem\\"], [class*=\\"btn\\"], [class*=\\"button\\"], [class*=\\"clickable\\"]\");t.forEach(e=>{0<Object.keys(f(e)).length%26%26e.classList.add(\"event-highlight\")}),X(\"Highlighted all elements with event listeners\",3e3)}function ae(){de();const e=document.getElementById(\"highlight-accessibility-btn\");if(\"accessibility\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight A11y Elements\");Me.visualMode=\"accessibility\",e.textContent=\"Remove A11y Highlights\";const t=document.querySelectorAll(\"[role], [aria-*], [tabindex], [alt], [title], [for], label, a[href], button, input, select, textarea\");t.forEach(e=>{e.classList.add(\"accessibility-highlight\")}),X(\"Highlighted all elements with accessibility attributes\",3e3)}function oe(){de();const e=document.getElementById(\"show-z-index-btn\");if(document.querySelectorAll(\".z-index-highlighter\").forEach(e=>e.remove()),\"zindex\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\");Me.visualMode=\"zindex\",e.textContent=\"Remove Z-Index Visual\";const i=Array.from(document.querySelectorAll(\"*\")).filter(e=>{const t=window.getComputedStyle(e);return\"static\"!==t.position%26%26\"auto\"!==t.zIndex%26%26!isNaN(parseInt(t.zIndex))});return 0===i.length%3F(X(\"No elements with z-index found on this page\"),Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\")):void(i.sort((e,t)=>{const n=parseInt(window.getComputedStyle(e).zIndex),i=parseInt(window.getComputedStyle(t).zIndex);return n-i}),i.forEach(e=>{const i=e.getBoundingClientRect(),d=parseInt(window.getComputedStyle(e).zIndex),l=document.createElement(\"div\");l.className=\"z-index-highlighter\",l.style.left=`${i.left+window.scrollX}px`,l.style.top=`${i.top+window.scrollY}px`,l.style.width=`${i.width}px`,l.style.height=`${i.height}px`,l.style.opacity=n(.8,t(.2,d/1e3));const r=document.createElement(\"div\");r.style.position=\"absolute\",r.style.top=\"0\",r.style.left=\"0\",r.style.background=\"black\",r.style.color=\"white\",r.style.padding=\"2px 5px\",r.style.fontSize=\"12px\",r.style.borderRadius=\"2px\",r.textContent=`z-index: ${d}`,l.appendChild(r),document.body.appendChild(l)}),X(`Visualized ${i.length} elements with z-index stacking order`))}function se(){const e=document.querySelectorAll(\"[id]\"),t={};e.forEach(e=>{const n=e.id;t[n]||(t[n]=[]),t[n].push(e)});const n=Object.entries(t).filter(([e,t])=>1<t.length);if(0===n.length)return void X(\"No duplicate IDs found on the page.\");let i=`%23 Duplicate ID Report\n\n`;i+=`Found ${n.length} duplicate IDs on the page.\n\n`,n.forEach(([e,t])=>{i+=`%23%23 ID: \"${e}\"\n\n`,i+=`- Occurrences: ${t.length}\n`,i+=`- Elements:\n`,t.forEach((t,n)=>{const d=t.tagName.toLowerCase(),l=u(t).replace(`%23${e}`,\"\");i+=`  ${n+1}. \`<${d}>\` at ${l}\n`}),i+=`\n`}),i+=`%23%23 Recommendation\n\n`,i+=`Duplicate IDs can cause JavaScript errors and accessibility issues. Each ID should be unique within the document.`,H(i,\"Duplicate ID Report\",\"markdown\")}function ce(){const e=Me.selectedElement||ke();return e%3Fvoid(Me.extractedMarkdown=Ce(e),X(`Content extracted! (${Me.extractedMarkdown.length} characters)`)):void X(\"No content container selected. Use \\"Select Content Container\\" first.\")}function ue(){J(),X(\"Select the container that contains the content you want to extract\")}function me(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26H(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function fe(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26we(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function he(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26(Q(Me.extractedMarkdown),X(\"Markdown copied to clipboard!\"))}function ge(){const e=Me.selectedElement||document.body;X(\"Analyzing DOM structure...\"),Me.analyzedStructure=x(e,5),H(Me.analyzedStructure,\"DOM Structure Analysis\",\"structure\")}function pe(){const e=Me.selectedElement%26%26\"FORM\"===Me.selectedElement.tagName%3FMe.selectedElement:document.querySelector(\"form\");if(!e)return void X(\"No form found on the page. Select a form first.\");const t=S(e);return t%3Fvoid H(t,\"Form Structure Analysis\",\"structure\"):void X(\"Failed to analyze the form structure.\")}function ye(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=u(e);let n=\"\";if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n=`.${e[0]}`)}}n||(n=e.tagName.toLowerCase());const i=Array.from(e.attributes).filter(e=>![\"id\",\"class\",\"style\"].includes(e.name)).map(e=>`[${e.name}=\"${e.value.replace(/\"/g,\"\\\\"\")}\"]`),d=be(e);let r=`%23 CSS Selectors for Selected Element\n\n`;r+=`%23%23 Element Info\n`,r+=`- Tag: \`${e.tagName.toLowerCase()}\`\n`,r+=`- ID: ${e.id%3F`\`${e.id}\``:\"None\"}\n`,r+=`- Classes: ${e.className%3F`\`${e.className}\``:\"None\"}\n\n`,r+=`%23%23 Selectors\n\n`,r+=`%23%23%23 Most Specific (Unique)\n`,r+=`\`\`\`css\n${t}\n\`\`\`\n\n`,r+=`%23%23%23 Shortest Viable Selector\n`,r+=`\`\`\`css\n${n}\n\`\`\`\n\n`,r+=`%23%23%23 Full CSS Path\n`,r+=`\`\`\`css\n${d}\n\`\`\`\n\n`,0<i.length%26%26(r+=`%23%23%23 Attribute Selectors\n`,i.forEach(e=>{r+=`\`\`\`css\n${e}\n\`\`\`\n`}),r+=`\n`),r+=`%23%23 JavaScript Code\n\n`,r+=`\`\`\`javascript\n`,r+=`const element = document.querySelector('${t}');\n\n`,e.id%26%26(r+=`const elementById = document.getElementById('${e.id}');\n\n`);const a=l(e);if(a){const e=a.split(/\s+/)[0];r+=`const elementsByClass = document.getElementsByClassName('${e}');\n\n`}r+=`const elementsByTag = document.getElementsByTagName('${e.tagName.toLowerCase()}');\n`,r+=`\`\`\`\n`,H(r,\"CSS Selectors\",\"markdown\")}function be(e){if(!(e instanceof Element))return\"\";if(e.id)return`%23${e.id}`;let t=\"\";for(;e!==document.body%26%26e.parentElement;){let n=e.tagName.toLowerCase();if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n+=`.${e.join(\".\")}`)}}const i=Array.from(e.parentElement.children).filter(t=>t.tagName===e.tagName);if(1<i.length){const t=i.indexOf(e)+1;n+=`:nth-of-type(${t})`}t=`${n}${t%3F\" > \"+t:\"\"}`,e=e.parentElement}return`body > ${t}`}function Ee(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement;let t=`%23 DOM Traversal Code Examples\n\n`;t+=`The following examples show different ways to traverse the DOM to access the selected element:\n\n`,t+=`%23%23 Direct Access\n\n`,t+=`\`\`\`javascript\n`,t+=e.id%3F`const element = document.getElementById('${e.id}');\n`:`const element = document.querySelector('${u(e)}');\n`,t+=`\`\`\`\n\n`,t+=`%23%23 Parent-Child Traversal\n\n`,t+=`\`\`\`javascript\n`,t+=b(e),t+=`\n\`\`\`\n\n`,(e.previousElementSibling||e.nextElementSibling)%26%26(t+=`%23%23 Sibling Traversal\n\n`,t+=`\`\`\`javascript\n`,e.previousElementSibling%26%26(t+=`const prevSibling = document.querySelector('${u(e.previousElementSibling)}');\n`,t+=`const element = prevSibling.nextElementSibling;\n\n`),e.nextElementSibling%26%26(t+=`const nextSibling = document.querySelector('${u(e.nextElementSibling)}');\n`,t+=`const element = nextSibling.previousElementSibling;\n`),t+=`\`\`\`\n\n`),H(t,\"DOM Traversal Examples\",\"markdown\")}function ve(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=y(e),n=v(e);let i=`%23 JavaScript Code for Element Interaction\n\n`;i+=`%23%23 Accessing the Element\n\n`,i+=`\`\`\`javascript\n`,i+=`const element = ${t.querySelector};\n`,t.byId%26%26(i+=`const elementById = ${t.byId};\n`),t.byClass%26%26(i+=`const elementByClass = ${t.byClass};\n`),t.traversal%26%26(i+=`const elementByTraversal = ${t.traversal};\n`),i+=`\`\`\`\n\n`,i+=`%23%23 Reading Element Properties\n\n`,i+=`\`\`\`javascript\n`,i+=`const text = element.textContent;\n`,i+=`const html = element.innerHTML;\n`,e.hasAttributes()%26%26Array.from(e.attributes).slice(0,3).forEach(e=>{i+=`const ${e.name.replace(/-/g,\"_\")} = element.getAttribute('${e.name}');\n`}),i+=`\`\`\`\n\n`,i+=`%23%23 Adding Event Listeners\n\n`,i+=`\`\`\`javascript\n`,i+=t.eventCode%3Ft.eventCode:`element.addEventListener('click', (event) => {\n  console.log('Element clicked');\n});\n`,i+=`\`\`\`\n\n`,i+=`%23%23 Modifying the Element\n\n`,i+=`\`\`\`javascript\n`,i+=n,i+=`\`\`\`\n`,H(i,\"Element Access Code\",\"markdown\")}function xe(t){const e=t.target.value.trim().toLowerCase(),n=document.getElementById(\"search-results\");if(!e)return void(n.style.display=\"none\");const i=Se(e);return 0===i.length%3F(d(n,\"<div style=\\"padding: 5px;\\">No results found</div>\"),void(n.style.display=\"block\")):void(d(n,i.map((e,t)=>{const n=e.tagName.toLowerCase(),i=e.id%3F`%23${e.id}`:\"\",d=l(e),r=d%3F`.${d.split(\" \")[0]}`:\"\";return`<div class=\"search-result-item\" data-result-index=\"${t}\">${n}${i}${r}</div>`}).join(\"\")),n.style.display=\"block\",document.querySelectorAll(\".search-result-item\").forEach(e=>{e.addEventListener(\"click\",()=>{const t=parseInt(e.dataset.resultIndex),d=i[t];d%26%26(ne(d),n.style.display=\"none\",document.getElementById(\"element-search\").value=\"\")})}),Me.elementSearchResults=i)}function Se(e){if(!e)return[];try{return Array.from(document.querySelectorAll(e)).slice(0,20)}catch(t){return[]}}function ke(){if(Me.selectedElement)return Me.selectedElement;const e=[\".content\",\".post-content\",\".article\",\".post\",\".entry-content\",\"article\",\"main\",\"[role=\\"main\\"]\",\"%23content\",\".markdown-body\",\".blog-post\",\".page-content\",\".container main\",\".main-content\"];for(const t of e){const e=document.querySelector(t);if(e%26%26200<e.textContent.trim().length)return e}return document.body}function Le(e){if(!e)return\"\";let t=e;try{t=decodeURIComponent(t.replace(/\+/g,\" \"))}catch(t){}const n=document.createElement(\"textarea\");return n.innerHTML=Te%3FTe.createHTML(t):t,t=n.value,t}function Ce(e){function t(e){if(!e)return\"\";if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.trim().replace(/\s+/g,\" \");return Le(t)}if(e.nodeType!==Node.ELEMENT_NODE)return\"\";const t=e.tagName.toLowerCase();if([\"script\",\"style\",\"noscript\",\"iframe\",\"svg\",\"nav\",\"header\",\"footer\"].includes(t))return\"\";if(\"ytd-transcript-segment-renderer\"===t||e.classList%26%26e.classList.contains(\"segment-timestamp\")||e.classList%26%26e.classList.contains(\"segment-text\")){const t=e.querySelector(\".segment-timestamp\"),n=e.querySelector(\".segment-text\");if(t%26%26n){const e=Le(t.textContent.trim()),i=Le(n.textContent.trim());return`${e} ${i}\n`}}const d=window.getComputedStyle(e),l=\"block\"===d.display||\"flex\"===d.display||\"grid\"===d.display||\"list-item\"===d.display;switch(t){case\"h1\":return`%23 ${n(e).trim()}\n\n`;case\"h2\":return`%23%23 ${n(e).trim()}\n\n`;case\"h3\":return`%23%23%23 ${n(e).trim()}\n\n`;case\"h4\":return`%23%23%23%23 ${n(e).trim()}\n\n`;case\"h5\":return`%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"h6\":return`%23%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"p\":case\"div\":const t=n(e).trim();return t%3Fl%3F`${t}\n\n`:t+\" \":\"\";case\"br\":return\"\n\";case\"ul\":return i(e,\"*\")+\"\n\";case\"ol\":return i(e,\"1.\")+\"\n\";case\"li\":return n(e).trim()+\"\n\";case\"a\":const d=Le(e.getAttribute(\"href\")||\"\");return`[${n(e).trim()}](${d})`;case\"img\":const r=Le(e.getAttribute(\"src\")||\"\"),a=Le(e.getAttribute(\"alt\")||\"\");return`![${a}](${r})\n\n`;case\"code\":case\"pre\":return`\`${n(e).trim()}\``;case\"blockquote\":return`> ${n(e).trim()}\n\n`;case\"strong\":case\"b\":return`**${n(e)}**`;case\"em\":case\"i\":return`*${n(e)}*`;case\"span\":return n(e);default:const o=n(e).trim();return o%3Fl%3F`${o}\n\n`:o+\" \":\"\";}}function n(e){let n=\"\";return e.childNodes.forEach(e=>{n+=t(e)}),n}function i(e,t){let i=\"\";const d=e.querySelectorAll(\":scope > li\");return d.forEach((e,d)=>{const l=\"1.\"===t%3F`${d+1}. `:`${t} `;i+=`${l}${n(e).trim()}\n`}),i}if(!e)return\"\";let d=\"\";return d=t(e),d.replace(/\n{3,}/g,\"\n\n\").trim()}function we(e,t,n){let i=document.title.replace(/[^a-z0-9]/gi,\"-\").toLowerCase()||\"content\",d=\".txt\",l=\"text/plain\";\"markdown\"===n%3F(d=\".md\",l=\"text/markdown\"):(\"json\"==n||\"structure\"==n)%26%26(d=\".json\",l=\"application/json\",e=JSON.stringify(e,null,2));const r=new Blob([e],{type:l}),o=URL.createObjectURL(r),s=document.createElement(\"a\");s.href=Te%3FTe.createScriptURL(o):o,s.download=`${i}${d}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}function Ne(){const e={pageInfo:{title:document.title,url:window.location.href},frameworks:Me.framework,selectedElement:Me.selectedElement%3Fu(Me.selectedElement):null};we(e,\"analysis-report\",\"json\")}function Ie(){const e=document.getElementById(\"html-analyzer-tool\");e%26%26e.remove(),D(),de(),document.querySelectorAll(\".element-highlight, .event-highlight, .accessibility-highlight, .z-index-highlighter\").forEach(e=>e.remove());const t=document.querySelector(\"style[data-analyzer-tool]\");t%26%26t.remove()}function Ae(e,t=50,n=100){function i(){document.body%3Fe():d<t%3F(d++,setTimeout(i,n)):console.error(\"Failed to initialize: document.body not available after retries\")}let d=0;i()}function qe(){i()||(console.error(\"Failed to append styles, retrying...\"),setTimeout(()=>i(),100)),Ae(()=>{try{L(),setTimeout(()=>{X(\"HTML Structure Analyzer ready! Click \\"Select Element\\" to begin inspection.\",3e3)},500)}catch(t){console.error(\"Failed to initialize tool:\",t)}})}const Be=document.createElement(\"style\");Be.textContent=`      :root {        --bg-color: %231a1a1a;        --text-color: %23e0e0e0;        --border-color: %23404040;        --button-bg: %232d2d2d;        --button-hover: %233d3d3d;        --primary-bg: %234a90e2;        --primary-hover: %233b7dd8;        --secondary-bg: %236c757d;        --secondary-hover: %235a6268;        --success-bg: %2328a745;        --success-hover: %23218838;        --danger-bg: %23e25c5c;        --danger-hover: %23d44b4b;        --warning-bg: %23ffc107;        --warning-hover: %23e0a800;        --info-bg: %2317a2b8;        --info-hover: %23138496;        --preview-bg: %232d2d2d;        --preview-header-bg: %231a1a1a;        --preview-border: %23404040;        --highlight-border: rgba(255, 87, 34, 0.8);        --highlight-bg: rgba(255, 87, 34, 0.2);        --tab-active-bg: %233d3d3d;        --z-index-highlight: rgba(0, 255, 0, 0.4);      }            %23html-analyzer-tool {        position: fixed;        top: 20px;        right: 20px;        background: var(--bg-color);        border: 1px solid var(--border-color);        border-radius: 8px;        padding: 15px;        width: 400px;        height: calc(100vh - 40px);        overflow-y: auto;        box-shadow: 0 2px 10px rgba(0,0,0,0.2);        z-index: 9999;        font-family: Arial, sans-serif;        color: var(--text-color);        resize: both;        overflow: auto;        min-width: 250px;        min-height: 200px;      }            %23html-analyzer-tool h3 {        margin-top: 0;        margin-bottom: 15px;        font-size: 16px;        color: var(--text-color);        cursor: move;        user-select: none;      }            %23html-analyzer-tool button {        display: block;        width: 100%25;        padding: 8px;        margin-bottom: 8px;        background: var(--button-bg);        border: 1px solid var(--border-color);        border-radius: 4px;        cursor: pointer;        font-size: 14px;        transition: background 0.2s;        color: var(--text-color);      }            %23html-analyzer-tool button:hover {        background: var(--button-hover);      }            %23html-analyzer-tool button.primary {        background: var(--primary-bg);        color: white;        border: 1px solid var(--primary-hover);      }            %23html-analyzer-tool button.primary:hover {        background: var(--primary-hover);      }            %23html-analyzer-tool button.secondary {        background: var(--secondary-bg);        color: white;        border: 1px solid var(--secondary-hover);      }            %23html-analyzer-tool button.secondary:hover {        background: var(--secondary-hover);      }            %23html-analyzer-tool button.success {        background: var(--success-bg);        color: white;        border: 1px solid var(--success-hover);      }            %23html-analyzer-tool button.success:hover {        background: var(--success-hover);      }            %23html-analyzer-tool button.danger {        background: var(--danger-bg);        color: white;        border: 1px solid var(--danger-hover);      }            %23html-analyzer-tool button.danger:hover {        background: var(--danger-hover);      }            %23html-analyzer-tool button.warning {        background: var(--warning-bg);        color: black;        border: 1px solid var(--warning-hover);      }            %23html-analyzer-tool button.warning:hover {        background: var(--warning-hover);      }            %23html-analyzer-tool button.info {        background: var(--info-bg);        color: white;        border: 1px solid var(--info-hover);      }            %23html-analyzer-tool button.info:hover {        background: var(--info-hover);      }            %23html-analyzer-tool .button-group {        display: flex;        gap: 5px;        margin-bottom: 8px;      }            %23html-analyzer-tool .button-group button {        margin-bottom: 0;      }            %23html-analyzer-tool .tab-container {        margin-top: 10px;      }            %23html-analyzer-tool .tab-buttons {        display: flex;        border-bottom: 1px solid var(--border-color);        margin-bottom: 10px;      }            %23html-analyzer-tool .tab-button {        padding: 8px 12px;        border: none;        background: none;        cursor: pointer;        border-radius: 4px 4px 0 0;        margin-right: 2px;        margin-bottom: 0;      }            %23html-analyzer-tool .tab-button.active {        background: var(--tab-active-bg);        border: 1px solid var(--border-color);        border-bottom: none;      }            %23html-analyzer-tool .tab-content {        display: none;      }            %23html-analyzer-tool .tab-content.active {        display: block;      }            %23preview-overlay {        position: fixed;        top: 0;        left: 0;        right: 0;        bottom: 0;        background: rgba(0,0,0,0.7);        z-index: 10000;        display: flex;        justify-content: center;        align-items: center;      }            %23preview-container {        width: 80%25;        height: 80%25;        background: var(--preview-bg);        border-radius: 8px;        display: flex;        flex-direction: column;        overflow: hidden;        resize: both;      }            %23preview-header {        display: flex;        justify-content: space-between;        align-items: center;        padding: 10px 15px;        background: var(--preview-header-bg);        border-bottom: 1px solid var(--preview-border);      }            %23preview-content {        flex-grow: 1;        padding: 15px;        overflow-y: auto;        white-space: pre-wrap;        font-family: monospace;        font-size: 13px;        line-height: 1.4;        color: var(--text-color);      }            %23preview-tabs {        display: flex;        background: var(--preview-header-bg);        border-bottom: 1px solid var(--preview-border);      }            %23preview-tabs button {        padding: 8px 15px;        border: none;        background: none;        cursor: pointer;      }            %23preview-tabs button.active {        background: var(--preview-bg);        border-bottom: 2px solid var(--primary-bg);      }            %23preview-actions {        padding: 10px 15px;        background: var(--preview-header-bg);        border-top: 1px solid var(--preview-border);        display: flex;        justify-content: flex-end;      }            %23preview-actions button {        padding: 8px 15px;        margin-left: 10px;        border-radius: 4px;        cursor: pointer;      }      .element-highlight {        outline: 2px solid var(--highlight-border) !important;        background-color: var(--highlight-bg) !important;        position: relative;      }            .element-label {        position: absolute;        top: 0;        left: 0;        background: var(--primary-bg);        color: white;        font-size: 12px;        padding: 2px 5px;        border-radius: 2px;        z-index: 10001;        pointer-events: none;      }            .z-index-highlighter {        position: absolute;        background: var(--z-index-highlight);        pointer-events: none;        z-index: 10001;      }            .tooltip {        position: fixed;        background: var(--bg-color);        border: 1px solid var(--border-color);        padding: 8px;        border-radius: 4px;        font-size: 12px;        max-width: 300px;        z-index: 10002;        box-shadow: 0 2px 8px rgba(0,0,0,0.2);      }            .tooltip pre {        margin: 0;        white-space: pre-wrap;        font-family: monospace;        font-size: 11px;      }            .accessibility-highlight {        outline: 2px dashed %239c27b0 !important;      }            .event-highlight {        outline: 2px dashed %23ff9800 !important;      }            .breadcrumb-trail {        display: flex;        flex-wrap: wrap;        padding: 5px;        margin-bottom: 10px;        background: var(--button-bg);        border-radius: 4px;        font-size: 12px;      }            .breadcrumb-item {        margin-right: 5px;        cursor: pointer;        color: var(--primary-bg);      }            .breadcrumb-item:not(:last-child)::after {        content: \">\";        margin-left: 5px;        color: var(--text-color);      }            .breadcrumb-item:hover {        text-decoration: underline;      }            .element-tree {        font-family: monospace;        font-size: 12px;        line-height: 1.5;      }            .tree-item {        padding-left: 15px;        border-left: 1px dotted var(--border-color);        margin-left: 5px;        margin-bottom: 3px;      }            .tree-item-label {        cursor: pointer;      }            .tree-item-label:hover {        text-decoration: underline;        color: var(--primary-bg);      }            .tree-toggler {        display: inline-block;        width: 16px;        text-align: center;        cursor: pointer;      }            .property-list {        border: 1px solid var(--border-color);        border-radius: 4px;        margin-top: 10px;        margin-bottom: 10px;        max-height: 200px;        overflow-y: auto;      }            .property-item {        display: flex;        padding: 5px;        border-bottom: 1px solid var(--border-color);      }            .property-name {        font-weight: bold;        width: 30%25;      }            .property-value {        width: 70%25;        word-break: break-word;      }            .search-container {        margin-bottom: 10px;      }            .search-input {        width: 100%25;        padding: 8px;        border: 1px solid var(--border-color);        border-radius: 4px;        background: var(--bg-color);        color: var(--text-color);      }            .search-results {        margin-top: 5px;        max-height: 150px;        overflow-y: auto;        border: 1px solid var(--border-color);        border-radius: 4px;        padding: 5px;      }            .search-result-item {        padding: 3px;        cursor: pointer;        border-bottom: 1px solid var(--border-color);      }            .search-result-item:hover {        background: var(--button-hover);      }            .code-snippet {        background: %23f5f5f5;        border: 1px solid %23ddd;        border-radius: 4px;        padding: 10px;        margin: 10px 0;        font-family: monospace;        white-space: pre-wrap;        overflow-x: auto;      }            [data-theme=\"dark\"] .code-snippet {        background: %232d2d2d;        border-color: %23444;      }            .inspector-section {        margin-bottom: 15px;        border-bottom: 1px solid var(--border-color);        padding-bottom: 10px;      }            .inspector-section-title {        font-weight: bold;        margin-bottom: 5px;      }            .badge {        display: inline-block;        padding: 2px 6px;        border-radius: 10px;        font-size: 11px;        margin-right: 5px;        margin-bottom: 5px;        color: white;      }            .badge-primary { background: var(--primary-bg); }      .badge-secondary { background: var(--secondary-bg); }      .badge-success { background: var(--success-bg); }      .badge-danger { background: var(--danger-bg); }      .badge-warning { background: var(--warning-bg); color: black; }      .badge-info { background: var(--info-bg); }    `;let Te=null;if(window.trustedTypes%26%26trustedTypes.createPolicy)try{Te=trustedTypes.createPolicy(\"html-analyzer-tool\",{createHTML:e=>e,createScriptURL:e=>e,createScript:e=>e})}catch(t){console.warn(\"Failed to create Trusted Types policy:\",t)}let Me={selectedElement:null,hoveredElement:null,extractedMarkdown:\"\",inspectedElements:[],breadcrumbTrail:[],highlightedElements:[],eventListeners:{},analyzedStructure:null,framework:r(),visualMode:\"normal\",activeTab:\"inspector\",previewActiveTab:\"markdown\",isInspecting:!1,isResizing:!1,isMoving:!1,moveOffset:{x:0,y:0},elementSearchResults:[],inspectionHistory:[]};return\"loading\"===document.readyState%3Fdocument.addEventListener(\"DOMContentLoaded\",qe):qe(),{selectElement:ne,highlightElement:ie,generateUniqueSelector:u,findEventListeners:f,analyzeDOM:x,close:Ie}})()}();"
  },
  {
    "name": "Extract JSONs",
    "description": "Scans the page for JSON objects and arrays, extracts them, and allows copying or downloading",
    "file": "ExtractJsons.js",
    "icon": "ðŸ“‹",
    "code": "javascript:(function()%7Bjavascript%3A(function() %7B%0A  %2F%2F --- Configuration ---%0A  const SIDEBAR_ID %3D 'json-extractor-sidebar-v3'%3B%0A  const SIDEBAR_WIDTH %3D '380px'%3B%0A  const HIGHLIGHT_CLASS %3D 'json-extractor-rainbow-highlight'%3B%0A  const NOTIFICATION_TIMEOUT %3D 2500%3B%0A%0A  %2F%2F --- Check if sidebar already exists ---%0A  if (document.getElementById(SIDEBAR_ID)) %7B%0A    document.getElementById(SIDEBAR_ID).remove()%3B%0A    document.body.style.marginRight %3D ''%3B%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> el.classList.remove(HIGHLIGHT_CLASS))%3B%0A    const existingStyle %3D document.querySelector('%23json-extractor-styles')%3B%0A    if (existingStyle) existingStyle.remove()%3B%0A    const existingBadge %3D document.getElementById('json-extractor-badge')%3B%0A    if (existingBadge) existingBadge.remove()%3B%0A    return%3B%0A  %7D%0A%0A  %2F%2F --- State Variables ---%0A  let isSelecting %3D false%3B%0A  let capturedData %3D %5B%5D%3B%0A  let originalCursor %3D document.body.style.cursor%3B%0A  let highlightedElement %3D null%3B%0A  let mouseMoveThrottle %3D null%3B%0A%0A  %2F%2F --- Inject CSS for Rainbow Highlight and Notifications ---%0A  const styleElement %3D document.createElement('style')%3B%0A  styleElement.id %3D 'json-extractor-styles'%3B%0A  styleElement.textContent %3D %60%0A    %40keyframes rainbow-glow-animation %7B%0A      0%25 %7B %0A        outline-color%3A hsl(0%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(0%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(0%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(0%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      17%25 %7B %0A        outline-color%3A hsl(60%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(60%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(60%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(60%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      33%25 %7B %0A        outline-color%3A hsl(120%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(120%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(120%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(120%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      50%25 %7B %0A        outline-color%3A hsl(180%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(180%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(180%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(180%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      67%25 %7B %0A        outline-color%3A hsl(240%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(240%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(240%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(240%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      83%25 %7B %0A        outline-color%3A hsl(300%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(300%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(300%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(300%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      100%25 %7B %0A        outline-color%3A hsl(360%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(360%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(360%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(360%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D %7B%0A      outline%3A 3px solid hsl(0%2C 100%25%2C 65%25) !important%3B%0A      outline-offset%3A 2px !important%3B%0A      animation%3A rainbow-glow-animation 2.5s linear infinite !important%3B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.05) !important%3B%0A      cursor%3A crosshair !important%3B%0A      position%3A relative !important%3B %0A      z-index%3A 999998 !important%3B %0A      transition%3A all 0.2s ease-in-out !important%3B%0A      pointer-events%3A auto !important%3B%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D%3Ahover %7B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.1) !important%3B%0A    %7D%0A    %23json-extractor-notification %7B%0A      position%3A fixed%3B%0A      top%3A 20px%3B%0A      left%3A 50%25%3B%0A      transform%3A translateX(-50%25)%3B%0A      background-color%3A %23333%3B%0A      color%3A white%3B%0A      padding%3A 12px 25px%3B%0A      border-radius%3A 8px%3B%0A      z-index%3A 1000001%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      font-size%3A 14px%3B%0A      box-shadow%3A 0 5px 15px rgba(0%2C0%2C0%2C0.3)%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.3s ease-in-out%2C top 0.3s ease-in-out%3B%0A      pointer-events%3A none%3B%0A    %7D%0A    %23json-extractor-notification.show %7B%0A      opacity%3A 1%3B%0A      top%3A 30px%3B%0A    %7D%0A    %23json-extractor-notification.success %7B%0A      background-color%3A %234CAF50%3B%0A    %7D%0A    %23json-extractor-notification.error %7B%0A      background-color%3A %23F44336%3B%0A    %7D%0A    %23json-extractor-notification.info %7B%0A      background-color%3A %232196F3%3B%0A    %7D%0A    %23json-extractor-badge %7B%0A      position%3A fixed%3B%0A      background%3A rgba(0%2C 0%2C 0%2C 0.8)%3B%0A      color%3A white%3B%0A      padding%3A 4px 8px%3B%0A      border-radius%3A 12px%3B%0A      font-size%3A 11px%3B%0A      font-weight%3A 600%3B%0A      z-index%3A 1000002%3B%0A      pointer-events%3A none%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.2s ease-in-out%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      white-space%3A nowrap%3B%0A      box-shadow%3A 0 2px 8px rgba(0%2C0%2C0%2C0.3)%3B%0A    %7D%0A    %23json-extractor-badge.show %7B%0A      opacity%3A 1%3B%0A    %7D%0A  %60%3B%0A  document.head.appendChild(styleElement)%3B%0A%0A  %2F%2F --- Create Sidebar ---%0A  const sidebar %3D document.createElement('div')%3B%0A  sidebar.id %3D SIDEBAR_ID%3B%0A  sidebar.style.cssText %3D %60%0A    position%3A fixed%3B%0A    top%3A 0%3B%0A    right%3A 0%3B%0A    width%3A %24%7BSIDEBAR_WIDTH%7D%3B%0A    height%3A 100vh%3B%0A    background%3A %23282c34%3B%0A    color%3A %23abb2bf%3B%0A    z-index%3A 999999%3B%0A    font-family%3A 'Inter'%2C 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A    font-size%3A 14px%3B%0A    overflow-y%3A auto%3B%0A    box-shadow%3A -8px 0 25px rgba(0%2C0%2C0%2C0.5)%3B%0A    border-left%3A 4px solid %2361afef%3B%0A    pointer-events%3A auto%3B%0A    display%3A flex%3B%0A    flex-direction%3A column%3B%0A    transition%3A transform 0.3s ease-in-out%3B%0A  %60%3B%0A%0A  %2F%2F --- Create Sidebar Content ---%0A  sidebar.innerHTML %3D %60%0A    <div style%3D\"padding%3A 25px%3B border-bottom%3A 1px solid %233b4048%3B\">%0A      <h3 style%3D\"margin%3A 0 0 20px 0%3B color%3A %2361afef%3B font-size%3A 20px%3B font-weight%3A 600%3B\">%0A        <svg xmlns%3D\"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\" viewBox%3D\"0 0 24 24\" fill%3D\"currentColor\" style%3D\"width%3A24px%3B height%3A24px%3B vertical-align%3Amiddle%3B margin-right%3A8px%3B\">%0A          <path d%3D\"M12 2.5a.75.75 0 0 1 .75.75v2.518l4.08 2.04a.75.75 0 0 1-.03 1.33l-4.3 2.15a.75.75 0 0 1-.5 0l-4.3-2.15a.75.75 0 0 1-.03-1.33L11.25 5.768V3.25a.75.75 0 0 1 .75-.75ZM11.25 13.617v2.633a.75.75 0 0 0 .5.715l4.3 2.15a.75.75 0 0 0 .97-.031.75.75 0 0 0 .03-.97l-4.08-2.04a.75.75 0 0 0-.72-.017Zm1.5 0-.72.017a.75.75 0 0 1-.72-.017L7.23 11.58a.75.75 0 0 0 .03.97.75.75 0 0 0 .97.03l4.3-2.15a.75.75 0 0 0 .5-.715v-2.633Z\" %2F>%0A          <path fill-rule%3D\"evenodd\" d%3D\"M22.5 12c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5c1.836 0 3.562.462 5.074 1.286a.75.75 0 0 1-.6 1.372A9.004 9.004 0 0 0 12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9h-2.25a.75.75 0 0 1 0-1.5H22.5Z\" clip-rule%3D\"evenodd\" %2F>%0A        <%2Fsvg>%0A        JSON Data Extractor%0A      <%2Fh3>%0A      <div style%3D\"display%3A grid%3B grid-template-columns%3A 1fr 1fr%3B gap%3A 12px%3B\">%0A        <button id%3D\"start-selection-btn\" class%3D\"sidebar-btn primary\">ðŸŽ¯ Start Selecting<%2Fbutton>%0A        <button id%3D\"clear-data-btn\" class%3D\"sidebar-btn danger\">ðŸ—‘%EF%B8%8F Clear All<%2Fbutton>%0A        <button id%3D\"copy-json-btn\" class%3D\"sidebar-btn info\">ðŸ“‹ Copy JSON<%2Fbutton>%0A        <button id%3D\"copy-items-btn\" class%3D\"sidebar-btn info\">ðŸ“„ Copy Items<%2Fbutton>%0A        <button id%3D\"export-json-btn\" class%3D\"sidebar-btn success\">ðŸ’¾ Download JSON<%2Fbutton>%0A      <%2Fdiv>%0A      <button id%3D\"close-sidebar-btn\" class%3D\"sidebar-btn secondary\" style%3D\"width%3A100%25%3B margin-top%3A12px%3B\">âŒ Close Extractor<%2Fbutton>%0A      <div id%3D\"selection-status-msg\" style%3D\"margin-top%3A 15px%3B padding%3A 10px%3B background%3A %233b4048%3B border-radius%3A 6px%3B font-size%3A 13px%3B display%3A none%3B text-align%3A center%3B\">%0A        Click an element to capture data. Press <kbd style%3D\"background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B\">ESC<%2Fkbd> to stop.%0A      <%2Fdiv>%0A    <%2Fdiv>%0A%0A    <div style%3D\"padding%3A 20px%3B flex-grow%3A 1%3B display%3A flex%3B flex-direction%3A column%3B min-height%3A 0%3B\">%0A      <div style%3D\"margin-bottom%3A 15px%3B\">%0A        <label for%3D\"extraction-mode-select\" style%3D\"display%3A block%3B margin-bottom%3A 8px%3B font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Extraction Mode%3A<%2Flabel>%0A        <select id%3D\"extraction-mode-select\" class%3D\"sidebar-select\">%0A          <option value%3D\"partialJSON\" selected>Best-Effort JSON Parts<%2Foption>%0A          <option value%3D\"textContent\">Text Content<%2Foption>%0A          <option value%3D\"innerHTML\">Inner HTML<%2Foption>%0A          <option value%3D\"attributes\">All Attributes<%2Foption>%0A          <option value%3D\"dataset\">Data Attributes (data-*)<%2Foption>%0A          <option value%3D\"computed\">Key Computed Styles<%2Foption>%0A          <option value%3D\"custom\">Attempt Custom JSON<%2Foption>%0A        <%2Fselect>%0A      <%2Fdiv>%0A      <div style%3D\"display%3A flex%3B justify-content%3A space-between%3B align-items%3A center%3B margin-bottom%3A 10px%3B\">%0A        <span style%3D\"font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Captured Items%3A <span id%3D\"item-count-display\">0<%2Fspan><%2Fspan>%0A        <span style%3D\"font-size%3A 12px%3B color%3A %239da5b4%3B\">Size%3A <span id%3D\"data-size-display\">0 KB<%2Fspan><%2Fspan>%0A      <%2Fdiv>%0A      <div style%3D\"background%3A %2321252b%3B border-radius%3A 6px%3B padding%3A 15px%3B flex-grow%3A 1%3B overflow-y%3A auto%3B border%3A 1px solid %233b4048%3B min-height%3A 150px%3B\">%0A        <pre id%3D\"json-output-display\" style%3D\"margin%3A 0%3B font-family%3A 'Fira Code'%2C 'Courier New'%2C monospace%3B font-size%3A 12.5px%3B white-space%3A pre-wrap%3B word-break%3A break-all%3B color%3A %23d19a66%3B\">No data captured yet...<%2Fpre>%0A      <%2Fdiv>%0A    <%2Fdiv>%0A    <style>%0A      .sidebar-btn %7B background%3A %234b5263%3B color%3A %23d4d7dd%3B border%3A none%3B padding%3A 10px 15px%3B border-radius%3A 6px%3B cursor%3A pointer%3B font-size%3A 13px%3B font-weight%3A 500%3B transition%3A background-color 0.2s%2C transform 0.1s%3B text-align%3A center%3B %7D%0A      .sidebar-btn%3Ahover %7B background%3A %235c6370%3B %7D%0A      .sidebar-btn%3Aactive %7B transform%3A scale(0.98)%3B %7D%0A      .sidebar-btn.primary %7B background%3A %2361afef%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.primary%3Ahover %7B background%3A %23529bda%3B %7D%0A      .sidebar-btn.danger %7B background%3A %23e06c75%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.danger%3Ahover %7B background%3A %23c95f69%3B %7D%0A      .sidebar-btn.info %7B background%3A %2356b6c2%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.info%3Ahover %7B background%3A %234aa7b3%3B %7D%0A      .sidebar-btn.success %7B background%3A %2398c379%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.success%3Ahover %7B background%3A %2389b16c%3B %7D%0A      .sidebar-btn.secondary %7B background%3A %233b4048%3B color%3A %23abb2bf%3B %7D%0A      .sidebar-btn.secondary%3Ahover %7B background%3A %23454c58%3B %7D%0A      .sidebar-select %7B width%3A 100%25%3B padding%3A 10px%3B border-radius%3A 6px%3B background%3A %233b4048%3B color%3A %23abb2bf%3B border%3A 1px solid %23454c58%3B font-size%3A 13px%3B %7D%0A      %23%24%7BSIDEBAR_ID%7D kbd %7B background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B border%3A 1px solid %237d8590%3B box-shadow%3A 1px 1px 1px rgba(0%2C0%2C0%2C0.2)%3B %7D%0A    <%2Fstyle>%0A  %60%3B%0A  document.body.appendChild(sidebar)%3B%0A  document.body.style.marginRight %3D SIDEBAR_WIDTH%3B%0A%0A  %2F%2F --- Helper Functions ---%0A  function showNotification(message%2C type %3D 'info'%2C duration %3D NOTIFICATION_TIMEOUT) %7B%0A    let notification %3D document.getElementById('json-extractor-notification')%3B%0A    if (!notification) %7B%0A      notification %3D document.createElement('div')%3B%0A      notification.id %3D 'json-extractor-notification'%3B%0A      document.body.appendChild(notification)%3B%0A    %7D%0A    notification.textContent %3D message%3B%0A    notification.className %3D %60show %24%7Btype%7D%60%3B %0A    setTimeout(() %3D> %7B%0A      notification.className %3D notification.className.replace('show'%2C '').trim()%3B%0A    %7D%2C duration)%3B%0A  %7D%0A%0A  function createBadge() %7B%0A    let badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (!badge) %7B%0A      badge %3D document.createElement('div')%3B%0A      badge.id %3D 'json-extractor-badge'%3B%0A      document.body.appendChild(badge)%3B%0A    %7D%0A    return badge%3B%0A  %7D%0A%0A  function countJsonComponents(element%2C mode) %7B%0A    if (!element) return 0%3B%0A    %0A    try %7B%0A      const rawText %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A      %0A      %2F%2F Skip counting for very large text to prevent hanging%0A      if (rawText.length > 50000) return 0%3B%0A      %0A      switch (mode) %7B%0A        case 'textContent'%3A%0A        case 'innerHTML'%3A%0A        case 'attributes'%3A%0A        case 'dataset'%3A%0A        case 'computed'%3A%0A          return 1%3B %2F%2F These modes always return 1 object%0A          %0A        case 'custom'%3A%0A          try %7B%0A            JSON.parse(rawText)%3B%0A            return 1%3B%0A          %7D catch (e) %7B%0A            let count %3D 0%3B%0A            for (let attr of element.attributes) %7B%0A              if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A                try %7B%0A                  JSON.parse(attr.value)%3B%0A                  count%2B%2B%3B%0A                %7D catch (e2) %7B%0A                  %2F%2F Invalid JSON%2C don't count%0A                %7D%0A              %7D%0A            %7D%0A            return count%3B%0A          %7D%0A          %0A        case 'partialJSON'%3A%0A          %2F%2F Simplified counting to avoid hanging - just count likely JSON objects%0A          try %7B%0A            const parsedOuter %3D JSON.parse(rawText)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A              %2F%2F Just return 1 for input%2Foutput structure to avoid complex parsing during hover%0A              return 1%3B%0A            %7D%0A          %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to simple greedy count%0A          %7D%0A          %0A          %2F%2F Simple count of JSON-like structures without full parsing%0A          const jsonObjects %3D (rawText.match(%2F%5C%7B%5B%5E%7B%7D%5D*%5C%7D%2Fg) %7C%7C %5B%5D).length%3B%0A          const jsonArrays %3D (rawText.match(%2F%5C%5B%5B%5E%5C%5B%5C%5D%5D*%5C%5D%2Fg) %7C%7C %5B%5D).length%3B%0A          return jsonObjects %2B jsonArrays%3B%0A          %0A        default%3A%0A          return 0%3B%0A      %7D%0A    %7D catch (e) %7B%0A      return 0%3B%0A    %7D%0A  %7D%0A%0A  function showBadge(count%2C x%2C y) %7B%0A    const badge %3D createBadge()%3B%0A    if (count > 0) %7B%0A      badge.textContent %3D %60%24%7Bcount%7D JSON%24%7Bcount %3D%3D%3D 1 %3F '' %3A 's'%7D%60%3B%0A      badge.style.left %3D (x %2B 15) %2B 'px'%3B%0A      badge.style.top %3D (y - 25) %2B 'px'%3B%0A      badge.classList.add('show')%3B%0A    %7D else %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  function hideBadge() %7B%0A    const badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (badge) %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Modern clipboard copy function%0A  async function copyToClipboard(text) %7B%0A    try %7B%0A      if (navigator.clipboard %26%26 window.isSecureContext) %7B%0A        await navigator.clipboard.writeText(text)%3B%0A        return true%3B%0A      %7D else %7B%0A        %2F%2F Fallback for older browsers or non-secure contexts%0A        const textarea %3D document.createElement('textarea')%3B%0A        textarea.value %3D text%3B%0A        textarea.style.position %3D 'fixed'%3B%0A        textarea.style.left %3D '-999999px'%3B%0A        textarea.style.top %3D '-999999px'%3B%0A        document.body.appendChild(textarea)%3B%0A        textarea.focus()%3B%0A        textarea.select()%3B%0A        const result %3D document.execCommand('copy')%3B%0A        document.body.removeChild(textarea)%3B%0A        return result%3B%0A      %7D%0A    %7D catch (err) %7B%0A      console.error('Copy failed%3A'%2C err)%3B%0A      return false%3B%0A    %7D%0A  %7D%0A%0A  function repairJsonStringLiterals(jsonString) %7B%0A    let repaired %3D ''%3B%0A    let inString %3D false%3B%0A    let escapeNext %3D false%3B%0A%0A    for (let i %3D 0%3B i < jsonString.length%3B i%2B%2B) %7B%0A        const char %3D jsonString%5Bi%5D%3B%0A        if (escapeNext) %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D false%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '%5C%5C') %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D true%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '\"') %7B%0A            inString %3D !inString%3B%0A            repaired %2B%3D char%3B%0A            continue%3B%0A        %7D%0A        if (inString) %7B%0A            if (char %3D%3D%3D '%5Cn') repaired %2B%3D '%5C%5Cn'%3B%0A            else if (char %3D%3D%3D '%5Cr') repaired %2B%3D '%5C%5Cr'%3B%0A            else if (char %3D%3D%3D '%5Ct') repaired %2B%3D '%5C%5Ct'%3B%0A            else repaired %2B%3D char%3B%0A        %7D else %7B%0A            repaired %2B%3D char%3B%0A        %7D%0A    %7D%0A    return repaired%3B%0A  %7D%0A%0A  function flattenUnnecessaryArrays(data) %7B%0A    %2F%2F Simple single-level flatten to avoid infinite loops%0A    %2F%2F Only flatten if it's an array with exactly 1 element that is also an array%0A    if (Array.isArray(data) %26%26 data.length %3D%3D%3D 1 %26%26 Array.isArray(data%5B0%5D)) %7B%0A      return data%5B0%5D%3B%0A    %7D%0A    return data%3B%0A  %7D%0A%0A  function extractGreedyJson(text) %7B%0A    const results %3D %5B%5D%3B%0A    let remainingText %3D text.trim()%3B%0A    %0A    while (remainingText.length > 0) %7B%0A        let foundThisIteration %3D false%3B%0A        let firstJsonCharIndex %3D -1%3B%0A%0A        for (let i %3D 0%3B i < remainingText.length%3B i%2B%2B) %7B%0A            if (remainingText%5Bi%5D %3D%3D%3D '%7B' %7C%7C remainingText%5Bi%5D %3D%3D%3D '%5B') %7B%0A                firstJsonCharIndex %3D i%3B%0A                break%3B%0A            %7D%0A        %7D%0A%0A        if (firstJsonCharIndex %3D%3D%3D -1) break%3B %0A%0A        const textToParse %3D remainingText.substring(firstJsonCharIndex)%3B%0A%0A        for (let i %3D 1%3B i <%3D textToParse.length%3B i%2B%2B) %7B%0A            const segment %3D textToParse.substring(0%2C i)%3B%0A            %0A            if ((segment.startsWith('%7B') %26%26 segment.endsWith('%7D')) %7C%7C (segment.startsWith('%5B') %26%26 segment.endsWith('%5D'))) %7B%0A                try %7B%0A                    JSON.parse(segment)%3B%0A                    results.push(segment)%3B%0A                    remainingText %3D textToParse.substring(i)%3B %0A                    foundThisIteration %3D true%3B%0A                    break%3B %0A                %7D catch (e) %7B%0A                    try %7B%0A                        const repairedSegment %3D repairJsonStringLiterals(segment)%3B%0A                        if (repairedSegment !%3D%3D segment) %7B%0A                            JSON.parse(repairedSegment)%3B%0A                            results.push(repairedSegment)%3B%0A                            remainingText %3D textToParse.substring(i)%3B%0A                            foundThisIteration %3D true%3B%0A                            break%3B %0A                        %7D%0A                    %7D catch (e2) %7B%0A                        %2F%2F Continue extending segment%0A                    %7D%0A                %7D%0A            %7D%0A        %7D%0A        %0A        if (!foundThisIteration) %7B%0A            remainingText %3D remainingText.substring(firstJsonCharIndex %2B 1)%3B%0A        %7D%0A    %7D%0A    return results%3B%0A  %7D%0A%0A  function extractJSON(element%2C mode) %7B%0A    const timestamp %3D new Date().toISOString()%3B%0A    const commonData %3D %7B%0A        selector%3A getSelector(element)%2C%0A        tag%3A element.tagName.toLowerCase()%2C%0A        timestamp%3A timestamp%0A    %7D%3B%0A    const rawTextForPartial %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A%0A    switch (mode) %7B%0A      case 'textContent'%3A%0A        return %7B ...commonData%2C textContent%3A rawTextForPartial %7D%3B%0A      case 'innerHTML'%3A%0A        return %7B ...commonData%2C innerHTML%3A element.innerHTML %7D%3B%0A      case 'attributes'%3A%0A        let attrs %3D %7B%7D%3B%0A        for (let attr of element.attributes) attrs%5Battr.name%5D %3D attr.value%3B%0A        return %7B ...commonData%2C attributes%3A attrs %7D%3B%0A      case 'dataset'%3A%0A        return %7B ...commonData%2C dataset%3A %7B ...element.dataset %7D %7D%3B%0A      case 'computed'%3A%0A        let styles %3D window.getComputedStyle(element)%3B%0A        let computedStyles %3D %7B%7D%3B%0A        %5B'display'%2C 'position'%2C 'width'%2C 'height'%2C 'color'%2C 'background-color'%2C 'font-size'%2C 'font-family'%2C 'font-weight'%2C 'margin'%2C 'padding'%2C 'border'%2C 'opacity'%2C 'visibility'%2C 'z-index'%2C 'overflow'%2C 'text-align'%2C 'line-height'%5D.forEach(prop %3D> %7B%0A          computedStyles%5Bprop%5D %3D styles.getPropertyValue(prop)%3B%0A        %7D)%3B%0A        return %7B ...commonData%2C computedStyles%3A computedStyles %7D%3B%0A      case 'custom'%3A %0A        let jsonText %3D rawTextForPartial%3B%0A        try %7B%0A          const parsedText %3D JSON.parse(jsonText)%3B%0A          return %7B ...commonData%2C source%3A 'textContent'%2C parsedJSON%3A parsedText %7D%3B%0A        %7D catch (e) %7B%0A          let jsonAttrs %3D %7B%7D%3B%0A          let foundInDataAttr %3D false%3B%0A          for (let attr of element.attributes) %7B%0A            if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A              try %7B%0A                jsonAttrs%5Battr.name%5D %3D JSON.parse(attr.value)%3B%0A                foundInDataAttr %3D true%3B%0A              %7D catch (e2) %7B%0A                jsonAttrs%5Battr.name%5D %3D %60Error parsing%3A %24%7Battr.value.substring(0%2C50)%7D...%60%3B%0A              %7D%0A            %7D%0A          %7D%0A          if (foundInDataAttr) %7B%0A            return %7B ...commonData%2C source%3A 'dataAttributes'%2C possibleJSON%3A jsonAttrs %7D%3B%0A          %7D else %7B%0A            return %7B ...commonData%2C source%3A 'none'%2C error%3A 'Could not parse JSON from text or data attributes.'%2C rawTextSample%3A jsonText.substring(0%2C 200) %7D%3B%0A          %7D%0A        %7D%0A      case 'partialJSON'%3A %0A        try %7B%0A            const parsedOuter %3D JSON.parse(rawTextForPartial)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A                let finalOutputString %3D parsedOuter.output%3B%0A                let parsedInnerJson %3D null%3B%0A                try %7B%0A                    parsedInnerJson %3D JSON.parse(finalOutputString)%3B%0A                %7D catch (innerParseError) %7B%0A                    const repairedInnerOutput %3D repairJsonStringLiterals(finalOutputString)%3B%0A                    try %7B%0A                        parsedInnerJson %3D JSON.parse(repairedInnerOutput)%3B%0A                    %7D catch (repairedInnerParseError) %7B%0A                        parsedInnerJson %3D null%3B%0A                    %7D%0A                %7D%0A%0A                if (parsedInnerJson !%3D%3D null) %7B%0A                    %2F%2F Flatten unnecessary nested arrays%0A                    const flattened %3D flattenUnnecessaryArrays(parsedInnerJson)%3B%0A                    return Array.isArray(flattened) %3F flattened %3A %5Bflattened%5D%3B%0A                %7D%0A            %7D%0A        %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to greedy extraction%0A        %7D%0A%0A        const extractedStringParts %3D extractGreedyJson(rawTextForPartial)%3B %0A        if (extractedStringParts.length > 0) %7B%0A            const parsed %3D extractedStringParts.map(jsonStringPart %3D> %7B%0A                try %7B%0A                    const parsedJson %3D JSON.parse(jsonStringPart)%3B%0A                    return flattenUnnecessaryArrays(parsedJson)%3B%0A                %7D catch (e) %7B%0A                    return jsonStringPart%3B %2F%2F Fallback to string if parsing fails%0A                %7D%0A            %7D)%3B%0A            %0A            %2F%2F Flatten the results - if we get nested arrays%2C flatten them%0A            const result %3D %5B%5D%3B%0A            parsed.forEach(item %3D> %7B%0A                if (Array.isArray(item)) %7B%0A                    result.push(...item)%3B%0A                %7D else %7B%0A                    result.push(item)%3B%0A                %7D%0A            %7D)%3B%0A            %0A            return result.length > 0 %3F result %3A null%3B%0A        %7D else %7B%0A            return null%3B %0A        %7D%0A      default%3A%0A        return %7B ...commonData%2C error%3A 'Unknown extraction mode' %7D%3B%0A    %7D%0A  %7D%0A%0A  function getSelector(element) %7B%0A    if (!element %7C%7C !element.tagName) return 'unknown'%3B%0A    if (element.id) return %60%23%24%7Belement.id%7D%60%3B%0A%0A    let path %3D %5B%5D%3B%0A    let current %3D element%3B%0A    while (current %26%26 current.parentElement %26%26 path.length < 7) %7B %0A      let selectorPart %3D current.tagName.toLowerCase()%3B%0A      const parent %3D current.parentElement%3B%0A      if (parent) %7B%0A        const siblings %3D Array.from(parent.children).filter(child %3D> child.tagName %3D%3D%3D current.tagName)%3B%0A        if (siblings.length > 1) %7B%0A          const index %3D siblings.indexOf(current) %2B 1%3B%0A          selectorPart %2B%3D %60%3Anth-of-type(%24%7Bindex%7D)%60%3B%0A        %7D else %7B%0A            if (current.classList %26%26 current.classList.length > 0) %7B%0A                const distinctiveClass %3D Array.from(current.classList).find(cls %3D> %7B%0A                    if (!cls %7C%7C !%2F%5E%5Ba-zA-Z%5D%2F.test(cls.charAt(0))) return false%3B %0A                    try %7B%0A                        return parent.querySelectorAll(%60%24%7Bcurrent.tagName.toLowerCase()%7D.%24%7BCSS.escape(cls)%7D%60).length %3D%3D%3D 1%3B%0A                    %7D catch (e) %7B%0A                        return false%3B %0A                    %7D%0A                %7D)%3B%0A                if (distinctiveClass) %7B%0A                    selectorPart %2B%3D %60.%24%7BCSS.escape(distinctiveClass)%7D%60%3B%0A                %7D%0A            %7D%0A        %7D%0A      %7D%0A      path.unshift(selectorPart)%3B%0A      if (current.tagName.toLowerCase() %3D%3D%3D 'body') break%3B%0A      current %3D parent%3B%0A    %7D%0A    return path.join(' > ')%3B%0A  %7D%0A%0A  function updateDisplay() %7B%0A    const jsonDisplay %3D document.getElementById('json-output-display')%3B%0A    const itemCount %3D document.getElementById('item-count-display')%3B%0A    const dataSize %3D document.getElementById('data-size-display')%3B%0A%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      jsonDisplay.textContent %3D 'No data captured yet... Hover and click elements when selection is active.'%3B%0A      jsonDisplay.style.color %3D '%239da5b4'%3B %0A    %7D else %7B%0A      %2F%2F Use proper JSON stringification without double-escaping%0A      jsonDisplay.textContent %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A      jsonDisplay.style.color %3D '%23d19a66'%3B %0A    %7D%0A%0A    itemCount.textContent %3D capturedData.length%3B%0A    const sizeInBytes %3D new TextEncoder().encode(JSON.stringify(capturedData)).length%3B %0A    dataSize.textContent %3D %60%24%7B(sizeInBytes %2F 1024).toFixed(2)%7D KB%60%3B%0A  %7D%0A%0A  function handleMouseOver(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Remove highlight from previous element%0A    if (highlightedElement %26%26 highlightedElement !%3D%3D target) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A    %7D%0A    %0A    %2F%2F Add highlight to current element%0A    target.classList.add(HIGHLIGHT_CLASS)%3B%0A    highlightedElement %3D target%3B%0A    %0A    %2F%2F Show badge with JSON count%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const count %3D countJsonComponents(target%2C mode)%3B%0A    showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %0A    %2F%2F Prevent event bubbling to avoid highlighting parent elements%0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseOut(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Only remove highlight if we're leaving this element and not entering a child%0A    if (target %3D%3D%3D highlightedElement %26%26 !target.contains(e.relatedTarget)) %7B%0A        target.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A        hideBadge()%3B%0A    %7D%0A    %0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseMove(e) %7B%0A    if (!isSelecting %7C%7C !highlightedElement) return%3B%0A    %0A    %2F%2F Throttle mouse move updates to prevent performance issues%0A    if (mouseMoveThrottle) return%3B%0A    %0A    mouseMoveThrottle %3D setTimeout(() %3D> %7B%0A      %2F%2F Double-check we're still selecting before updating%0A      if (!isSelecting) %7B%0A        mouseMoveThrottle %3D null%3B%0A        return%3B%0A      %7D%0A      mouseMoveThrottle %3D null%3B%0A      %2F%2F Update badge position to follow cursor%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %7D%2C 50)%3B %2F%2F Update at most every 50ms%0A  %7D%0A%0A  function handleClick(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification') return%3B%0A%0A    e.preventDefault()%3B%0A    e.stopPropagation()%3B%0A%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const extractionResult %3D extractJSON(target%2C mode)%3B %0A%0A    %2F%2F Visual feedback for successful extraction%0A    target.style.transition %3D 'background-color 0.2s ease-out'%3B%0A    target.style.backgroundColor %3D 'rgba(152%2C 195%2C 121%2C 0.5)'%3B %0A    setTimeout(() %3D> %7B%0A      target.style.backgroundColor %3D ''%3B %0A      if(isSelecting %26%26 highlightedElement %3D%3D%3D target) %7B%0A          target.classList.add(HIGHLIGHT_CLASS)%3B%0A      %7D%0A    %7D%2C 300)%3B%0A    %0A    if (mode %3D%3D%3D 'partialJSON') %7B%0A        if (Array.isArray(extractionResult) %26%26 extractionResult.length > 0) %7B %0A            extractionResult.forEach(item %3D> capturedData.push(item))%3B%0A            showNotification(%60âœ… Captured %24%7BextractionResult.length%7D JSON part(s) from %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B %0A            showNotification(%60â„¹%EF%B8%8F No JSON parts found in %24%7Btarget.tagName.toLowerCase()%7D.%60%2C 'info')%3B%0A        %7D%0A    %7D else %7B %0A        if (extractionResult) %7B %0A            capturedData.push(extractionResult)%3B%0A            showNotification(%60âœ… Captured %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B%0A            showNotification(%60âš %EF%B8%8F Extraction failed for %24%7Btarget.tagName.toLowerCase()%7D. No data returned.%60%2C 'error')%3B%0A        %7D%0A    %7D%0A    updateDisplay()%3B%0A  %7D%0A%0A  function startSelectionMode() %7B%0A    isSelecting %3D true%3B%0A    originalCursor %3D document.body.style.cursor%3B%0A    document.body.style.cursor %3D 'crosshair'%3B%0A    %0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%23e06c75'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'â¹%EF%B8%8F Stop Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'block'%3B%0A%0A    %2F%2F Use capture phase for better event handling%0A    document.addEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.addEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.addEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.addEventListener('click'%2C handleClick%2C true)%3B%0A    document.addEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A  %7D%0A%0A  function stopSelectionMode() %7B%0A    isSelecting %3D false%3B%0A    document.body.style.cursor %3D originalCursor%3B%0A%0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%2361afef'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'ðŸŽ¯ Start Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'none'%3B%0A%0A    %2F%2F Remove event listeners%0A    document.removeEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.removeEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.removeEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.removeEventListener('click'%2C handleClick%2C true)%3B%0A    document.removeEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A%0A    %2F%2F Force clean up any remaining highlights%0A    if (highlightedElement) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A    %7D%0A    %0A    %2F%2F Remove ALL highlight classes from any element that might have them%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      %2F%2F Force remove any inline styles that might have been added%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    hideBadge()%3B%0A    %0A    %2F%2F Clear any pending throttle%0A    if (mouseMoveThrottle) %7B%0A      clearTimeout(mouseMoveThrottle)%3B%0A      mouseMoveThrottle %3D null%3B%0A    %7D%0A    %0A    %2F%2F Double-check that selection is truly off by removing cursor style%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  function handleEscapeKey(e) %7B%0A    if (e.key %3D%3D%3D 'Escape' %26%26 isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Event Listeners%0A  document.getElementById('start-selection-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D else %7B%0A      startSelectionMode()%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('clear-data-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length > 0) %7B%0A        const userConfirmed %3D confirm(\"Are you sure you want to clear all captured data%3F\")%3B%0A        if (userConfirmed) %7B%0A            capturedData %3D %5B%5D%3B%0A            updateDisplay()%3B%0A            showNotification('ðŸ—‘%EF%B8%8F All data cleared.'%2C 'info')%3B%0A        %7D%0A    %7D else %7B%0A        showNotification('No data to clear.'%2C 'info')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-json-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    const jsonString %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A    const success %3D await copyToClipboard(jsonString)%3B%0A    %0A    if (success) %7B%0A      showNotification('ðŸ“‹ JSON copied to clipboard!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy JSON. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-items-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    %2F%2F Convert each item to JSON string and join with commas%0A    const itemsString %3D capturedData.map(item %3D> JSON.stringify(item%2C null%2C 2)).join('%2C%5Cn')%3B%0A    const success %3D await copyToClipboard(itemsString)%3B%0A    %0A    if (success) %7B%0A      showNotification('ðŸ“„ Items copied to clipboard (without array brackets)!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy items. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('export-json-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to export.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    const blob %3D new Blob(%5BJSON.stringify(capturedData%2C null%2C 2)%5D%2C %7B type%3A 'application%2Fjson' %7D)%3B%0A    const url %3D URL.createObjectURL(blob)%3B%0A    const a %3D document.createElement('a')%3B%0A    a.href %3D url%3B%0A    a.download %3D %60extracted-data-%24%7Bnew Date().toISOString().slice(0%2C19).replace(%2F%5B%3AT%5D%2Fg%2C'-')%7D.json%60%3B%0A    document.body.appendChild(a)%3B%0A    a.click()%3B%0A    document.body.removeChild(a)%3B%0A    URL.revokeObjectURL(url)%3B%0A    showNotification('ðŸ’¾ JSON download started!'%2C 'success')%3B%0A  %7D)%3B%0A%0A  document.getElementById('close-sidebar-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    cleanupAndClose()%3B%0A  %7D)%3B%0A  %0A  function cleanupAndClose() %7B%0A    %2F%2F Force stop selection mode first%0A    stopSelectionMode()%3B %0A    %0A    %2F%2F Remove all traces of the extractor%0A    document.body.style.marginRight %3D ''%3B%0A    sidebar.remove()%3B%0A    styleElement.remove()%3B %0A    %0A    %2F%2F Clean up notifications and badge%0A    const notificationEl %3D document.getElementById('json-extractor-notification')%3B%0A    if (notificationEl) notificationEl.remove()%3B%0A    const badgeEl %3D document.getElementById('json-extractor-badge')%3B%0A    if (badgeEl) badgeEl.remove()%3B%0A    %0A    %2F%2F Final cleanup of any remaining highlights%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    %2F%2F Reset cursor completely%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  updateDisplay()%3B%0A%0A  %2F%2F Update badge when extraction mode changes%0A  document.getElementById('extraction-mode-select').addEventListener('change'%2C () %3D> %7B%0A    if (isSelecting %26%26 highlightedElement) %7B%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      %2F%2F Use a simple position near the element center%0A      const rect %3D highlightedElement.getBoundingClientRect()%3B%0A      const x %3D rect.left %2B rect.width %2F 2%3B%0A      const y %3D rect.top %2B rect.height %2F 2%3B%0A      showBadge(count%2C x%2C y)%3B%0A    %7D%0A  %7D)%3B%0A%0A%7D)()%3B%7D)()%3B"
  }
];for(const n of t)if(e.hasAttribute(n)){const t=e.getAttribute(n),i=`[${n}=\"${CSS.escape(t)}\"]`;if(1===document.querySelectorAll(i).length)return i}const n=l(e);if(n){const e=n.split(/\s+/).filter(Boolean);if(0<e.length)for(let t=1;t<=e.length;t++)for(const n of m(e,t)){const e=n.map(e=>\".\"+CSS.escape(e)).join(\"\");if(1===document.querySelectorAll(e).length)return e}}const i=e.parentElement;if(!i)return null;const d=e.tagName.toLowerCase(),r=Array.from(i.children).filter(e=>e.tagName.toLowerCase()===d);if(1===r.length){const e=u(i);return e%3F`${e} > ${d}`:d}else{const t=r.indexOf(e)+1,n=u(i);return n%3F`${n} > ${d}:nth-child(${t})`:`${d}:nth-child(${t})`}}function m(e,t){return t>e.length%3F[]:1===t%3Fe.map(e=>[e]):e.reduce((n,i,d)=>{const l=m(e.slice(d+1),t-1),r=l.map(e=>[i,...e]);return[...n,...r]},[])}function f(e){const t={};[\"onclick\",\"onchange\",\"onsubmit\",\"onkeyup\",\"onkeydown\",\"onmousedown\",\"onmouseup\",\"onmouseover\",\"onmouseout\",\"onfocus\",\"onblur\",\"oninput\",\"ondrag\",\"ondrop\"].forEach(n=>{if(e.hasAttribute(n)){const i=n.substring(2);t[i]=e.getAttribute(n)}});const n=Array.from(e.classList).join(\" \");return(n.includes(\"ng-click\")||e.hasAttribute(\"ng-click\"))%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"v-on:click\")||e.hasAttribute(\"%40click\"))%26%26(t.click=\"Vue click binding\"),(e.hasAttribute(\"v-on:change\")||e.hasAttribute(\"%40change\"))%26%26(t.change=\"Vue change binding\"),e.hasAttribute(\"(click)\")%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"onClick\")||n.includes(\"clickable\")||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26\"button\"===e.type)%26%26!t.click%26%26(t.click=\"Probable click handler\"),(\"A\"===e.tagName||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26[\"button\",\"submit\",\"reset\"].includes(e.type))%26%26!t.click%26%26(t.click=\"Native click behavior\"),\"FORM\"!==e.tagName||t.submit||(t.submit=\"Native form submission\"),(\"INPUT\"===e.tagName||\"SELECT\"===e.tagName||\"TEXTAREA\"===e.tagName)%26%26(!t.change%26%26(t.change=\"Native change behavior\"),!t.input%26%26\"SELECT\"!==e.tagName%26%26(t.input=\"Native input behavior\")),t}function h(e){const t={},n=Array.from(e.attributes),i=n.filter(e=>e.name.startsWith(\"aria-\"));if(0<i.length%26%26(t.ariaAttributes={},i.forEach(e=>{t.ariaAttributes[e.name]=e.value})),e.hasAttribute(\"role\")%26%26(t.role=e.getAttribute(\"role\")),t.focusable=0<=e.tabIndex||[\"A\",\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName),[\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName)%26%26e.id){const n=document.querySelector(`label[for=\"${e.id}\"]`);n%26%26(t.labelText=n.textContent.trim())}return\"IMG\"===e.tagName%26%26(t.altText=e.alt||\"(missing alt text)\"),t}function g(e){const t=window.getComputedStyle(e);return{position:t.position,display:t.display,visibility:t.visibility,zIndex:t.zIndex,overflow:t.overflow,opacity:t.opacity,boxSizing:t.boxSizing,pointerEvents:t.pointerEvents,flexDirection:t.flexDirection,gridTemplateColumns:t.gridTemplateColumns,gridTemplateRows:t.gridTemplateRows}}function p(e){const t=e.getBoundingClientRect();return{x:t.left+window.scrollX,y:t.top+window.scrollY,width:t.width,height:t.height,viewportX:t.left,viewportY:t.top,isInViewport:0<=t.top%26%260<=t.left%26%26t.bottom<=window.innerHeight%26%26t.right<=window.innerWidth}}function y(e){const t=u(e);return{querySelector:`document.querySelector('${t}')`,traversal:b(e),byId:e.id%3F`document.getElementById('${e.id}')`:null,byClass:l(e)%3F`document.getElementsByClassName('${l(e).split(\" \")[0]}')[0]`:null,byTagName:`document.getElementsByTagName('${e.tagName.toLowerCase()}')[0]`,eventCode:E(e)}}function b(e){if(e===document.body)return\"document.body\";if(e.id)return`document.getElementById('${e.id}')`;const t=[];for(let n=e;n%26%26n!==document.body;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t.unshift(d),n=e}if(0===t.length)return null;let n=\"document.body\";return t.forEach(e=>{n+=`.children[${e}]`}),n}function E(e){const t=u(e),n=f(e),i=Object.keys(n);if(0===i.length)return null;let d=``;return d+=`const element = document.querySelector('${t}');\n`,i.forEach(e=>{d+=`element.addEventListener('${e}', (event) => {\n console.log('${e} event triggered');\n});\n`}),d}function v(e){const t=u(e);return`const element = document.querySelector('${t}');element.textContent = 'New text';element.setAttribute('data-custom', 'value');element.classList.toggle('active');element.style.backgroundColor = 'lightblue';const newChild = document.createElement('div');newChild.textContent = 'Child element';element.appendChild(newChild);`}function x(e=document.body,t=3){function n(e,i=0){if(!e||i>t)return null;const d={tagName:e.tagName%3F.toLowerCase()||\"text\",nodeType:e.nodeType,id:e.id||null,className:e.className||null,textContent:3===e.nodeType%3Fe.textContent:null,childCount:e.childNodes%3F.length||0,selector:u(e),depth:i,children:[]};if(0<e.attributes%3F.length%26%26(d.attributes={},Array.from(e.attributes).forEach(e=>{d.attributes[e.name]=e.value})),1===e.nodeType)try{d.accessible=h(e),d.hasEventListeners=0<Object.keys(f(e)).length,d.geometry=p(e)}catch(t){d.error=t.message}return e.childNodes%26%26i<t%26%26e.childNodes.forEach(e=>{const t=n(e,i+1);t%26%26d.children.push(t)}),d}return n(e)}function S(e){if(!e||\"FORM\"!==e.tagName)return null;const t={action:e.action,method:e.method,id:e.id,name:e.name,enctype:e.enctype,controls:[]},n=e.querySelectorAll(\"input, select, textarea, button\");return n.forEach(e=>{const n={type:e.tagName.toLowerCase(),name:e.name,id:e.id,value:e.value,placeholder:e.placeholder,required:e.required,disabled:e.disabled,attributes:{}};if(\"INPUT\"===e.tagName%26%26(n.inputType=e.type,(\"checkbox\"===e.type||\"radio\"===e.type)%26%26(n.checked=e.checked),\"file\"===e.type%26%26(n.accept=e.accept,n.multiple=e.multiple)),\"SELECT\"===e.tagName%26%26(n.multiple=e.multiple,n.options=Array.from(e.options).map(e=>({value:e.value,text:e.text,selected:e.selected}))),e.id){const t=document.querySelector(`label[for=\"${e.id}\"]`);t%26%26(n.label=t.textContent.trim())}Array.from(e.attributes).forEach(e=>{[\"id\",\"name\",\"value\",\"type\",\"placeholder\",\"required\",\"disabled\"].includes(e.name)||(n.attributes[e.name]=e.value)}),t.controls.push(n)}),t.submissionCode=k(e),t}function k(e){const t=e.id||null,n=t%3F`document.getElementById('${t}')`:`document.querySelector('form')`,i=e.querySelectorAll(\"input[name], select[name], textarea[name]\");let d=`document.querySelector('${u(e)}').addEventListener('submit', function(event) { event.preventDefault(); const formData = new FormData(this); const formValues = {}; for (const [key, value] of formData.entries()) { formValues[key] = value; } console.log('Form values:', formValues); fetch('${e.action||\"url-here\"}', { method: '${e.method.toUpperCase()||\"POST\"}', body: formData }) .then(response => response.json()) .then(data => console.log('Success:', data)) .catch(error => console.error('Error:', error));});function getFormValues() { const form = ${n}; const values = {};`;return i.forEach(e=>{const t=e.name;d+=\"checkbox\"===e.type%3F` values['${t}'] = form.elements['${t}'].checked;\n`:\"radio\"===e.type%3F` values['${t}'] = form.querySelector('input[name=\"${t}\"]:checked')%3F.value;\n`:\"SELECT\"===e.tagName%26%26e.multiple%3F` values['${t}'] = Array.from(form.elements['${t}'].selectedOptions).map(opt => opt.value);\n`:` values['${t}'] = form.elements['${t}'].value;\n`}),d+=` return values;}`,d}function L(){const e=document.createElement(\"div\");e.id=\"html-analyzer-tool\",d(e,` <h3 id=\"tool-header\">HTML Structure Analyzer</h3> <div class=\"tab-container\"> <div class=\"tab-buttons\"> <button id=\"inspector-tab\" class=\"tab-button active\">Inspector</button> <button id=\"dom-tab\" class=\"tab-button\">DOM Explorer</button> <button id=\"extractor-tab\" class=\"tab-button\">Extractor</button> <button id=\"framework-tab\" class=\"tab-button\">Frameworks</button> <button id=\"code-tab\" class=\"tab-button\">Code</button> </div> <div id=\"inspector-tab-content\" class=\"tab-content active\"> <button id=\"enable-inspection-btn\" class=\"primary\">Select Element</button> <div class=\"button-group\"> <button id=\"highlight-events-btn\">Event Listeners</button> <button id=\"highlight-accessibility-btn\">A11y</button> <button id=\"show-z-index-btn\">Z-Index</button> </div> <div id=\"element-breadcrumbs\" class=\"breadcrumb-trail\" style=\"display: none;\"> </div> <div id=\"element-info-container\" style=\"display: none;\"> </div> </div> <div id=\"dom-tab-content\" class=\"tab-content\"> <div class=\"inspector-section\"> <div class=\"tree-view-container\"> <div class=\"tree-view-header\"> <span>DOM Tree Explorer</span> <div> <button id=\"refresh-tree-btn\" class=\"small-btn\" title=\"Refresh Tree\">â†»</button> <button id=\"expand-all-btn\" class=\"small-btn\" title=\"Expand All\">+</button> <button id=\"collapse-all-btn\" class=\"small-btn\" title=\"Collapse All\">-</button> </div> </div> <div id=\"dom-tree-view\" class=\"tree-view\"> </div> </div> </div> <div class=\"search-container\"> <input type=\"text\" id=\"tree-search\" class=\"search-input\" placeholder=\"Filter elements (e.g. div, .class, %23id)\"> </div> <div class=\"button-group\"> <button id=\"analyze-dom-btn\" class=\"secondary\">Analyze Structure</button> <button id=\"find-duplicates-btn\" class=\"secondary\">Find Duplicate IDs</button> </div> <div class=\"button-group\"> <button id=\"analyze-form-btn\">Analyze Forms</button> <button id=\"analyze-accessibility-btn\">Analyze A11y</button> </div> </div> <div id=\"extractor-tab-content\" class=\"tab-content\"> <button id=\"extract-content-btn\" class=\"primary\">Extract Content as Markdown</button> <button id=\"select-content-btn\">Select Content Container</button> <div class=\"button-group\"> <button id=\"copy-markdown-btn\">Copy to Clipboard</button> <button id=\"preview-markdown-btn\">Preview Content</button> <button id=\"download-markdown-btn\">Download</button> </div> <div class=\"extractor-options\"> <div class=\"option-group\"> <label> <input type=\"checkbox\" id=\"extract-images\" checked> Include images </label> <label> <input type=\"checkbox\" id=\"extract-links\" checked> Preserve links </label> <label> <input type=\"checkbox\" id=\"extract-tables\" checked> Include tables </label> </div> <div class=\"option-group\"> <label> <input type=\"checkbox\" id=\"clean-whitespace\" checked> Clean whitespace </label> <label> <input type=\"checkbox\" id=\"strip-scripts\"> Remove scripts </label> </div> </div> </div> <div id=\"framework-tab-content\" class=\"tab-content\"> <div id=\"framework-info-container\"> <div class=\"loading-indicator\">Analyzing frameworks...</div> </div> <button id=\"analyze-frameworks-btn\" class=\"primary\">Detect Frameworks</button> <div class=\"button-group\"> <button id=\"analyze-css-btn\">Analyze CSS Usage</button> <button id=\"analyze-specificity-btn\">CSS Specificity</button> </div> <div id=\"framework-detail-view\"></div> </div> <div id=\"code-tab-content\" class=\"tab-content\"> <div class=\"code-section\"> <div class=\"code-section-header\">Element Access</div> <div class=\"button-group\"> <button id=\"generate-selectors-btn\" class=\"primary\">Generate Selectors</button> <button id=\"generate-traversal-btn\">DOM Traversal</button> </div> </div> <div class=\"code-section\"> <div class=\"code-section-header\">Interaction Code</div> <div class=\"button-group\"> <button id=\"generate-access-btn\">Element Access</button> <button id=\"generate-event-btn\">Event Handlers</button> </div> </div> <div class=\"code-section\"> <div class=\"code-section-header\">Test Automation</div> <div class=\"button-group\"> <button id=\"generate-cypress-btn\">Cypress</button> <button id=\"generate-playwright-btn\">Playwright</button> <button id=\"generate-selenium-btn\">Selenium</button> </div> </div> <div id=\"code-output-container\"></div> </div> </div> <div class=\"status-bar\"> <div id=\"status-message\">Ready</div> <div class=\"button-group\"> <button id=\"export-info-btn\" class=\"small-btn\">Export</button> <button id=\"help-btn\" class=\"small-btn\">Help</button> <button id=\"close-tool-btn\" class=\"small-btn danger\">Ã—</button> </div> </div> `);try{if(!document.body)throw new Error(\"document.body not available\");document.body.appendChild(e),C(),R(),j(),w(),setTimeout(()=>{z()},500)}catch(t){throw console.error(\"Failed to create tool panel:\",t),t}}function C(){const e=document.createElement(\"style\");e.textContent=` .tree-view-container { border: 1px solid var(--border-color); border-radius: 4px; margin-bottom: 10px; max-height: 300px; overflow: auto; } .tree-view-header { padding: 5px 10px; background: var(--button-bg); border-bottom: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; font-weight: bold; font-size: 13px; } .tree-view { padding: 5px; font-family: monospace; font-size: 12px; line-height: 1.4; } .small-btn { width: auto !important; padding: 2px 5px !important; margin: 0 2px !important; font-size: 12px !important; display: inline-block !important; } .status-bar { margin-top: 10px; padding-top: 5px; border-top: 1px solid var(--border-color); display: flex; justify-content: space-between; align-items: center; font-size: 12px; } %23status-message { color: var(--text-color); font-style: italic; } .loading-indicator { padding: 10px; text-align: center; font-style: italic; color: var(--text-color); } .code-section { margin-bottom: 15px; } .code-section-header { font-weight: bold; margin-bottom: 5px; color: var(--text-color); } .extractor-options { margin: 10px 0; padding: 10px; border: 1px solid var(--border-color); border-radius: 4px; } .option-group { display: flex; flex-wrap: wrap; gap: 10px; margin-bottom: 8px; } .option-group label { display: flex; align-items: center; font-size: 12px; } .option-group input[type=\"checkbox\"] { margin-right: 5px; } .framework-list { display: flex; flex-wrap: wrap; gap: 5px; margin: 10px 0; } .framework-badge { padding: 4px 8px; border-radius: 12px; font-size: 12px; background: var(--primary-bg); color: white; display: inline-flex; align-items: center; } .framework-badge.react { background: %2361dafb; color: %23000; } .framework-badge.vue { background: %2342b883; color: %23fff; } .framework-badge.angular { background: %23dd0031; color: %23fff; } .framework-badge.svelte { background: %23ff3e00; color: %23fff; } .framework-badge.jquery { background: %230769ad; color: %23fff; } .framework-badge.bootstrap { background: %237952b3; color: %23fff; } .framework-badge.tailwind { background: %2338b2ac; color: %23fff; } .framework-details { margin-top: 15px; border-top: 1px solid var(--border-color); padding-top: 10px; } .framework-details h4 { margin: 0 0 10px 0; font-size: 14px; } .framework-detail-section { margin-bottom: 15px; } .framework-property { display: flex; font-size: 12px; margin-bottom: 3px; } .framework-property-name { font-weight: bold; width: 100px; } .framework-property-value { flex: 1; } .tree-node { padding: 2px 0; white-space: nowrap; display: flex; align-items: center; } .tree-node:hover { background: var(--button-hover); } .tree-node-selected { background: var(--primary-bg) !important; color: white; } .tree-node-children { padding-left: 16px; border-left: 1px dotted var(--border-color); margin-left: 6px; } .tree-node-hidden { display: none; } .tree-node-toggle { width: 16px; height: 16px; text-align: center; line-height: 14px; cursor: pointer; font-size: 10px; user-select: none; } .tree-node-icon { width: 16px; height: 16px; margin: 0 4px; display: inline-block; font-size: 12px; text-align: center; } .tree-node-label { cursor: pointer; user-select: none; font-size: 12px; } .tree-node-tag { color: %23e76f51; } .tree-node-id { color: %2300bfff; font-weight: bold; } .tree-node-class { color: %23ffd166; } .tree-node-filter-highlight { background: rgba(255, 255, 0, 0.2); border-radius: 2px; } .specificity-table { width: 100%25; border-collapse: collapse; font-size: 12px; } .specificity-table th, .specificity-table td { text-align: left; padding: 4px; border-bottom: 1px solid var(--border-color); } .specificity-table th { background: var(--button-bg); font-weight: bold; } .specificity-table tr:hover { background: var(--button-hover); } .property-conflict { background: rgba(255, 87, 34, 0.1); } .property-winning { background: rgba(0, 200, 83, 0.1); } .test-code-tabs { display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 10px; } .test-code-tab { padding: 5px 10px; cursor: pointer; border: 1px solid transparent; border-bottom: none; border-radius: 4px 4px 0 0; margin-right: 2px; font-size: 12px; } .test-code-tab.active { background: var(--button-bg); border-color: var(--border-color); } `,document.head.appendChild(e)}function w(){const e=document.getElementById(\"dom-tree-view\");e%26%26(d(e,\"<div class=\\"loading-indicator\\">Loading DOM tree...</div>\"),setTimeout(()=>{const t=document.documentElement,n=N(t);d(e,n),q(),B()},100))}function N(e,t=2,n=0){if(!e||30<n)return\"\";const i=e.tagName%3Fe.tagName.toLowerCase():\"text\",d=e.id%3Fe.id:\"\",l=e.className%26%26\"string\"==typeof e.className%3Fe.className:\"\",r=e.childNodes%26%260<e.childNodes.length,a=n<t,o=I(e);let s=`<span class=\"tree-node-tag\">${i}</span>`;if(d%26%26(s+=` <span class=\"tree-node-id\">%23${d}</span>`),l%26%26l.trim()){const e=l.split(/\s+/).filter(Boolean);e.length%26%26(2>=e.length%3Fs+=` <span class=\"tree-node-class\">.${e.join(\".\")}</span>`:s+=` <span class=\"tree-node-class\">.${e[0]}...</span>`)}if(e.attributes%26%260<e.attributes.length){const t=e.attributes.length;s+=` <span class=\"tree-node-attrs\">(${t} attrs)</span>`}let c=` <div class=\"tree-node\" data-node-id=\"${o}\"> <span class=\"tree-node-toggle\">${r%3Fa%3F\"\u25BE\":\"\u25B8\":\"\u2022\"}</span> <span class=\"tree-node-icon\">${A(e)}</span> <span class=\"tree-node-label\">${s}</span> </div> `;if(r){let i=`<div class=\"tree-node-children\" ${a%3F\"\":\"style=\\"display:none\\"\"}>`;Array.from(e.children).forEach(e=>{i+=N(e,t,n+1)}),1>n%26%26Array.from(e.childNodes).forEach(e=>{e.nodeType===Node.TEXT_NODE%26%26e.textContent.trim()%26%26(i+=` <div class=\"tree-node\" data-node-type=\"text\"> <span class=\"tree-node-toggle\">â€¢</span> <span class=\"tree-node-icon\">T</span> <span class=\"tree-node-label\">%23text</span> </div> `)}),i+=`</div>`,c+=i}return c}function I(e){if(!e)return\"unknown\";if(e.id)return`id:${e.id}`;let t=\"\",n=e;for(;n%26%26n!==document.documentElement;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t=`.${d}${t}`,n=e}return`path:${t||\"0\"}`}function A(e){if(!e)return\"%3F\";switch(e.tagName%26%26e.tagName.toLowerCase()){case\"html\":return\"H\";case\"head\":return\"\u2699\uFE0F\";case\"body\":return\"B\";case\"div\":return\"D\";case\"span\":return\"S\";case\"a\":return\"\uD83D\uDD17\";case\"img\":return\"\uD83D\uDDBC\uFE0F\";case\"button\":return\"\uD83D\uDD18\";case\"input\":return\"\uD83D\uDCDD\";case\"form\":return\"\uD83D\uDCCB\";case\"table\":return\"\uD83D\uDD32\";case\"ul\":case\"ol\":return\"\uD83D\uDCC4\";case\"li\":return\"\u2022\";case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":return\"H\"+e.tagName.substring(1);case\"script\":return\"\uD83D\uDCDC\";case\"style\":return\"\uD83C\uDFA8\";case\"link\":return\"\uD83D\uDD17\";case\"meta\":return\"M\";case\"iframe\":return\"\uD83D\uDCDF\";case\"svg\":return\"\u2693\";case\"video\":return\"\uD83D\uDCF9\";case\"audio\":return\"\uD83D\uDD0A\";case\"canvas\":return\"\uD83C\uDFAD\";default:return\"E\";}}function q(){document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-node\"),n=e.nextElementSibling;if(n%26%26n.classList.contains(\"tree-node-children\")){const e=\"none\"!==n.style.display;n.style.display=e%3F\"none\":\"block\",t.target.textContent=e%3F\"\u25B8\":\"\u25BE\"}t.stopPropagation()})}),document.querySelectorAll(\".tree-node-label\").forEach(e=>{e.addEventListener(\"click\",t=>{M(t.target.closest(\".tree-node\")),t.stopPropagation()})}),document.getElementById(\"refresh-tree-btn\")%3F.addEventListener(\"click\",()=>{w()}),document.getElementById(\"expand-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"block\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25BE\")})}),document.getElementById(\"collapse-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"none\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25B8\")})})}function B(){const e=document.getElementById(\"tree-search\");e%26%26e.addEventListener(\"input\",t=>{const e=t.target.value.trim().toLowerCase();return e%3Fvoid document.querySelectorAll(\".tree-node\").forEach(t=>{const n=t.querySelector(\".tree-node-label\");if(!n)return;const i=n.textContent.toLowerCase(),l=i.includes(e);if(l){t.classList.remove(\"tree-node-hidden\");const i=n.innerHTML,l=new RegExp(`(${T(e)})`,\"gi\");d(n,i.replace(l,\"<mark class=\\"tree-node-filter-highlight\\">$1</mark>\"));for(let e=t.parentElement;e;){if(e.classList.contains(\"tree-node-children\")){e.style.display=\"block\";const t=e.previousElementSibling;if(t%26%26t.classList.contains(\"tree-node\")){const e=t.querySelector(\".tree-node-toggle\");e%26%26(e.textContent=\"\u25BE\")}}e=e.parentElement}}else{const e=t.nextElementSibling;e%26%26e.classList.contains(\"tree-node-children\")%26%26e.querySelector(\".tree-node:not(.tree-node-hidden)\")%3Ft.classList.remove(\"tree-node-hidden\"):t.classList.add(\"tree-node-hidden\")}}):void document.querySelectorAll(\".tree-node\").forEach(e=>{e.classList.remove(\"tree-node-hidden\");const t=e.querySelector(\".tree-node-label\");t%26%26d(t,t.innerHTML.replace(/<mark class=\"tree-node-filter-highlight\">(.*%3F)<\/mark>/g,\"$1\"))})})}function T(e){return e.replace(/[.*+%3F^${}()|[\]\\]/g,\"\\$%26\")}function M(e){if(!e)return;document.querySelectorAll(\".tree-node-selected\").forEach(e=>{e.classList.remove(\"tree-node-selected\")}),e.classList.add(\"tree-node-selected\");const t=e.dataset.nodeId;if(!t)return;let n=null;if(t.startsWith(\"id:\")){const e=t.substring(3);n=document.getElementById(e)}else if(t.startsWith(\"path:\")){const e=t.substring(5).split(\".\");n=document.documentElement;for(let t=1;t<e.length;t++){const i=parseInt(e[t]);if(n.children%26%26i<n.children.length)n=n.children[i];else{n=null;break}}}n%26%26(ne(n),n.scrollIntoView({behavior:\"smooth\",block:\"center\"}),document.getElementById(\"inspector-tab\").click())}function z(){function e(e){return e.replace(/([A-Z])/g,\" $1\").replace(/^./,e=>e.toUpperCase())}const t=document.getElementById(\"framework-info-container\");if(!t)return;const n=r();let i=\"\";n.list%26%260<n.list.length%3F(i+=`<div class=\"framework-list\">`,n.list.forEach(e=>{const t=e.toLowerCase().replace(/\s+/g,\"\");i+=`<div class=\"framework-badge ${t}\">${e}</div>`}),i+=`</div>`,n.details%26%26Object.entries(n.details).forEach(([t,n])=>{i+=`<div class=\"framework-details\">`,i+=`<h4>${t} Details</h4>`,i+=`<div class=\"framework-detail-section\">`,Object.entries(n).forEach(([t,n])=>{\"object\"==typeof n%26%26null!==n%3FArray.isArray(n)%3F(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n.length} items</div>`,i+=`</div>`,0<n.length%26%26(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\"></div>`,i+=`<div class=\"framework-property-value\">`,n.slice(0,5).forEach(e=>{i+=`<div>${\"string\"==typeof e%3Fe:JSON.stringify(e)}</div>`}),5<n.length%26%26(i+=`<div>...and ${n.length-5} more</div>`),i+=`</div>`,i+=`</div>`)):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">[Object]</div>`,i+=`</div>`):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n}</div>`,i+=`</div>`)}),i+=`</div>`,i+=`</div>`})):i=`<div class=\"framework-info-message\">No frameworks detected on this page. This appears to be a static HTML page.</div>`,d(t,i)}function R(){const t=document.getElementById(\"html-analyzer-tool\"),n=document.getElementById(\"tool-header\");n.addEventListener(\"mousedown\",n=>{n.preventDefault(),Me.isMoving=!0,Me.moveOffset={x:n.clientX-t.getBoundingClientRect().left,y:n.clientY-t.getBoundingClientRect().top},document.addEventListener(\"mousemove\",O),document.addEventListener(\"mouseup\",()=>{Me.isMoving=!1,document.removeEventListener(\"mousemove\",O)},{once:!0})})}function O(i){if(!Me.isMoving)return;const e=document.getElementById(\"html-analyzer-tool\"),d=i.clientX-Me.moveOffset.x,l=i.clientY-Me.moveOffset.y,r=window.innerWidth-e.offsetWidth,a=window.innerHeight-e.offsetHeight;e.style.left=`${t(0,n(d,r))}px`,e.style.top=`${t(0,n(l,a))}px`}function j(){document.querySelectorAll(\".tab-button\").forEach(e=>{e.addEventListener(\"click\",Z)}),document.getElementById(\"enable-inspection-btn\").addEventListener(\"click\",J),document.getElementById(\"highlight-events-btn\").addEventListener(\"click\",re),document.getElementById(\"highlight-accessibility-btn\").addEventListener(\"click\",ae),document.getElementById(\"show-z-index-btn\").addEventListener(\"click\",oe),document.getElementById(\"extract-content-btn\").addEventListener(\"click\",ce),document.getElementById(\"select-content-btn\").addEventListener(\"click\",ue),document.getElementById(\"copy-markdown-btn\").addEventListener(\"click\",he),document.getElementById(\"preview-markdown-btn\").addEventListener(\"click\",me),document.getElementById(\"download-markdown-btn\").addEventListener(\"click\",fe),document.getElementById(\"analyze-dom-btn\").addEventListener(\"click\",ge),document.getElementById(\"analyze-form-btn\").addEventListener(\"click\",pe),document.getElementById(\"find-duplicates-btn\").addEventListener(\"click\",se),document.getElementById(\"tree-search\").addEventListener(\"input\",xe),document.getElementById(\"generate-selectors-btn\").addEventListener(\"click\",ye),document.getElementById(\"generate-traversal-btn\").addEventListener(\"click\",Ee),document.getElementById(\"generate-access-btn\").addEventListener(\"click\",ve),document.getElementById(\"export-info-btn\").addEventListener(\"click\",Ne),document.getElementById(\"close-tool-btn\").addEventListener(\"click\",Ie)}function H(e,t=\"Preview\",n=\"text\"){D();const i=document.createElement(\"div\");i.id=\"preview-overlay\";let l=\"\";if(\"markdown\"===n%3Fl=` <div id=\"preview-tabs\"> <button id=\"preview-tab-markdown\" class=\"active\">Markdown</button> <button id=\"preview-tab-html\">HTML</button> <button id=\"preview-tab-rendered\">Rendered</button> </div> `:\"structure\"===n%26%26(l=` <div id=\"preview-tabs\"> <button id=\"preview-tab-tree\" class=\"active\">Tree View</button> <button id=\"preview-tab-json\">JSON</button> </div> `),d(i,` <div id=\"preview-container\"> <div id=\"preview-header\"> <h3>${t}</h3> <button id=\"close-preview-btn\" class=\"danger\">Ã—</button> </div> ${l} <div id=\"preview-content\">${\"html\"===n%3Fe:\"rendered\"===n%3F\"\":Y(e)}</div> <div id=\"preview-actions\"> <button id=\"preview-copy-btn\">Copy to Clipboard</button> <button id=\"preview-download-btn\" class=\"primary\">Download</button> <button id=\"preview-close-btn\">Close</button> </div> </div> `),document.body.appendChild(i),document.getElementById(\"close-preview-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-close-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-copy-btn\").addEventListener(\"click\",()=>{Q(e),X(\"Copied to clipboard!\")}),document.getElementById(\"preview-download-btn\").addEventListener(\"click\",()=>{we(e,t,n)}),\"markdown\"===n){const t=G(e);document.getElementById(\"preview-tab-markdown\").addEventListener(\"click\",()=>{U(\"markdown\"),d(document.getElementById(\"preview-content\"),Y(e))}),document.getElementById(\"preview-tab-html\").addEventListener(\"click\",()=>{U(\"html\"),d(document.getElementById(\"preview-content\"),Y(t))}),document.getElementById(\"preview-tab-rendered\").addEventListener(\"click\",()=>{U(\"rendered\"),d(document.getElementById(\"preview-content\"),t)})}else if(\"structure\"===n){const t=F(e),n=JSON.stringify(e,null,2);document.getElementById(\"preview-tab-tree\").addEventListener(\"click\",()=>{U(\"tree\"),d(document.getElementById(\"preview-content\"),t),_()}),document.getElementById(\"preview-tab-json\").addEventListener(\"click\",()=>{U(\"json\"),d(document.getElementById(\"preview-content\"),Y(n))}),d(document.getElementById(\"preview-content\"),t),_()}}function _(){document.querySelectorAll(\".tree-toggler\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-item\"),n=e.querySelector(\".tree-children\");n%26%26(n.style.display=\"none\"===n.style.display%3F\"block\":\"none\",t.target.textContent=\"none\"===n.style.display%3F\"\u25B8\":\"\u25BE\")})}),document.querySelectorAll(\".tree-item-label\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.dataset.elementId;if(e){const t=document.querySelector(e);t%26%26(ie(t),le(t))}})})}function U(e){document.querySelectorAll(\"%23preview-tabs button\").forEach(e=>{e.classList.remove(\"active\")}),document.getElementById(`preview-tab-${e}`).classList.add(\"active\"),Me.previewActiveTab=e}function D(){const e=document.getElementById(\"preview-overlay\");e%26%26e.remove()}function $(e){if(!e)return;const t=document.getElementById(\"element-info-container\"),n=document.getElementById(\"element-breadcrumbs\");t.style.display=\"block\",n.style.display=\"block\",d(n,\"\"),V(e,n);const i=e.tagName.toLowerCase(),r=e.id%3F`%23${e.id}`:\"\",a=l(e),o=a%3F`.${a.split(\" \").join(\".\")}`:\"\",s=u(e),c=f(e),m=h(e),b=g(e),E=p(e);d(t,` <div class=\"inspector-section\"> <div class=\"inspector-section-title\">Basic Information</div> <div><strong>Element:</strong> ${i}${r}${o}</div> <div><strong>Unique Selector:</strong> ${s}</div> <div><strong>Text Content:</strong> ${e.textContent.substring(0,50)}${50<e.textContent.length%3F\"...\":\"\"}</div> <div><strong>Child Elements:</strong> ${e.children.length}</div> </div> <div class=\"inspector-section\"> <div class=\"inspector-section-title\">Attributes</div> <div class=\"property-list\"> ${Array.from(e.attributes).map(e=>` <div class=\"property-item\"> <div class=\"property-name\">${e.name}</div> <div class=\"property-value\">${e.value}</div> </div> `).join(\"\")} </div> </div> <div class=\"inspector-section\"> <div class=\"inspector-section-title\">Event Listeners</div> ${0<Object.keys(c).length%3FObject.entries(c).map(([e,t])=>`<span class=\"badge badge-warning\">${e}</span>`).join(\"\"):\"<div>No event listeners detected</div>\"} </div> <div class=\"inspector-section\"> <div class=\"inspector-section-title\">Accessibility</div> ${0<Object.keys(m).length%3F`<div class=\"property-list\"> ${Object.entries(m).map(([e,t])=>\"ariaAttributes\"===e%26%26\"object\"==typeof t%3FObject.entries(t).map(([e,t])=>` <div class=\"property-item\"> <div class=\"property-name\">${e}</div> <div class=\"property-value\">${t}</div> </div> `).join(\"\"):` <div class=\"property-item\"> <div class=\"property-name\">${e}</div> <div class=\"property-value\">${JSON.stringify(t)}</div> </div> `).join(\"\")} </div>`:\"<div>No accessibility attributes detected</div>\"} </div> <div class=\"inspector-section\"> <div class=\"inspector-section-title\">Key Styles</div> <div class=\"property-list\"> ${Object.entries(b).map(([e,t])=>` <div class=\"property-item\"> <div class=\"property-name\">${e}</div> <div class=\"property-value\">${t}</div> </div> `).join(\"\")} </div> </div> <div class=\"inspector-section\"> <div class=\"inspector-section-title\">Actions</div> <div class=\"button-group\"> <button id=\"generate-selector-btn\" class=\"secondary\">Generate Selector</button> <button id=\"generate-js-access-btn\" class=\"secondary\">JS Access</button> </div> <div class=\"button-group\"> <button id=\"copy-outer-html-btn\" class=\"info\">Copy HTML</button> <button id=\"inspect-children-btn\" class=\"info\">Inspect Children</button> </div> </div> `),document.getElementById(\"generate-selector-btn\").addEventListener(\"click\",()=>{W(s,\"CSS Selector\")}),document.getElementById(\"generate-js-access-btn\").addEventListener(\"click\",()=>{const t=y(e);let n=`const element = ${t.querySelector};${t.byId%3F`const elementById = ${t.byId};`:\"\"}${t.byClass%3F`const elementByClass = ${t.byClass};`:\"\"}${t.byTagName%3F`const elementByTag = ${t.byTagName};`:\"\"}`;W(n,\"JavaScript Element Access\")}),document.getElementById(\"copy-outer-html-btn\").addEventListener(\"click\",()=>{Q(e.outerHTML),X(\"HTML copied to clipboard!\")}),document.getElementById(\"inspect-children-btn\").addEventListener(\"click\",()=>{P(e)})}function V(e,t){let n=e;const i=[];for(;n%26%26n!==document.documentElement;)i.unshift({element:n,tag:n.tagName.toLowerCase(),id:n.id,classes:n.className}),n=n.parentElement;i.unshift({element:document.documentElement,tag:\"html\",id:\"\",classes:\"\"}),i.forEach((e,n)=>{const i=document.createElement(\"span\");i.className=\"breadcrumb-item\";let d=e.tag;if(e.id%26%26(d+=`%23${e.id}`),e.classes){const t=e.classes.split(\" \")[0];t%26%26(d+=`.${t}`),1<e.classes.split(\" \").length%26%26(d+=\"...\")}i.textContent=d,i.dataset.index=n,i.addEventListener(\"click\",()=>{ie(e.element),$(e.element),Me.selectedElement=e.element}),t.appendChild(i)})}function P(e){const t=Array.from(e.children);if(0===t.length)return void X(\"This element has no child elements\");let n=`<div class=\"element-tree\"> <div class=\"tree-item\"> <span class=\"tree-toggler\">â–¾</span> <span class=\"tree-item-label\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}</span> <div class=\"tree-children\"> `;t.forEach(e=>{const t=u(e);n+=` <div class=\"tree-item\"> <span class=\"tree-toggler\">${0<e.children.length%3F\"\u25B8\":\"\u2022\"}</span> <span class=\"tree-item-label\" data-element-id=\"${t}\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}${l(e)%3F\" .\"+l(e).split(\" \")[0]:\"\"}</span> ${0<e.children.length%3F\"<div class=\\"tree-children\\" style=\\"display: none;\\"></div>\":\"\"} </div> `}),n+=` </div> </div> </div>`,H(n,\"Child Elements\",\"html\"),_()}function F(e){function t(e,n=0){if(!e)return\"\";let i=\"\";const d=e.children%26%260<e.children.length;i+=`<div class=\"tree-item\">`,i+=`<span class=\"tree-toggler\">${d%3F\"\u25BE\":\"\u2022\"}</span>`;let r=e.tagName||\"text\";e.id%26%26(r+=` %23${e.id}`);const a=l(e);if(a%26%26(r+=` .${a.split(\" \")[0]}`),i+=e.selector%3F`<span class=\"tree-item-label\" data-element-id=\"${e.selector}\">${r}</span>`:`<span class=\"tree-item-label\">${r}</span>`,e.attributes||e.textContent){let t=\"\";if(e.attributes){const n=Object.keys(e.attributes).length;0<n%26%26(t+=` [${n} attr]`)}if(e.textContent){const n=e.textContent.trim();if(0<n.length){const e=20<n.length%3Fn.substring(0,20)+\"...\":n;t+=` \"${e}\"`}}t%26%26(i+=`<span style=\"color: %23888;\">${t}</span>`)}return d%26%26(i+=`<div class=\"tree-children\">`,e.children.forEach(e=>{i+=t(e,n+1)}),i+=`</div>`),i+=`</div>`,i}return t(e)}function X(e,t=2e3){const n=document.querySelector(\".tooltip\");n%26%26n.remove();const i=document.createElement(\"div\");i.className=\"tooltip\",i.textContent=e,document.body.appendChild(i);const d=i.getBoundingClientRect();i.style.left=`${(window.innerWidth-d.width)/2}px`,i.style.top=`20px`,setTimeout(()=>{i%26%26i.parentNode%26%26i.remove()},t)}function W(e,t){H(e,t,\"text\")}function Q(e){const t=document.createElement(\"textarea\");t.value=e,t.style.position=\"fixed\",t.style.opacity=\"0\",document.body.appendChild(t),t.select();try{document.execCommand(\"copy\")}catch(e){console.error(\"Failed to copy text: \",e)}document.body.removeChild(t)}function Y(e){return e.replace(/%26/g,\"%26amp;\").replace(/</g,\"%26lt;\").replace(/>/g,\"%26gt;\").replace(/\"/g,\"%26quot;\").replace(/'/g,\"%26%23039;\")}function G(e){return e%3Fe.replace(/```(\w*)\n([\s\S]*%3F)\n```/g,\"<pre><code class=\\"language-$1\\">$2</code></pre>\").replace(/`([^`]+)`/g,\"<code>$1</code>\").replace(/^%23 (.*$)/gm,\"<h1>$1</h1>\").replace(/^%23%23 (.*$)/gm,\"<h2>$1</h2>\").replace(/^%23%23%23 (.*$)/gm,\"<h3>$1</h3>\").replace(/^%23%23%23%23 (.*$)/gm,\"<h4>$1</h4>\").replace(/^%23%23%23%23%23 (.*$)/gm,\"<h5>$1</h5>\").replace(/^%23%23%23%23%23%23 (.*$)/gm,\"<h6>$1</h6>\").replace(/\*\*(.*%3F)\*\*/g,\"<strong>$1</strong>\").replace(/\*(.*%3F)\*/g,\"<em>$1</em>\").replace(/^\s*- (.*$)/gm,\"<ul><li>$1</li></ul>\").replace(/^\s*\d+\. (.*$)/gm,\"<ol><li>$1</li></ol>\").replace(/\[(.*%3F)\]\((.*%3F)\)/g,\"<a href=\\"$2\\">$1</a>\").replace(/^(%3F!<[^>]*>)(.*$)/gm,\"<p>$1</p>\").replace(/<\/ul>\s*<ul>/g,\"\").replace(/<\/ol>\s*<ol>/g,\"\"):\"\"}function Z(t){document.querySelectorAll(\".tab-button\").forEach(e=>{e.classList.remove(\"active\")}),document.querySelectorAll(\".tab-content\").forEach(e=>{e.classList.remove(\"active\")}),t.target.classList.add(\"active\");const e=t.target.id,n=e.replace(\"-tab\",\"-tab-content\");document.getElementById(n).classList.add(\"active\"),Me.activeTab=e.replace(\"-tab\",\"\")}function J(){Me.isInspecting=!Me.isInspecting;const e=document.getElementById(\"enable-inspection-btn\");e.textContent=Me.isInspecting%3F\"Cancel Selection\":\"Select Element\",e.classList.toggle(\"primary\",!Me.isInspecting),e.classList.toggle(\"danger\",Me.isInspecting),Me.isInspecting%3F(document.addEventListener(\"mouseover\",K,!0),document.addEventListener(\"mouseout\",ee,!0),document.addEventListener(\"click\",te,!0),X(\"Hover over elements and click to select one for inspection\")):(document.removeEventListener(\"mouseover\",K,!0),document.removeEventListener(\"mouseout\",ee,!0),document.removeEventListener(\"click\",te,!0),de())}function K(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(de(),ie(t.target,!1),Me.hoveredElement=t.target))}function ee(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||t.target===Me.hoveredElement%26%26(de(),Me.hoveredElement=null))}function te(t){Me.isInspecting%26%26(t.preventDefault(),t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(ne(t.target),J()))}function ne(e){Me.selectedElement=e,de(),ie(e,!0),$(e),Me.inspectionHistory.find(t=>t===e)%26%26(Me.inspectionHistory=Me.inspectionHistory.filter(t=>t!==e)),Me.inspectionHistory.unshift(e),10<Me.inspectionHistory.length%26%26Me.inspectionHistory.pop()}function ie(e,t=!1){if(!e)return;de(),e.classList.add(\"element-highlight\");const n=document.createElement(\"div\");n.className=\"element-label\";let i=e.tagName.toLowerCase();e.id%26%26(i+=`%23${e.id}`);const d=l(e);if(d){const e=d.split(/\s+/).filter(e=>e%26%26\"element-highlight\"!==e);0<e.length%26%26(i+=`.${e[0]}`,1<e.length%26%26(i+=`+${e.length-1}`))}n.textContent=i,e.appendChild(n),Me.highlightedElements.push({element:e,label:n}),t%26%26le(e)}function de(){document.querySelectorAll(\".element-highlight\").forEach(e=>{e.classList.remove(\"element-highlight\")}),document.querySelectorAll(\".element-label\").forEach(e=>{e.remove()}),Me.highlightedElements=[]}function le(e){if(e){const t=e.getBoundingClientRect();(0>t.top||t.bottom>window.innerHeight)%26%26e.scrollIntoView({behavior:\"smooth\",block:\"center\"})}}function re(){de();const e=document.getElementById(\"highlight-events-btn\");if(\"events\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight Event Listeners\");Me.visualMode=\"events\",e.textContent=\"Remove Event Highlights\";const t=document.querySelectorAll(\"a, button, input, select, textarea, [onclick], [onkeyup], [onchange], [role=\\"button\\"], [role=\\"link\\"], [role=\\"checkbox\\"], [role=\\"menuitem\\"], [class*=\\"btn\\"], [class*=\\"button\\"], [class*=\\"clickable\\"]\");t.forEach(e=>{0<Object.keys(f(e)).length%26%26e.classList.add(\"event-highlight\")}),X(\"Highlighted all elements with event listeners\",3e3)}function ae(){de();const e=document.getElementById(\"highlight-accessibility-btn\");if(\"accessibility\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight A11y Elements\");Me.visualMode=\"accessibility\",e.textContent=\"Remove A11y Highlights\";const t=document.querySelectorAll(\"[role], [aria-*], [tabindex], [alt], [title], [for], label, a[href], button, input, select, textarea\");t.forEach(e=>{e.classList.add(\"accessibility-highlight\")}),X(\"Highlighted all elements with accessibility attributes\",3e3)}function oe(){de();const e=document.getElementById(\"show-z-index-btn\");if(document.querySelectorAll(\".z-index-highlighter\").forEach(e=>e.remove()),\"zindex\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\");Me.visualMode=\"zindex\",e.textContent=\"Remove Z-Index Visual\";const i=Array.from(document.querySelectorAll(\"*\")).filter(e=>{const t=window.getComputedStyle(e);return\"static\"!==t.position%26%26\"auto\"!==t.zIndex%26%26!isNaN(parseInt(t.zIndex))});return 0===i.length%3F(X(\"No elements with z-index found on this page\"),Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\")):void(i.sort((e,t)=>{const n=parseInt(window.getComputedStyle(e).zIndex),i=parseInt(window.getComputedStyle(t).zIndex);return n-i}),i.forEach(e=>{const i=e.getBoundingClientRect(),d=parseInt(window.getComputedStyle(e).zIndex),l=document.createElement(\"div\");l.className=\"z-index-highlighter\",l.style.left=`${i.left+window.scrollX}px`,l.style.top=`${i.top+window.scrollY}px`,l.style.width=`${i.width}px`,l.style.height=`${i.height}px`,l.style.opacity=n(.8,t(.2,d/1e3));const r=document.createElement(\"div\");r.style.position=\"absolute\",r.style.top=\"0\",r.style.left=\"0\",r.style.background=\"black\",r.style.color=\"white\",r.style.padding=\"2px 5px\",r.style.fontSize=\"12px\",r.style.borderRadius=\"2px\",r.textContent=`z-index: ${d}`,l.appendChild(r),document.body.appendChild(l)}),X(`Visualized ${i.length} elements with z-index stacking order`))}function se(){const e=document.querySelectorAll(\"[id]\"),t={};e.forEach(e=>{const n=e.id;t[n]||(t[n]=[]),t[n].push(e)});const n=Object.entries(t).filter(([e,t])=>1<t.length);if(0===n.length)return void X(\"No duplicate IDs found on the page.\");let i=`%23 Duplicate ID Report\n\n`;i+=`Found ${n.length} duplicate IDs on the page.\n\n`,n.forEach(([e,t])=>{i+=`%23%23 ID: \"${e}\"\n\n`,i+=`- Occurrences: ${t.length}\n`,i+=`- Elements:\n`,t.forEach((t,n)=>{const d=t.tagName.toLowerCase(),l=u(t).replace(`%23${e}`,\"\");i+=` ${n+1}. \`<${d}>\` at ${l}\n`}),i+=`\n`}),i+=`%23%23 Recommendation\n\n`,i+=`Duplicate IDs can cause JavaScript errors and accessibility issues. Each ID should be unique within the document.`,H(i,\"Duplicate ID Report\",\"markdown\")}function ce(){const e=Me.selectedElement||ke();return e%3Fvoid(Me.extractedMarkdown=Ce(e),X(`Content extracted! (${Me.extractedMarkdown.length} characters)`)):void X(\"No content container selected. Use \\"Select Content Container\\" first.\")}function ue(){J(),X(\"Select the container that contains the content you want to extract\")}function me(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26H(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function fe(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26we(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function he(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26(Q(Me.extractedMarkdown),X(\"Markdown copied to clipboard!\"))}function ge(){const e=Me.selectedElement||document.body;X(\"Analyzing DOM structure...\"),Me.analyzedStructure=x(e,5),H(Me.analyzedStructure,\"DOM Structure Analysis\",\"structure\")}function pe(){const e=Me.selectedElement%26%26\"FORM\"===Me.selectedElement.tagName%3FMe.selectedElement:document.querySelector(\"form\");if(!e)return void X(\"No form found on the page. Select a form first.\");const t=S(e);return t%3Fvoid H(t,\"Form Structure Analysis\",\"structure\"):void X(\"Failed to analyze the form structure.\")}function ye(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=u(e);let n=\"\";if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n=`.${e[0]}`)}}n||(n=e.tagName.toLowerCase());const i=Array.from(e.attributes).filter(e=>![\"id\",\"class\",\"style\"].includes(e.name)).map(e=>`[${e.name}=\"${e.value.replace(/\"/g,\"\\\\"\")}\"]`),d=be(e);let r=`%23 CSS Selectors for Selected Element\n\n`;r+=`%23%23 Element Info\n`,r+=`- Tag: \`${e.tagName.toLowerCase()}\`\n`,r+=`- ID: ${e.id%3F`\`${e.id}\``:\"None\"}\n`,r+=`- Classes: ${e.className%3F`\`${e.className}\``:\"None\"}\n\n`,r+=`%23%23 Selectors\n\n`,r+=`%23%23%23 Most Specific (Unique)\n`,r+=`\`\`\`css\n${t}\n\`\`\`\n\n`,r+=`%23%23%23 Shortest Viable Selector\n`,r+=`\`\`\`css\n${n}\n\`\`\`\n\n`,r+=`%23%23%23 Full CSS Path\n`,r+=`\`\`\`css\n${d}\n\`\`\`\n\n`,0<i.length%26%26(r+=`%23%23%23 Attribute Selectors\n`,i.forEach(e=>{r+=`\`\`\`css\n${e}\n\`\`\`\n`}),r+=`\n`),r+=`%23%23 JavaScript Code\n\n`,r+=`\`\`\`javascript\n`,r+=`const element = document.querySelector('${t}');\n\n`,e.id%26%26(r+=`const elementById = document.getElementById('${e.id}');\n\n`);const a=l(e);if(a){const e=a.split(/\s+/)[0];r+=`const elementsByClass = document.getElementsByClassName('${e}');\n\n`}r+=`const elementsByTag = document.getElementsByTagName('${e.tagName.toLowerCase()}');\n`,r+=`\`\`\`\n`,H(r,\"CSS Selectors\",\"markdown\")}function be(e){if(!(e instanceof Element))return\"\";if(e.id)return`%23${e.id}`;let t=\"\";for(;e!==document.body%26%26e.parentElement;){let n=e.tagName.toLowerCase();if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n+=`.${e.join(\".\")}`)}}const i=Array.from(e.parentElement.children).filter(t=>t.tagName===e.tagName);if(1<i.length){const t=i.indexOf(e)+1;n+=`:nth-of-type(${t})`}t=`${n}${t%3F\" > \"+t:\"\"}`,e=e.parentElement}return`body > ${t}`}function Ee(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement;let t=`%23 DOM Traversal Code Examples\n\n`;t+=`The following examples show different ways to traverse the DOM to access the selected element:\n\n`,t+=`%23%23 Direct Access\n\n`,t+=`\`\`\`javascript\n`,t+=e.id%3F`const element = document.getElementById('${e.id}');\n`:`const element = document.querySelector('${u(e)}');\n`,t+=`\`\`\`\n\n`,t+=`%23%23 Parent-Child Traversal\n\n`,t+=`\`\`\`javascript\n`,t+=b(e),t+=`\n\`\`\`\n\n`,(e.previousElementSibling||e.nextElementSibling)%26%26(t+=`%23%23 Sibling Traversal\n\n`,t+=`\`\`\`javascript\n`,e.previousElementSibling%26%26(t+=`const prevSibling = document.querySelector('${u(e.previousElementSibling)}');\n`,t+=`const element = prevSibling.nextElementSibling;\n\n`),e.nextElementSibling%26%26(t+=`const nextSibling = document.querySelector('${u(e.nextElementSibling)}');\n`,t+=`const element = nextSibling.previousElementSibling;\n`),t+=`\`\`\`\n\n`),H(t,\"DOM Traversal Examples\",\"markdown\")}function ve(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=y(e),n=v(e);let i=`%23 JavaScript Code for Element Interaction\n\n`;i+=`%23%23 Accessing the Element\n\n`,i+=`\`\`\`javascript\n`,i+=`const element = ${t.querySelector};\n`,t.byId%26%26(i+=`const elementById = ${t.byId};\n`),t.byClass%26%26(i+=`const elementByClass = ${t.byClass};\n`),t.traversal%26%26(i+=`const elementByTraversal = ${t.traversal};\n`),i+=`\`\`\`\n\n`,i+=`%23%23 Reading Element Properties\n\n`,i+=`\`\`\`javascript\n`,i+=`const text = element.textContent;\n`,i+=`const html = element.innerHTML;\n`,e.hasAttributes()%26%26Array.from(e.attributes).slice(0,3).forEach(e=>{i+=`const ${e.name.replace(/-/g,\"_\")} = element.getAttribute('${e.name}');\n`}),i+=`\`\`\`\n\n`,i+=`%23%23 Adding Event Listeners\n\n`,i+=`\`\`\`javascript\n`,i+=t.eventCode%3Ft.eventCode:`element.addEventListener('click', (event) => {\n console.log('Element clicked');\n});\n`,i+=`\`\`\`\n\n`,i+=`%23%23 Modifying the Element\n\n`,i+=`\`\`\`javascript\n`,i+=n,i+=`\`\`\`\n`,H(i,\"Element Access Code\",\"markdown\")}function xe(t){const e=t.target.value.trim().toLowerCase(),n=document.getElementById(\"search-results\");if(!e)return void(n.style.display=\"none\");const i=Se(e);return 0===i.length%3F(d(n,\"<div style=\\"padding: 5px;\\">No results found</div>\"),void(n.style.display=\"block\")):void(d(n,i.map((e,t)=>{const n=e.tagName.toLowerCase(),i=e.id%3F`%23${e.id}`:\"\",d=l(e),r=d%3F`.${d.split(\" \")[0]}`:\"\";return`<div class=\"search-result-item\" data-result-index=\"${t}\">${n}${i}${r}</div>`}).join(\"\")),n.style.display=\"block\",document.querySelectorAll(\".search-result-item\").forEach(e=>{e.addEventListener(\"click\",()=>{const t=parseInt(e.dataset.resultIndex),d=i[t];d%26%26(ne(d),n.style.display=\"none\",document.getElementById(\"element-search\").value=\"\")})}),Me.elementSearchResults=i)}function Se(e){if(!e)return[];try{return Array.from(document.querySelectorAll(e)).slice(0,20)}catch(t){return[]}}function ke(){if(Me.selectedElement)return Me.selectedElement;const e=[\".content\",\".post-content\",\".article\",\".post\",\".entry-content\",\"article\",\"main\",\"[role=\\"main\\"]\",\"%23content\",\".markdown-body\",\".blog-post\",\".page-content\",\".container main\",\".main-content\"];for(const t of e){const e=document.querySelector(t);if(e%26%26200<e.textContent.trim().length)return e}return document.body}function Le(e){if(!e)return\"\";let t=e;try{t=decodeURIComponent(t.replace(/\+/g,\" \"))}catch(t){}const n=document.createElement(\"textarea\");return n.innerHTML=Te%3FTe.createHTML(t):t,t=n.value,t}function Ce(e){function t(e){if(!e)return\"\";if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.trim().replace(/\s+/g,\" \");return Le(t)}if(e.nodeType!==Node.ELEMENT_NODE)return\"\";const t=e.tagName.toLowerCase();if([\"script\",\"style\",\"noscript\",\"iframe\",\"svg\",\"nav\",\"header\",\"footer\"].includes(t))return\"\";if(\"ytd-transcript-segment-renderer\"===t||e.classList%26%26e.classList.contains(\"segment-timestamp\")||e.classList%26%26e.classList.contains(\"segment-text\")){const t=e.querySelector(\".segment-timestamp\"),n=e.querySelector(\".segment-text\");if(t%26%26n){const e=Le(t.textContent.trim()),i=Le(n.textContent.trim());return`${e} ${i}\n`}}const d=window.getComputedStyle(e),l=\"block\"===d.display||\"flex\"===d.display||\"grid\"===d.display||\"list-item\"===d.display;switch(t){case\"h1\":return`%23 ${n(e).trim()}\n\n`;case\"h2\":return`%23%23 ${n(e).trim()}\n\n`;case\"h3\":return`%23%23%23 ${n(e).trim()}\n\n`;case\"h4\":return`%23%23%23%23 ${n(e).trim()}\n\n`;case\"h5\":return`%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"h6\":return`%23%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"p\":case\"div\":const t=n(e).trim();return t%3Fl%3F`${t}\n\n`:t+\" \":\"\";case\"br\":return\"\n\";case\"ul\":return i(e,\"*\")+\"\n\";case\"ol\":return i(e,\"1.\")+\"\n\";case\"li\":return n(e).trim()+\"\n\";case\"a\":const d=Le(e.getAttribute(\"href\")||\"\");return`[${n(e).trim()}](${d})`;case\"img\":const r=Le(e.getAttribute(\"src\")||\"\"),a=Le(e.getAttribute(\"alt\")||\"\");return`![${a}](${r})\n\n`;case\"code\":case\"pre\":return`\`${n(e).trim()}\``;case\"blockquote\":return`> ${n(e).trim()}\n\n`;case\"strong\":case\"b\":return`**${n(e)}**`;case\"em\":case\"i\":return`*${n(e)}*`;case\"span\":return n(e);default:const o=n(e).trim();return o%3Fl%3F`${o}\n\n`:o+\" \":\"\";}}function n(e){let n=\"\";return e.childNodes.forEach(e=>{n+=t(e)}),n}function i(e,t){let i=\"\";const d=e.querySelectorAll(\":scope > li\");return d.forEach((e,d)=>{const l=\"1.\"===t%3F`${d+1}. `:`${t} `;i+=`${l}${n(e).trim()}\n`}),i}if(!e)return\"\";let d=\"\";return d=t(e),d.replace(/\n{3,}/g,\"\n\n\").trim()}function we(e,t,n){let i=document.title.replace(/[^a-z0-9]/gi,\"-\").toLowerCase()||\"content\",d=\".txt\",l=\"text/plain\";\"markdown\"===n%3F(d=\".md\",l=\"text/markdown\"):(\"json\"==n||\"structure\"==n)%26%26(d=\".json\",l=\"application/json\",e=JSON.stringify(e,null,2));const r=new Blob([e],{type:l}),o=URL.createObjectURL(r),s=document.createElement(\"a\");s.href=Te%3FTe.createScriptURL(o):o,s.download=`${i}${d}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}function Ne(){const e={pageInfo:{title:document.title,url:window.location.href},frameworks:Me.framework,selectedElement:Me.selectedElement%3Fu(Me.selectedElement):null};we(e,\"analysis-report\",\"json\")}function Ie(){const e=document.getElementById(\"html-analyzer-tool\");e%26%26e.remove(),D(),de(),document.querySelectorAll(\".element-highlight, .event-highlight, .accessibility-highlight, .z-index-highlighter\").forEach(e=>e.remove());const t=document.querySelector(\"style[data-analyzer-tool]\");t%26%26t.remove()}function Ae(e,t=50,n=100){function i(){document.body%3Fe():d<t%3F(d++,setTimeout(i,n)):console.error(\"Failed to initialize: document.body not available after retries\")}let d=0;i()}function qe(){i()||(console.error(\"Failed to append styles, retrying...\"),setTimeout(()=>i(),100)),Ae(()=>{try{L(),setTimeout(()=>{X(\"HTML Structure Analyzer ready! Click \\"Select Element\\" to begin inspection.\",3e3)},500)}catch(t){console.error(\"Failed to initialize tool:\",t)}})}const Be=document.createElement(\"style\");Be.textContent=` :root { --bg-color: %231a1a1a; --text-color: %23e0e0e0; --border-color: %23404040; --button-bg: %232d2d2d; --button-hover: %233d3d3d; --primary-bg: %234a90e2; --primary-hover: %233b7dd8; --secondary-bg: %236c757d; --secondary-hover: %235a6268; --success-bg: %2328a745; --success-hover: %23218838; --danger-bg: %23e25c5c; --danger-hover: %23d44b4b; --warning-bg: %23ffc107; --warning-hover: %23e0a800; --info-bg: %2317a2b8; --info-hover: %23138496; --preview-bg: %232d2d2d; --preview-header-bg: %231a1a1a; --preview-border: %23404040; --highlight-border: rgba(255, 87, 34, 0.8); --highlight-bg: rgba(255, 87, 34, 0.2); --tab-active-bg: %233d3d3d; --z-index-highlight: rgba(0, 255, 0, 0.4); } %23html-analyzer-tool { position: fixed; top: 20px; right: 20px; background: var(--bg-color); border: 1px solid var(--border-color); border-radius: 8px; padding: 15px; width: 400px; height: calc(100vh - 40px); overflow-y: auto; box-shadow: 0 2px 10px rgba(0,0,0,0.2); z-index: 9999; font-family: Arial, sans-serif; color: var(--text-color); resize: both; overflow: auto; min-width: 250px; min-height: 200px; } %23html-analyzer-tool h3 { margin-top: 0; margin-bottom: 15px; font-size: 16px; color: var(--text-color); cursor: move; user-select: none; } %23html-analyzer-tool button { display: block; width: 100%25; padding: 8px; margin-bottom: 8px; background: var(--button-bg); border: 1px solid var(--border-color); border-radius: 4px; cursor: pointer; font-size: 14px; transition: background 0.2s; color: var(--text-color); } %23html-analyzer-tool button:hover { background: var(--button-hover); } %23html-analyzer-tool button.primary { background: var(--primary-bg); color: white; border: 1px solid var(--primary-hover); } %23html-analyzer-tool button.primary:hover { background: var(--primary-hover); } %23html-analyzer-tool button.secondary { background: var(--secondary-bg); color: white; border: 1px solid var(--secondary-hover); } %23html-analyzer-tool button.secondary:hover { background: var(--secondary-hover); } %23html-analyzer-tool button.success { background: var(--success-bg); color: white; border: 1px solid var(--success-hover); } %23html-analyzer-tool button.success:hover { background: var(--success-hover); } %23html-analyzer-tool button.danger { background: var(--danger-bg); color: white; border: 1px solid var(--danger-hover); } %23html-analyzer-tool button.danger:hover { background: var(--danger-hover); } %23html-analyzer-tool button.warning { background: var(--warning-bg); color: black; border: 1px solid var(--warning-hover); } %23html-analyzer-tool button.warning:hover { background: var(--warning-hover); } %23html-analyzer-tool button.info { background: var(--info-bg); color: white; border: 1px solid var(--info-hover); } %23html-analyzer-tool button.info:hover { background: var(--info-hover); } %23html-analyzer-tool .button-group { display: flex; gap: 5px; margin-bottom: 8px; } %23html-analyzer-tool .button-group button { margin-bottom: 0; } %23html-analyzer-tool .tab-container { margin-top: 10px; } %23html-analyzer-tool .tab-buttons { display: flex; border-bottom: 1px solid var(--border-color); margin-bottom: 10px; } %23html-analyzer-tool .tab-button { padding: 8px 12px; border: none; background: none; cursor: pointer; border-radius: 4px 4px 0 0; margin-right: 2px; margin-bottom: 0; } %23html-analyzer-tool .tab-button.active { background: var(--tab-active-bg); border: 1px solid var(--border-color); border-bottom: none; } %23html-analyzer-tool .tab-content { display: none; } %23html-analyzer-tool .tab-content.active { display: block; } %23preview-overlay { position: fixed; top: 0; left: 0; right: 0; bottom: 0; background: rgba(0,0,0,0.7); z-index: 10000; display: flex; justify-content: center; align-items: center; } %23preview-container { width: 80%25; height: 80%25; background: var(--preview-bg); border-radius: 8px; display: flex; flex-direction: column; overflow: hidden; resize: both; } %23preview-header { display: flex; justify-content: space-between; align-items: center; padding: 10px 15px; background: var(--preview-header-bg); border-bottom: 1px solid var(--preview-border); } %23preview-content { flex-grow: 1; padding: 15px; overflow-y: auto; white-space: pre-wrap; font-family: monospace; font-size: 13px; line-height: 1.4; color: var(--text-color); } %23preview-tabs { display: flex; background: var(--preview-header-bg); border-bottom: 1px solid var(--preview-border); } %23preview-tabs button { padding: 8px 15px; border: none; background: none; cursor: pointer; } %23preview-tabs button.active { background: var(--preview-bg); border-bottom: 2px solid var(--primary-bg); } %23preview-actions { padding: 10px 15px; background: var(--preview-header-bg); border-top: 1px solid var(--preview-border); display: flex; justify-content: flex-end; } %23preview-actions button { padding: 8px 15px; margin-left: 10px; border-radius: 4px; cursor: pointer; } .element-highlight { outline: 2px solid var(--highlight-border) !important; background-color: var(--highlight-bg) !important; position: relative; } .element-label { position: absolute; top: 0; left: 0; background: var(--primary-bg); color: white; font-size: 12px; padding: 2px 5px; border-radius: 2px; z-index: 10001; pointer-events: none; } .z-index-highlighter { position: absolute; background: var(--z-index-highlight); pointer-events: none; z-index: 10001; } .tooltip { position: fixed; background: var(--bg-color); border: 1px solid var(--border-color); padding: 8px; border-radius: 4px; font-size: 12px; max-width: 300px; z-index: 10002; box-shadow: 0 2px 8px rgba(0,0,0,0.2); } .tooltip pre { margin: 0; white-space: pre-wrap; font-family: monospace; font-size: 11px; } .accessibility-highlight { outline: 2px dashed %239c27b0 !important; } .event-highlight { outline: 2px dashed %23ff9800 !important; } .breadcrumb-trail { display: flex; flex-wrap: wrap; padding: 5px; margin-bottom: 10px; background: var(--button-bg); border-radius: 4px; font-size: 12px; } .breadcrumb-item { margin-right: 5px; cursor: pointer; color: var(--primary-bg); } .breadcrumb-item:not(:last-child)::after { content: \">\"; margin-left: 5px; color: var(--text-color); } .breadcrumb-item:hover { text-decoration: underline; } .element-tree { font-family: monospace; font-size: 12px; line-height: 1.5; } .tree-item { padding-left: 15px; border-left: 1px dotted var(--border-color); margin-left: 5px; margin-bottom: 3px; } .tree-item-label { cursor: pointer; } .tree-item-label:hover { text-decoration: underline; color: var(--primary-bg); } .tree-toggler { display: inline-block; width: 16px; text-align: center; cursor: pointer; } .property-list { border: 1px solid var(--border-color); border-radius: 4px; margin-top: 10px; margin-bottom: 10px; max-height: 200px; overflow-y: auto; } .property-item { display: flex; padding: 5px; border-bottom: 1px solid var(--border-color); } .property-name { font-weight: bold; width: 30%25; } .property-value { width: 70%25; word-break: break-word; } .search-container { margin-bottom: 10px; } .search-input { width: 100%25; padding: 8px; border: 1px solid var(--border-color); border-radius: 4px; background: var(--bg-color); color: var(--text-color); } .search-results { margin-top: 5px; max-height: 150px; overflow-y: auto; border: 1px solid var(--border-color); border-radius: 4px; padding: 5px; } .search-result-item { padding: 3px; cursor: pointer; border-bottom: 1px solid var(--border-color); } .search-result-item:hover { background: var(--button-hover); } .code-snippet { background: %23f5f5f5; border: 1px solid %23ddd; border-radius: 4px; padding: 10px; margin: 10px 0; font-family: monospace; white-space: pre-wrap; overflow-x: auto; } [data-theme=\"dark\"] .code-snippet { background: %232d2d2d; border-color: %23444; } .inspector-section { margin-bottom: 15px; border-bottom: 1px solid var(--border-color); padding-bottom: 10px; } .inspector-section-title { font-weight: bold; margin-bottom: 5px; } .badge { display: inline-block; padding: 2px 6px; border-radius: 10px; font-size: 11px; margin-right: 5px; margin-bottom: 5px; color: white; } .badge-primary { background: var(--primary-bg); } .badge-secondary { background: var(--secondary-bg); } .badge-success { background: var(--success-bg); } .badge-danger { background: var(--danger-bg); } .badge-warning { background: var(--warning-bg); color: black; } .badge-info { background: var(--info-bg); } `;let Te=null;if(window.trustedTypes%26%26trustedTypes.createPolicy)try{Te=trustedTypes.createPolicy(\"html-analyzer-tool\",{createHTML:e=>e,createScriptURL:e=>e,createScript:e=>e})}catch(t){console.warn(\"Failed to create Trusted Types policy:\",t)}let Me={selectedElement:null,hoveredElement:null,extractedMarkdown:\"\",inspectedElements:[],breadcrumbTrail:[],highlightedElements:[],eventListeners:{},analyzedStructure:null,framework:r(),visualMode:\"normal\",activeTab:\"inspector\",previewActiveTab:\"markdown\",isInspecting:!1,isResizing:!1,isMoving:!1,moveOffset:{x:0,y:0},elementSearchResults:[],inspectionHistory:[]};return\"loading\"===document.readyState%3Fdocument.addEventListener(\"DOMContentLoaded\",qe):qe(),{selectElement:ne,highlightElement:ie,generateUniqueSelector:u,findEventListeners:f,analyzeDOM:x,close:Ie}})()}();"
  },
  {
    "name": "Extract JSONs",
    "description": "Scans the page for JSON objects and arrays, extracts them, and allows copying or downloading",
    "file": "ExtractJsons.js",
    "icon": "ðŸ“‹",
    "code": "javascript:(function()%7Bjavascript%3A(function() %7B%0A %2F%2F --- Configuration ---%0A const SIDEBAR_ID %3D 'json-extractor-sidebar-v3'%3B%0A const SIDEBAR_WIDTH %3D '380px'%3B%0A const HIGHLIGHT_CLASS %3D 'json-extractor-rainbow-highlight'%3B%0A const NOTIFICATION_TIMEOUT %3D 2500%3B%0A%0A %2F%2F --- Check if sidebar already exists ---%0A if (document.getElementById(SIDEBAR_ID)) %7B%0A document.getElementById(SIDEBAR_ID).remove()%3B%0A document.body.style.marginRight %3D ''%3B%0A document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> el.classList.remove(HIGHLIGHT_CLASS))%3B%0A const existingStyle %3D document.querySelector('%23json-extractor-styles')%3B%0A if (existingStyle) existingStyle.remove()%3B%0A const existingBadge %3D document.getElementById('json-extractor-badge')%3B%0A if (existingBadge) existingBadge.remove()%3B%0A return%3B%0A %7D%0A%0A %2F%2F --- State Variables ---%0A let isSelecting %3D false%3B%0A let capturedData %3D %5B%5D%3B%0A let originalCursor %3D document.body.style.cursor%3B%0A let highlightedElement %3D null%3B%0A let mouseMoveThrottle %3D null%3B%0A%0A %2F%2F --- Inject CSS for Rainbow Highlight and Notifications ---%0A const styleElement %3D document.createElement('style')%3B%0A styleElement.id %3D 'json-extractor-styles'%3B%0A styleElement.textContent %3D %60%0A %40keyframes rainbow-glow-animation %7B%0A 0%25 %7B %0A outline-color%3A hsl(0%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(0%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(0%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(0%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A 17%25 %7B %0A outline-color%3A hsl(60%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(60%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(60%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(60%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A 33%25 %7B %0A outline-color%3A hsl(120%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(120%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(120%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(120%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A 50%25 %7B %0A outline-color%3A hsl(180%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(180%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(180%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(180%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A 67%25 %7B %0A outline-color%3A hsl(240%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(240%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(240%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(240%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A 83%25 %7B %0A outline-color%3A hsl(300%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(300%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(300%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(300%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A 100%25 %7B %0A outline-color%3A hsl(360%2C 100%25%2C 65%25)%3B %0A box-shadow%3A %0A 0 0 8px 3px hsl(360%2C 100%25%2C 70%25)%2C %0A 0 0 16px 6px hsla(360%2C 100%25%2C 65%25%2C 0.7)%2C %0A 0 0 24px 8px hsla(360%2C 100%25%2C 60%25%2C 0.5)%3B%0A %7D%0A %7D%0A .%24%7BHIGHLIGHT_CLASS%7D %7B%0A outline%3A 3px solid hsl(0%2C 100%25%2C 65%25) !important%3B%0A outline-offset%3A 2px !important%3B%0A animation%3A rainbow-glow-animation 2.5s linear infinite !important%3B%0A background-color%3A rgba(100%2C 150%2C 255%2C 0.05) !important%3B%0A cursor%3A crosshair !important%3B%0A position%3A relative !important%3B %0A z-index%3A 999998 !important%3B %0A transition%3A all 0.2s ease-in-out !important%3B%0A pointer-events%3A auto !important%3B%0A %7D%0A .%24%7BHIGHLIGHT_CLASS%7D%3Ahover %7B%0A background-color%3A rgba(100%2C 150%2C 255%2C 0.1) !important%3B%0A %7D%0A %23json-extractor-notification %7B%0A position%3A fixed%3B%0A top%3A 20px%3B%0A left%3A 50%25%3B%0A transform%3A translateX(-50%25)%3B%0A background-color%3A %23333%3B%0A color%3A white%3B%0A padding%3A 12px 25px%3B%0A border-radius%3A 8px%3B%0A z-index%3A 1000001%3B%0A font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A font-size%3A 14px%3B%0A box-shadow%3A 0 5px 15px rgba(0%2C0%2C0%2C0.3)%3B%0A opacity%3A 0%3B%0A transition%3A opacity 0.3s ease-in-out%2C top 0.3s ease-in-out%3B%0A pointer-events%3A none%3B%0A %7D%0A %23json-extractor-notification.show %7B%0A opacity%3A 1%3B%0A top%3A 30px%3B%0A %7D%0A %23json-extractor-notification.success %7B%0A background-color%3A %234CAF50%3B%0A %7D%0A %23json-extractor-notification.error %7B%0A background-color%3A %23F44336%3B%0A %7D%0A %23json-extractor-notification.info %7B%0A background-color%3A %232196F3%3B%0A %7D%0A %23json-extractor-badge %7B%0A position%3A fixed%3B%0A background%3A rgba(0%2C 0%2C 0%2C 0.8)%3B%0A color%3A white%3B%0A padding%3A 4px 8px%3B%0A border-radius%3A 12px%3B%0A font-size%3A 11px%3B%0A font-weight%3A 600%3B%0A z-index%3A 1000002%3B%0A pointer-events%3A none%3B%0A opacity%3A 0%3B%0A transition%3A opacity 0.2s ease-in-out%3B%0A font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A white-space%3A nowrap%3B%0A box-shadow%3A 0 2px 8px rgba(0%2C0%2C0%2C0.3)%3B%0A %7D%0A %23json-extractor-badge.show %7B%0A opacity%3A 1%3B%0A %7D%0A %60%3B%0A document.head.appendChild(styleElement)%3B%0A%0A %2F%2F --- Create Sidebar ---%0A const sidebar %3D document.createElement('div')%3B%0A sidebar.id %3D SIDEBAR_ID%3B%0A sidebar.style.cssText %3D %60%0A position%3A fixed%3B%0A top%3A 0%3B%0A right%3A 0%3B%0A width%3A %24%7BSIDEBAR_WIDTH%7D%3B%0A height%3A 100vh%3B%0A background%3A %23282c34%3B%0A color%3A %23abb2bf%3B%0A z-index%3A 999999%3B%0A font-family%3A 'Inter'%2C 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A font-size%3A 14px%3B%0A overflow-y%3A auto%3B%0A box-shadow%3A -8px 0 25px rgba(0%2C0%2C0%2C0.5)%3B%0A border-left%3A 4px solid %2361afef%3B%0A pointer-events%3A auto%3B%0A display%3A flex%3B%0A flex-direction%3A column%3B%0A transition%3A transform 0.3s ease-in-out%3B%0A %60%3B%0A%0A %2F%2F --- Create Sidebar Content ---%0A sidebar.innerHTML %3D %60%0A <div style%3D\"padding%3A 25px%3B border-bottom%3A 1px solid %233b4048%3B\">%0A <h3 style%3D\"margin%3A 0 0 20px 0%3B color%3A %2361afef%3B font-size%3A 20px%3B font-weight%3A 600%3B\">%0A <svg xmlns%3D\"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\" viewBox%3D\"0 0 24 24\" fill%3D\"currentColor\" style%3D\"width%3A24px%3B height%3A24px%3B vertical-align%3Amiddle%3B margin-right%3A8px%3B\">%0A <path d%3D\"M12 2.5a.75.75 0 0 1 .75.75v2.518l4.08 2.04a.75.75 0 0 1-.03 1.33l-4.3 2.15a.75.75 0 0 1-.5 0l-4.3-2.15a.75.75 0 0 1-.03-1.33L11.25 5.768V3.25a.75.75 0 0 1 .75-.75ZM11.25 13.617v2.633a.75.75 0 0 0 .5.715l4.3 2.15a.75.75 0 0 0 .97-.031.75.75 0 0 0 .03-.97l-4.08-2.04a.75.75 0 0 0-.72-.017Zm1.5 0-.72.017a.75.75 0 0 1-.72-.017L7.23 11.58a.75.75 0 0 0 .03.97.75.75 0 0 0 .97.03l4.3-2.15a.75.75 0 0 0 .5-.715v-2.633Z\" %2F>%0A <path fill-rule%3D\"evenodd\" d%3D\"M22.5 12c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5c1.836 0 3.562.462 5.074 1.286a.75.75 0 0 1-.6 1.372A9.004 9.004 0 0 0 12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9h-2.25a.75.75 0 0 1 0-1.5H22.5Z\" clip-rule%3D\"evenodd\" %2F>%0A <%2Fsvg>%0A JSON Data Extractor%0A <%2Fh3>%0A <div style%3D\"display%3A grid%3B grid-template-columns%3A 1fr 1fr%3B gap%3A 12px%3B\">%0A <button id%3D\"start-selection-btn\" class%3D\"sidebar-btn primary\">ðŸŽ¯ Start Selecting<%2Fbutton>%0A <button id%3D\"clear-data-btn\" class%3D\"sidebar-btn danger\">ðŸ—‘%EF%B8%8F Clear All<%2Fbutton>%0A <button id%3D\"copy-json-btn\" class%3D\"sidebar-btn info\">ðŸ“‹ Copy JSON<%2Fbutton>%0A <button id%3D\"copy-items-btn\" class%3D\"sidebar-btn info\">ðŸ“„ Copy Items<%2Fbutton>%0A <button id%3D\"export-json-btn\" class%3D\"sidebar-btn success\">ðŸ’¾ Download JSON<%2Fbutton>%0A <%2Fdiv>%0A <button id%3D\"close-sidebar-btn\" class%3D\"sidebar-btn secondary\" style%3D\"width%3A100%25%3B margin-top%3A12px%3B\">âŒ Close Extractor<%2Fbutton>%0A <div id%3D\"selection-status-msg\" style%3D\"margin-top%3A 15px%3B padding%3A 10px%3B background%3A %233b4048%3B border-radius%3A 6px%3B font-size%3A 13px%3B display%3A none%3B text-align%3A center%3B\">%0A Click an element to capture data. Press <kbd style%3D\"background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B\">ESC<%2Fkbd> to stop.%0A <%2Fdiv>%0A <%2Fdiv>%0A%0A <div style%3D\"padding%3A 20px%3B flex-grow%3A 1%3B display%3A flex%3B flex-direction%3A column%3B min-height%3A 0%3B\">%0A <div style%3D\"margin-bottom%3A 15px%3B\">%0A <label for%3D\"extraction-mode-select\" style%3D\"display%3A block%3B margin-bottom%3A 8px%3B font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Extraction Mode%3A<%2Flabel>%0A <select id%3D\"extraction-mode-select\" class%3D\"sidebar-select\">%0A <option value%3D\"partialJSON\" selected>Best-Effort JSON Parts<%2Foption>%0A <option value%3D\"textContent\">Text Content<%2Foption>%0A <option value%3D\"innerHTML\">Inner HTML<%2Foption>%0A <option value%3D\"attributes\">All Attributes<%2Foption>%0A <option value%3D\"dataset\">Data Attributes (data-*)<%2Foption>%0A <option value%3D\"computed\">Key Computed Styles<%2Foption>%0A <option value%3D\"custom\">Attempt Custom JSON<%2Foption>%0A <%2Fselect>%0A <%2Fdiv>%0A <div style%3D\"display%3A flex%3B justify-content%3A space-between%3B align-items%3A center%3B margin-bottom%3A 10px%3B\">%0A <span style%3D\"font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Captured Items%3A <span id%3D\"item-count-display\">0<%2Fspan><%2Fspan>%0A <span style%3D\"font-size%3A 12px%3B color%3A %239da5b4%3B\">Size%3A <span id%3D\"data-size-display\">0 KB<%2Fspan><%2Fspan>%0A <%2Fdiv>%0A <div style%3D\"background%3A %2321252b%3B border-radius%3A 6px%3B padding%3A 15px%3B flex-grow%3A 1%3B overflow-y%3A auto%3B border%3A 1px solid %233b4048%3B min-height%3A 150px%3B\">%0A <pre id%3D\"json-output-display\" style%3D\"margin%3A 0%3B font-family%3A 'Fira Code'%2C 'Courier New'%2C monospace%3B font-size%3A 12.5px%3B white-space%3A pre-wrap%3B word-break%3A break-all%3B color%3A %23d19a66%3B\">No data captured yet...<%2Fpre>%0A <%2Fdiv>%0A <%2Fdiv>%0A <style>%0A .sidebar-btn %7B background%3A %234b5263%3B color%3A %23d4d7dd%3B border%3A none%3B padding%3A 10px 15px%3B border-radius%3A 6px%3B cursor%3A pointer%3B font-size%3A 13px%3B font-weight%3A 500%3B transition%3A background-color 0.2s%2C transform 0.1s%3B text-align%3A center%3B %7D%0A .sidebar-btn%3Ahover %7B background%3A %235c6370%3B %7D%0A .sidebar-btn%3Aactive %7B transform%3A scale(0.98)%3B %7D%0A .sidebar-btn.primary %7B background%3A %2361afef%3B color%3A %23282c34%3B %7D%0A .sidebar-btn.primary%3Ahover %7B background%3A %23529bda%3B %7D%0A .sidebar-btn.danger %7B background%3A %23e06c75%3B color%3A %23282c34%3B %7D%0A .sidebar-btn.danger%3Ahover %7B background%3A %23c95f69%3B %7D%0A .sidebar-btn.info %7B background%3A %2356b6c2%3B color%3A %23282c34%3B %7D%0A .sidebar-btn.info%3Ahover %7B background%3A %234aa7b3%3B %7D%0A .sidebar-btn.success %7B background%3A %2398c379%3B color%3A %23282c34%3B %7D%0A .sidebar-btn.success%3Ahover %7B background%3A %2389b16c%3B %7D%0A .sidebar-btn.secondary %7B background%3A %233b4048%3B color%3A %23abb2bf%3B %7D%0A .sidebar-btn.secondary%3Ahover %7B background%3A %23454c58%3B %7D%0A .sidebar-select %7B width%3A 100%25%3B padding%3A 10px%3B border-radius%3A 6px%3B background%3A %233b4048%3B color%3A %23abb2bf%3B border%3A 1px solid %23454c58%3B font-size%3A 13px%3B %7D%0A %23%24%7BSIDEBAR_ID%7D kbd %7B background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B border%3A 1px solid %237d8590%3B box-shadow%3A 1px 1px 1px rgba(0%2C0%2C0%2C0.2)%3B %7D%0A <%2Fstyle>%0A %60%3B%0A document.body.appendChild(sidebar)%3B%0A document.body.style.marginRight %3D SIDEBAR_WIDTH%3B%0A%0A %2F%2F --- Helper Functions ---%0A function showNotification(message%2C type %3D 'info'%2C duration %3D NOTIFICATION_TIMEOUT) %7B%0A let notification %3D document.getElementById('json-extractor-notification')%3B%0A if (!notification) %7B%0A notification %3D document.createElement('div')%3B%0A notification.id %3D 'json-extractor-notification'%3B%0A document.body.appendChild(notification)%3B%0A %7D%0A notification.textContent %3D message%3B%0A notification.className %3D %60show %24%7Btype%7D%60%3B %0A setTimeout(() %3D> %7B%0A notification.className %3D notification.className.replace('show'%2C '').trim()%3B%0A %7D%2C duration)%3B%0A %7D%0A%0A function createBadge() %7B%0A let badge %3D document.getElementById('json-extractor-badge')%3B%0A if (!badge) %7B%0A badge %3D document.createElement('div')%3B%0A badge.id %3D 'json-extractor-badge'%3B%0A document.body.appendChild(badge)%3B%0A %7D%0A return badge%3B%0A %7D%0A%0A function countJsonComponents(element%2C mode) %7B%0A if (!element) return 0%3B%0A %0A try %7B%0A const rawText %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A %0A %2F%2F Skip counting for very large text to prevent hanging%0A if (rawText.length > 50000) return 0%3B%0A %0A switch (mode) %7B%0A case 'textContent'%3A%0A case 'innerHTML'%3A%0A case 'attributes'%3A%0A case 'dataset'%3A%0A case 'computed'%3A%0A return 1%3B %2F%2F These modes always return 1 object%0A %0A case 'custom'%3A%0A try %7B%0A JSON.parse(rawText)%3B%0A return 1%3B%0A %7D catch (e) %7B%0A let count %3D 0%3B%0A for (let attr of element.attributes) %7B%0A if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A try %7B%0A JSON.parse(attr.value)%3B%0A count%2B%2B%3B%0A %7D catch (e2) %7B%0A %2F%2F Invalid JSON%2C don't count%0A %7D%0A %7D%0A %7D%0A return count%3B%0A %7D%0A %0A case 'partialJSON'%3A%0A %2F%2F Simplified counting to avoid hanging - just count likely JSON objects%0A try %7B%0A const parsedOuter %3D JSON.parse(rawText)%3B%0A if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A %2F%2F Just return 1 for input%2Foutput structure to avoid complex parsing during hover%0A return 1%3B%0A %7D%0A %7D catch (outerParseError) %7B%0A %2F%2F Fall through to simple greedy count%0A %7D%0A %0A %2F%2F Simple count of JSON-like structures without full parsing%0A const jsonObjects %3D (rawText.match(%2F%5C%7B%5B%5E%7B%7D%5D*%5C%7D%2Fg) %7C%7C %5B%5D).length%3B%0A const jsonArrays %3D (rawText.match(%2F%5C%5B%5B%5E%5C%5B%5C%5D%5D*%5C%5D%2Fg) %7C%7C %5B%5D).length%3B%0A return jsonObjects %2B jsonArrays%3B%0A %0A default%3A%0A return 0%3B%0A %7D%0A %7D catch (e) %7B%0A return 0%3B%0A %7D%0A %7D%0A%0A function showBadge(count%2C x%2C y) %7B%0A const badge %3D createBadge()%3B%0A if (count > 0) %7B%0A badge.textContent %3D %60%24%7Bcount%7D JSON%24%7Bcount %3D%3D%3D 1 %3F '' %3A 's'%7D%60%3B%0A badge.style.left %3D (x %2B 15) %2B 'px'%3B%0A badge.style.top %3D (y - 25) %2B 'px'%3B%0A badge.classList.add('show')%3B%0A %7D else %7B%0A badge.classList.remove('show')%3B%0A %7D%0A %7D%0A%0A function hideBadge() %7B%0A const badge %3D document.getElementById('json-extractor-badge')%3B%0A if (badge) %7B%0A badge.classList.remove('show')%3B%0A %7D%0A %7D%0A%0A %2F%2F Modern clipboard copy function%0A async function copyToClipboard(text) %7B%0A try %7B%0A if (navigator.clipboard %26%26 window.isSecureContext) %7B%0A await navigator.clipboard.writeText(text)%3B%0A return true%3B%0A %7D else %7B%0A %2F%2F Fallback for older browsers or non-secure contexts%0A const textarea %3D document.createElement('textarea')%3B%0A textarea.value %3D text%3B%0A textarea.style.position %3D 'fixed'%3B%0A textarea.style.left %3D '-999999px'%3B%0A textarea.style.top %3D '-999999px'%3B%0A document.body.appendChild(textarea)%3B%0A textarea.focus()%3B%0A textarea.select()%3B%0A const result %3D document.execCommand('copy')%3B%0A document.body.removeChild(textarea)%3B%0A return result%3B%0A %7D%0A %7D catch (err) %7B%0A console.error('Copy failed%3A'%2C err)%3B%0A return false%3B%0A %7D%0A %7D%0A%0A function repairJsonStringLiterals(jsonString) %7B%0A let repaired %3D ''%3B%0A let inString %3D false%3B%0A let escapeNext %3D false%3B%0A%0A for (let i %3D 0%3B i < jsonString.length%3B i%2B%2B) %7B%0A const char %3D jsonString%5Bi%5D%3B%0A if (escapeNext) %7B%0A repaired %2B%3D char%3B%0A escapeNext %3D false%3B%0A continue%3B%0A %7D%0A if (char %3D%3D%3D '%5C%5C') %7B%0A repaired %2B%3D char%3B%0A escapeNext %3D true%3B%0A continue%3B%0A %7D%0A if (char %3D%3D%3D '\"') %7B%0A inString %3D !inString%3B%0A repaired %2B%3D char%3B%0A continue%3B%0A %7D%0A if (inString) %7B%0A if (char %3D%3D%3D '%5Cn') repaired %2B%3D '%5C%5Cn'%3B%0A else if (char %3D%3D%3D '%5Cr') repaired %2B%3D '%5C%5Cr'%3B%0A else if (char %3D%3D%3D '%5Ct') repaired %2B%3D '%5C%5Ct'%3B%0A else repaired %2B%3D char%3B%0A %7D else %7B%0A repaired %2B%3D char%3B%0A %7D%0A %7D%0A return repaired%3B%0A %7D%0A%0A function flattenUnnecessaryArrays(data) %7B%0A %2F%2F Simple single-level flatten to avoid infinite loops%0A %2F%2F Only flatten if it's an array with exactly 1 element that is also an array%0A if (Array.isArray(data) %26%26 data.length %3D%3D%3D 1 %26%26 Array.isArray(data%5B0%5D)) %7B%0A return data%5B0%5D%3B%0A %7D%0A return data%3B%0A %7D%0A%0A function extractGreedyJson(text) %7B%0A const results %3D %5B%5D%3B%0A let remainingText %3D text.trim()%3B%0A %0A while (remainingText.length > 0) %7B%0A let foundThisIteration %3D false%3B%0A let firstJsonCharIndex %3D -1%3B%0A%0A for (let i %3D 0%3B i < remainingText.length%3B i%2B%2B) %7B%0A if (remainingText%5Bi%5D %3D%3D%3D '%7B' %7C%7C remainingText%5Bi%5D %3D%3D%3D '%5B') %7B%0A firstJsonCharIndex %3D i%3B%0A break%3B%0A %7D%0A %7D%0A%0A if (firstJsonCharIndex %3D%3D%3D -1) break%3B %0A%0A const textToParse %3D remainingText.substring(firstJsonCharIndex)%3B%0A%0A for (let i %3D 1%3B i <%3D textToParse.length%3B i%2B%2B) %7B%0A const segment %3D textToParse.substring(0%2C i)%3B%0A %0A if ((segment.startsWith('%7B') %26%26 segment.endsWith('%7D')) %7C%7C (segment.startsWith('%5B') %26%26 segment.endsWith('%5D'))) %7B%0A try %7B%0A JSON.parse(segment)%3B%0A results.push(segment)%3B%0A remainingText %3D textToParse.substring(i)%3B %0A foundThisIteration %3D true%3B%0A break%3B %0A %7D catch (e) %7B%0A try %7B%0A const repairedSegment %3D repairJsonStringLiterals(segment)%3B%0A if (repairedSegment !%3D%3D segment) %7B%0A JSON.parse(repairedSegment)%3B%0A results.push(repairedSegment)%3B%0A remainingText %3D textToParse.substring(i)%3B%0A foundThisIteration %3D true%3B%0A break%3B %0A %7D%0A %7D catch (e2) %7B%0A %2F%2F Continue extending segment%0A %7D%0A %7D%0A %7D%0A %7D%0A %0A if (!foundThisIteration) %7B%0A remainingText %3D remainingText.substring(firstJsonCharIndex %2B 1)%3B%0A %7D%0A %7D%0A return results%3B%0A %7D%0A%0A function extractJSON(element%2C mode) %7B%0A const timestamp %3D new Date().toISOString()%3B%0A const commonData %3D %7B%0A selector%3A getSelector(element)%2C%0A tag%3A element.tagName.toLowerCase()%2C%0A timestamp%3A timestamp%0A %7D%3B%0A const rawTextForPartial %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A%0A switch (mode) %7B%0A case 'textContent'%3A%0A return %7B ...commonData%2C textContent%3A rawTextForPartial %7D%3B%0A case 'innerHTML'%3A%0A return %7B ...commonData%2C innerHTML%3A element.innerHTML %7D%3B%0A case 'attributes'%3A%0A let attrs %3D %7B%7D%3B%0A for (let attr of element.attributes) attrs%5Battr.name%5D %3D attr.value%3B%0A return %7B ...commonData%2C attributes%3A attrs %7D%3B%0A case 'dataset'%3A%0A return %7B ...commonData%2C dataset%3A %7B ...element.dataset %7D %7D%3B%0A case 'computed'%3A%0A let styles %3D window.getComputedStyle(element)%3B%0A let computedStyles %3D %7B%7D%3B%0A %5B'display'%2C 'position'%2C 'width'%2C 'height'%2C 'color'%2C 'background-color'%2C 'font-size'%2C 'font-family'%2C 'font-weight'%2C 'margin'%2C 'padding'%2C 'border'%2C 'opacity'%2C 'visibility'%2C 'z-index'%2C 'overflow'%2C 'text-align'%2C 'line-height'%5D.forEach(prop %3D> %7B%0A computedStyles%5Bprop%5D %3D styles.getPropertyValue(prop)%3B%0A %7D)%3B%0A return %7B ...commonData%2C computedStyles%3A computedStyles %7D%3B%0A case 'custom'%3A %0A let jsonText %3D rawTextForPartial%3B%0A try %7B%0A const parsedText %3D JSON.parse(jsonText)%3B%0A return %7B ...commonData%2C source%3A 'textContent'%2C parsedJSON%3A parsedText %7D%3B%0A %7D catch (e) %7B%0A let jsonAttrs %3D %7B%7D%3B%0A let foundInDataAttr %3D false%3B%0A for (let attr of element.attributes) %7B%0A if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A try %7B%0A jsonAttrs%5Battr.name%5D %3D JSON.parse(attr.value)%3B%0A foundInDataAttr %3D true%3B%0A %7D catch (e2) %7B%0A jsonAttrs%5Battr.name%5D %3D %60Error parsing%3A %24%7Battr.value.substring(0%2C50)%7D...%60%3B%0A %7D%0A %7D%0A %7D%0A if (foundInDataAttr) %7B%0A return %7B ...commonData%2C source%3A 'dataAttributes'%2C possibleJSON%3A jsonAttrs %7D%3B%0A %7D else %7B%0A return %7B ...commonData%2C source%3A 'none'%2C error%3A 'Could not parse JSON from text or data attributes.'%2C rawTextSample%3A jsonText.substring(0%2C 200) %7D%3B%0A %7D%0A %7D%0A case 'partialJSON'%3A %0A try %7B%0A const parsedOuter %3D JSON.parse(rawTextForPartial)%3B%0A if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A let finalOutputString %3D parsedOuter.output%3B%0A let parsedInnerJson %3D null%3B%0A try %7B%0A parsedInnerJson %3D JSON.parse(finalOutputString)%3B%0A %7D catch (innerParseError) %7B%0A const repairedInnerOutput %3D repairJsonStringLiterals(finalOutputString)%3B%0A try %7B%0A parsedInnerJson %3D JSON.parse(repairedInnerOutput)%3B%0A %7D catch (repairedInnerParseError) %7B%0A parsedInnerJson %3D null%3B%0A %7D%0A %7D%0A%0A if (parsedInnerJson !%3D%3D null) %7B%0A %2F%2F Flatten unnecessary nested arrays%0A const flattened %3D flattenUnnecessaryArrays(parsedInnerJson)%3B%0A return Array.isArray(flattened) %3F flattened %3A %5Bflattened%5D%3B%0A %7D%0A %7D%0A %7D catch (outerParseError) %7B%0A %2F%2F Fall through to greedy extraction%0A %7D%0A%0A const extractedStringParts %3D extractGreedyJson(rawTextForPartial)%3B %0A if (extractedStringParts.length > 0) %7B%0A const parsed %3D extractedStringParts.map(jsonStringPart %3D> %7B%0A try %7B%0A const parsedJson %3D JSON.parse(jsonStringPart)%3B%0A return flattenUnnecessaryArrays(parsedJson)%3B%0A %7D catch (e) %7B%0A return jsonStringPart%3B %2F%2F Fallback to string if parsing fails%0A %7D%0A %7D)%3B%0A %0A %2F%2F Flatten the results - if we get nested arrays%2C flatten them%0A const result %3D %5B%5D%3B%0A parsed.forEach(item %3D> %7B%0A if (Array.isArray(item)) %7B%0A result.push(...item)%3B%0A %7D else %7B%0A result.push(item)%3B%0A %7D%0A %7D)%3B%0A %0A return result.length > 0 %3F result %3A null%3B%0A %7D else %7B%0A return null%3B %0A %7D%0A default%3A%0A return %7B ...commonData%2C error%3A 'Unknown extraction mode' %7D%3B%0A %7D%0A %7D%0A%0A function getSelector(element) %7B%0A if (!element %7C%7C !element.tagName) return 'unknown'%3B%0A if (element.id) return %60%23%24%7Belement.id%7D%60%3B%0A%0A let path %3D %5B%5D%3B%0A let current %3D element%3B%0A while (current %26%26 current.parentElement %26%26 path.length < 7) %7B %0A let selectorPart %3D current.tagName.toLowerCase()%3B%0A const parent %3D current.parentElement%3B%0A if (parent) %7B%0A const siblings %3D Array.from(parent.children).filter(child %3D> child.tagName %3D%3D%3D current.tagName)%3B%0A if (siblings.length > 1) %7B%0A const index %3D siblings.indexOf(current) %2B 1%3B%0A selectorPart %2B%3D %60%3Anth-of-type(%24%7Bindex%7D)%60%3B%0A %7D else %7B%0A if (current.classList %26%26 current.classList.length > 0) %7B%0A const distinctiveClass %3D Array.from(current.classList).find(cls %3D> %7B%0A if (!cls %7C%7C !%2F%5E%5Ba-zA-Z%5D%2F.test(cls.charAt(0))) return false%3B %0A try %7B%0A return parent.querySelectorAll(%60%24%7Bcurrent.tagName.toLowerCase()%7D.%24%7BCSS.escape(cls)%7D%60).length %3D%3D%3D 1%3B%0A %7D catch (e) %7B%0A return false%3B %0A %7D%0A %7D)%3B%0A if (distinctiveClass) %7B%0A selectorPart %2B%3D %60.%24%7BCSS.escape(distinctiveClass)%7D%60%3B%0A %7D%0A %7D%0A %7D%0A %7D%0A path.unshift(selectorPart)%3B%0A if (current.tagName.toLowerCase() %3D%3D%3D 'body') break%3B%0A current %3D parent%3B%0A %7D%0A return path.join(' > ')%3B%0A %7D%0A%0A function updateDisplay() %7B%0A const jsonDisplay %3D document.getElementById('json-output-display')%3B%0A const itemCount %3D document.getElementById('item-count-display')%3B%0A const dataSize %3D document.getElementById('data-size-display')%3B%0A%0A if (capturedData.length %3D%3D%3D 0) %7B%0A jsonDisplay.textContent %3D 'No data captured yet... Hover and click elements when selection is active.'%3B%0A jsonDisplay.style.color %3D '%239da5b4'%3B %0A %7D else %7B%0A %2F%2F Use proper JSON stringification without double-escaping%0A jsonDisplay.textContent %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A jsonDisplay.style.color %3D '%23d19a66'%3B %0A %7D%0A%0A itemCount.textContent %3D capturedData.length%3B%0A const sizeInBytes %3D new TextEncoder().encode(JSON.stringify(capturedData)).length%3B %0A dataSize.textContent %3D %60%24%7B(sizeInBytes %2F 1024).toFixed(2)%7D KB%60%3B%0A %7D%0A%0A function handleMouseOver(e) %7B%0A if (!isSelecting) return%3B%0A const target %3D e.target%3B%0A %0A %2F%2F Ignore sidebar elements and notifications%0A if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A %2F%2F Remove highlight from previous element%0A if (highlightedElement %26%26 highlightedElement !%3D%3D target) %7B%0A highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A %7D%0A %0A %2F%2F Add highlight to current element%0A target.classList.add(HIGHLIGHT_CLASS)%3B%0A highlightedElement %3D target%3B%0A %0A %2F%2F Show badge with JSON count%0A const mode %3D document.getElementById('extraction-mode-select').value%3B%0A const count %3D countJsonComponents(target%2C mode)%3B%0A showBadge(count%2C e.clientX%2C e.clientY)%3B%0A %0A %2F%2F Prevent event bubbling to avoid highlighting parent elements%0A e.stopPropagation()%3B%0A %7D%0A%0A function handleMouseOut(e) %7B%0A if (!isSelecting) return%3B%0A const target %3D e.target%3B%0A %0A %2F%2F Ignore sidebar elements and notifications%0A if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A %2F%2F Only remove highlight if we're leaving this element and not entering a child%0A if (target %3D%3D%3D highlightedElement %26%26 !target.contains(e.relatedTarget)) %7B%0A target.classList.remove(HIGHLIGHT_CLASS)%3B%0A highlightedElement %3D null%3B%0A hideBadge()%3B%0A %7D%0A %0A e.stopPropagation()%3B%0A %7D%0A%0A function handleMouseMove(e) %7B%0A if (!isSelecting %7C%7C !highlightedElement) return%3B%0A %0A %2F%2F Throttle mouse move updates to prevent performance issues%0A if (mouseMoveThrottle) return%3B%0A %0A mouseMoveThrottle %3D setTimeout(() %3D> %7B%0A %2F%2F Double-check we're still selecting before updating%0A if (!isSelecting) %7B%0A mouseMoveThrottle %3D null%3B%0A return%3B%0A %7D%0A mouseMoveThrottle %3D null%3B%0A %2F%2F Update badge position to follow cursor%0A const mode %3D document.getElementById('extraction-mode-select').value%3B%0A const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A showBadge(count%2C e.clientX%2C e.clientY)%3B%0A %7D%2C 50)%3B %2F%2F Update at most every 50ms%0A %7D%0A%0A function handleClick(e) %7B%0A if (!isSelecting) return%3B%0A const target %3D e.target%3B%0A %0A %2F%2F Ignore sidebar elements and notifications%0A if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification') return%3B%0A%0A e.preventDefault()%3B%0A e.stopPropagation()%3B%0A%0A const mode %3D document.getElementById('extraction-mode-select').value%3B%0A const extractionResult %3D extractJSON(target%2C mode)%3B %0A%0A %2F%2F Visual feedback for successful extraction%0A target.style.transition %3D 'background-color 0.2s ease-out'%3B%0A target.style.backgroundColor %3D 'rgba(152%2C 195%2C 121%2C 0.5)'%3B %0A setTimeout(() %3D> %7B%0A target.style.backgroundColor %3D ''%3B %0A if(isSelecting %26%26 highlightedElement %3D%3D%3D target) %7B%0A target.classList.add(HIGHLIGHT_CLASS)%3B%0A %7D%0A %7D%2C 300)%3B%0A %0A if (mode %3D%3D%3D 'partialJSON') %7B%0A if (Array.isArray(extractionResult) %26%26 extractionResult.length > 0) %7B %0A extractionResult.forEach(item %3D> capturedData.push(item))%3B%0A showNotification(%60âœ… Captured %24%7BextractionResult.length%7D JSON part(s) from %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A %7D else %7B %0A showNotification(%60â„¹%EF%B8%8F No JSON parts found in %24%7Btarget.tagName.toLowerCase()%7D.%60%2C 'info')%3B%0A %7D%0A %7D else %7B %0A if (extractionResult) %7B %0A capturedData.push(extractionResult)%3B%0A showNotification(%60âœ… Captured %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A %7D else %7B%0A showNotification(%60âš %EF%B8%8F Extraction failed for %24%7Btarget.tagName.toLowerCase()%7D. No data returned.%60%2C 'error')%3B%0A %7D%0A %7D%0A updateDisplay()%3B%0A %7D%0A%0A function startSelectionMode() %7B%0A isSelecting %3D true%3B%0A originalCursor %3D document.body.style.cursor%3B%0A document.body.style.cursor %3D 'crosshair'%3B%0A %0A const startButton %3D document.getElementById('start-selection-btn')%3B%0A startButton.style.background %3D '%23e06c75'%3B %0A startButton.style.color %3D '%23282c34'%3B%0A startButton.textContent %3D 'â¹%EF%B8%8F Stop Selecting'%3B%0A document.getElementById('selection-status-msg').style.display %3D 'block'%3B%0A%0A %2F%2F Use capture phase for better event handling%0A document.addEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A document.addEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A document.addEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A document.addEventListener('click'%2C handleClick%2C true)%3B%0A document.addEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A %7D%0A%0A function stopSelectionMode() %7B%0A isSelecting %3D false%3B%0A document.body.style.cursor %3D originalCursor%3B%0A%0A const startButton %3D document.getElementById('start-selection-btn')%3B%0A startButton.style.background %3D '%2361afef'%3B %0A startButton.style.color %3D '%23282c34'%3B%0A startButton.textContent %3D 'ðŸŽ¯ Start Selecting'%3B%0A document.getElementById('selection-status-msg').style.display %3D 'none'%3B%0A%0A %2F%2F Remove event listeners%0A document.removeEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A document.removeEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A document.removeEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A document.removeEventListener('click'%2C handleClick%2C true)%3B%0A document.removeEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A%0A %2F%2F Force clean up any remaining highlights%0A if (highlightedElement) %7B%0A highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A highlightedElement %3D null%3B%0A %7D%0A %0A %2F%2F Remove ALL highlight classes from any element that might have them%0A document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A el.classList.remove(HIGHLIGHT_CLASS)%3B%0A %2F%2F Force remove any inline styles that might have been added%0A el.style.transition %3D ''%3B%0A el.style.backgroundColor %3D ''%3B%0A %7D)%3B%0A %0A hideBadge()%3B%0A %0A %2F%2F Clear any pending throttle%0A if (mouseMoveThrottle) %7B%0A clearTimeout(mouseMoveThrottle)%3B%0A mouseMoveThrottle %3D null%3B%0A %7D%0A %0A %2F%2F Double-check that selection is truly off by removing cursor style%0A document.body.style.cursor %3D ''%3B%0A %7D%0A%0A function handleEscapeKey(e) %7B%0A if (e.key %3D%3D%3D 'Escape' %26%26 isSelecting) %7B%0A stopSelectionMode()%3B%0A %7D%0A %7D%0A%0A %2F%2F Event Listeners%0A document.getElementById('start-selection-btn').addEventListener('click'%2C (e) %3D> %7B%0A e.stopPropagation()%3B%0A if (isSelecting) %7B%0A stopSelectionMode()%3B%0A %7D else %7B%0A startSelectionMode()%3B%0A %7D%0A %7D)%3B%0A%0A document.getElementById('clear-data-btn').addEventListener('click'%2C (e) %3D> %7B%0A e.stopPropagation()%3B%0A if (capturedData.length > 0) %7B%0A const userConfirmed %3D confirm(\"Are you sure you want to clear all captured data%3F\")%3B%0A if (userConfirmed) %7B%0A capturedData %3D %5B%5D%3B%0A updateDisplay()%3B%0A showNotification('ðŸ—‘%EF%B8%8F All data cleared.'%2C 'info')%3B%0A %7D%0A %7D else %7B%0A showNotification('No data to clear.'%2C 'info')%3B%0A %7D%0A %7D)%3B%0A%0A document.getElementById('copy-json-btn').addEventListener('click'%2C async (e) %3D> %7B%0A e.stopPropagation()%3B%0A if (capturedData.length %3D%3D%3D 0) %7B%0A showNotification('No data to copy.'%2C 'error')%3B%0A return%3B%0A %7D%0A %0A const jsonString %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A const success %3D await copyToClipboard(jsonString)%3B%0A %0A if (success) %7B%0A showNotification('ðŸ“‹ JSON copied to clipboard!'%2C 'success')%3B%0A %7D else %7B%0A showNotification('Failed to copy JSON. Try manual selection or download.'%2C 'error')%3B%0A %7D%0A %7D)%3B%0A%0A document.getElementById('copy-items-btn').addEventListener('click'%2C async (e) %3D> %7B%0A e.stopPropagation()%3B%0A if (capturedData.length %3D%3D%3D 0) %7B%0A showNotification('No data to copy.'%2C 'error')%3B%0A return%3B%0A %7D%0A %0A %2F%2F Convert each item to JSON string and join with commas%0A const itemsString %3D capturedData.map(item %3D> JSON.stringify(item%2C null%2C 2)).join('%2C%5Cn')%3B%0A const success %3D await copyToClipboard(itemsString)%3B%0A %0A if (success) %7B%0A showNotification('ðŸ“„ Items copied to clipboard (without array brackets)!'%2C 'success')%3B%0A %7D else %7B%0A showNotification('Failed to copy items. Try manual selection or download.'%2C 'error')%3B%0A %7D%0A %7D)%3B%0A%0A document.getElementById('export-json-btn').addEventListener('click'%2C (e) %3D> %7B%0A e.stopPropagation()%3B%0A if (capturedData.length %3D%3D%3D 0) %7B%0A showNotification('No data to export.'%2C 'error')%3B%0A return%3B%0A %7D%0A const blob %3D new Blob(%5BJSON.stringify(capturedData%2C null%2C 2)%5D%2C %7B type%3A 'application%2Fjson' %7D)%3B%0A const url %3D URL.createObjectURL(blob)%3B%0A const a %3D document.createElement('a')%3B%0A a.href %3D url%3B%0A a.download %3D %60extracted-data-%24%7Bnew Date().toISOString().slice(0%2C19).replace(%2F%5B%3AT%5D%2Fg%2C'-')%7D.json%60%3B%0A document.body.appendChild(a)%3B%0A a.click()%3B%0A document.body.removeChild(a)%3B%0A URL.revokeObjectURL(url)%3B%0A showNotification('ðŸ’¾ JSON download started!'%2C 'success')%3B%0A %7D)%3B%0A%0A document.getElementById('close-sidebar-btn').addEventListener('click'%2C (e) %3D> %7B%0A e.stopPropagation()%3B%0A cleanupAndClose()%3B%0A %7D)%3B%0A %0A function cleanupAndClose() %7B%0A %2F%2F Force stop selection mode first%0A stopSelectionMode()%3B %0A %0A %2F%2F Remove all traces of the extractor%0A document.body.style.marginRight %3D ''%3B%0A sidebar.remove()%3B%0A styleElement.remove()%3B %0A %0A %2F%2F Clean up notifications and badge%0A const notificationEl %3D document.getElementById('json-extractor-notification')%3B%0A if (notificationEl) notificationEl.remove()%3B%0A const badgeEl %3D document.getElementById('json-extractor-badge')%3B%0A if (badgeEl) badgeEl.remove()%3B%0A %0A %2F%2F Final cleanup of any remaining highlights%0A document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A el.classList.remove(HIGHLIGHT_CLASS)%3B%0A el.style.transition %3D ''%3B%0A el.style.backgroundColor %3D ''%3B%0A %7D)%3B%0A %0A %2F%2F Reset cursor completely%0A document.body.style.cursor %3D ''%3B%0A %7D%0A%0A updateDisplay()%3B%0A%0A %2F%2F Update badge when extraction mode changes%0A document.getElementById('extraction-mode-select').addEventListener('change'%2C () %3D> %7B%0A if (isSelecting %26%26 highlightedElement) %7B%0A const mode %3D document.getElementById('extraction-mode-select').value%3B%0A const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A %2F%2F Use a simple position near the element center%0A const rect %3D highlightedElement.getBoundingClientRect()%3B%0A const x %3D rect.left %2B rect.width %2F 2%3B%0A const y %3D rect.top %2B rect.height %2F 2%3B%0A showBadge(count%2C x%2C y)%3B%0A %7D%0A %7D)%3B%0A%0A%7D)()%3B%7D)()%3B"
  }
];for(const n of t)if(e.hasAttribute(n)){const t=e.getAttribute(n),i=`[${n}=\"${CSS.escape(t)}\"]`;if(1===document.querySelectorAll(i).length)return i}const n=l(e);if(n){const e=n.split(/\s+/).filter(Boolean);if(0<e.length)for(let t=1;t<=e.length;t++)for(const n of m(e,t)){const e=n.map(e=>\".\"+CSS.escape(e)).join(\"\");if(1===document.querySelectorAll(e).length)return e}}const i=e.parentElement;if(!i)return null;const d=e.tagName.toLowerCase(),r=Array.from(i.children).filter(e=>e.tagName.toLowerCase()===d);if(1===r.length){const e=u(i);return e%3F`${e} > ${d}`:d}else{const t=r.indexOf(e)+1,n=u(i);return n%3F`${n} > ${d}:nth-child(${t})`:`${d}:nth-child(${t})`}}function m(e,t){return t>e.length%3F[]:1===t%3Fe.map(e=>[e]):e.reduce((n,i,d)=>{const l=m(e.slice(d+1),t-1),r=l.map(e=>[i,...e]);return[...n,...r]},[])}function f(e){const t={};[\"onclick\",\"onchange\",\"onsubmit\",\"onkeyup\",\"onkeydown\",\"onmousedown\",\"onmouseup\",\"onmouseover\",\"onmouseout\",\"onfocus\",\"onblur\",\"oninput\",\"ondrag\",\"ondrop\"].forEach(n=>{if(e.hasAttribute(n)){const i=n.substring(2);t[i]=e.getAttribute(n)}});const n=Array.from(e.classList).join(\" \");return(n.includes(\"ng-click\")||e.hasAttribute(\"ng-click\"))%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"v-on:click\")||e.hasAttribute(\"%40click\"))%26%26(t.click=\"Vue click binding\"),(e.hasAttribute(\"v-on:change\")||e.hasAttribute(\"%40change\"))%26%26(t.change=\"Vue change binding\"),e.hasAttribute(\"(click)\")%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"onClick\")||n.includes(\"clickable\")||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26\"button\"===e.type)%26%26!t.click%26%26(t.click=\"Probable click handler\"),(\"A\"===e.tagName||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26[\"button\",\"submit\",\"reset\"].includes(e.type))%26%26!t.click%26%26(t.click=\"Native click behavior\"),\"FORM\"!==e.tagName||t.submit||(t.submit=\"Native form submission\"),(\"INPUT\"===e.tagName||\"SELECT\"===e.tagName||\"TEXTAREA\"===e.tagName)%26%26(!t.change%26%26(t.change=\"Native change behavior\"),!t.input%26%26\"SELECT\"!==e.tagName%26%26(t.input=\"Native input behavior\")),t}function h(e){const t={},n=Array.from(e.attributes),i=n.filter(e=>e.name.startsWith(\"aria-\"));if(0<i.length%26%26(t.ariaAttributes={},i.forEach(e=>{t.ariaAttributes[e.name]=e.value})),e.hasAttribute(\"role\")%26%26(t.role=e.getAttribute(\"role\")),t.focusable=0<=e.tabIndex||[\"A\",\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName),[\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName)%26%26e.id){const n=document.querySelector(`label[for=\"${e.id}\"]`);n%26%26(t.labelText=n.textContent.trim())}return\"IMG\"===e.tagName%26%26(t.altText=e.alt||\"(missing alt text)\"),t}function g(e){const t=window.getComputedStyle(e);return{position:t.position,display:t.display,visibility:t.visibility,zIndex:t.zIndex,overflow:t.overflow,opacity:t.opacity,boxSizing:t.boxSizing,pointerEvents:t.pointerEvents,flexDirection:t.flexDirection,gridTemplateColumns:t.gridTemplateColumns,gridTemplateRows:t.gridTemplateRows}}function p(e){const t=e.getBoundingClientRect();return{x:t.left+window.scrollX,y:t.top+window.scrollY,width:t.width,height:t.height,viewportX:t.left,viewportY:t.top,isInViewport:0<=t.top%26%260<=t.left%26%26t.bottom<=window.innerHeight%26%26t.right<=window.innerWidth}}function y(e){const t=u(e);return{querySelector:`document.querySelector('${t}')`,traversal:b(e),byId:e.id%3F`document.getElementById('${e.id}')`:null,byClass:l(e)%3F`document.getElementsByClassName('${l(e).split(\" \")[0]}')[0]`:null,byTagName:`document.getElementsByTagName('${e.tagName.toLowerCase()}')[0]`,eventCode:E(e)}}function b(e){if(e===document.body)return\"document.body\";if(e.id)return`document.getElementById('${e.id}')`;const t=[];for(let n=e;n%26%26n!==document.body;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t.unshift(d),n=e}if(0===t.length)return null;let n=\"document.body\";return t.forEach(e=>{n+=`.children[${e}]`}),n}function E(e){const t=u(e),n=f(e),i=Object.keys(n);if(0===i.length)return null;let d=``;return d+=`const element = document.querySelector('${t}');\n`,i.forEach(e=>{d+=`element.addEventListener('${e}', (event) => {\n  console.log('${e} event triggered');\n});\n`}),d}function v(e){const t=u(e);return`const element = document.querySelector('${t}');element.textContent = 'New text';element.setAttribute('data-custom', 'value');element.classList.toggle('active');element.style.backgroundColor = 'lightblue';const newChild = document.createElement('div');newChild.textContent = 'Child element';element.appendChild(newChild);`}function x(e=document.body,t=3){function n(e,i=0){if(!e||i>t)return null;const d={tagName:e.tagName%3F.toLowerCase()||\"text\",nodeType:e.nodeType,id:e.id||null,className:e.className||null,textContent:3===e.nodeType%3Fe.textContent:null,childCount:e.childNodes%3F.length||0,selector:u(e),depth:i,children:[]};if(0<e.attributes%3F.length%26%26(d.attributes={},Array.from(e.attributes).forEach(e=>{d.attributes[e.name]=e.value})),1===e.nodeType)try{d.accessible=h(e),d.hasEventListeners=0<Object.keys(f(e)).length,d.geometry=p(e)}catch(t){d.error=t.message}return e.childNodes%26%26i<t%26%26e.childNodes.forEach(e=>{const t=n(e,i+1);t%26%26d.children.push(t)}),d}return n(e)}function S(e){if(!e||\"FORM\"!==e.tagName)return null;const t={action:e.action,method:e.method,id:e.id,name:e.name,enctype:e.enctype,controls:[]},n=e.querySelectorAll(\"input, select, textarea, button\");return n.forEach(e=>{const n={type:e.tagName.toLowerCase(),name:e.name,id:e.id,value:e.value,placeholder:e.placeholder,required:e.required,disabled:e.disabled,attributes:{}};if(\"INPUT\"===e.tagName%26%26(n.inputType=e.type,(\"checkbox\"===e.type||\"radio\"===e.type)%26%26(n.checked=e.checked),\"file\"===e.type%26%26(n.accept=e.accept,n.multiple=e.multiple)),\"SELECT\"===e.tagName%26%26(n.multiple=e.multiple,n.options=Array.from(e.options).map(e=>({value:e.value,text:e.text,selected:e.selected}))),e.id){const t=document.querySelector(`label[for=\"${e.id}\"]`);t%26%26(n.label=t.textContent.trim())}Array.from(e.attributes).forEach(e=>{[\"id\",\"name\",\"value\",\"type\",\"placeholder\",\"required\",\"disabled\"].includes(e.name)||(n.attributes[e.name]=e.value)}),t.controls.push(n)}),t.submissionCode=k(e),t}function k(e){const t=e.id||null,n=t%3F`document.getElementById('${t}')`:`document.querySelector('form')`,i=e.querySelectorAll(\"input[name], select[name], textarea[name]\");let d=`document.querySelector('${u(e)}').addEventListener('submit', function(event) {  event.preventDefault();  const formData = new FormData(this);  const formValues = {};  for (const [key, value] of formData.entries()) {    formValues[key] = value;  }  console.log('Form values:', formValues);  fetch('${e.action||\"url-here\"}', {    method: '${e.method.toUpperCase()||\"POST\"}',    body: formData  })  .then(response => response.json())  .then(data => console.log('Success:', data))  .catch(error => console.error('Error:', error));});function getFormValues() {  const form = ${n};  const values = {};`;return i.forEach(e=>{const t=e.name;d+=\"checkbox\"===e.type%3F`  values['${t}'] = form.elements['${t}'].checked;\n`:\"radio\"===e.type%3F`  values['${t}'] = form.querySelector('input[name=\"${t}\"]:checked')%3F.value;\n`:\"SELECT\"===e.tagName%26%26e.multiple%3F`  values['${t}'] = Array.from(form.elements['${t}'].selectedOptions).map(opt => opt.value);\n`:`  values['${t}'] = form.elements['${t}'].value;\n`}),d+=`  return values;}`,d}function L(){const e=document.createElement(\"div\");e.id=\"html-analyzer-tool\",d(e,`        <h3 id=\"tool-header\">HTML Structure Analyzer</h3>        <div class=\"tab-container\">          <div class=\"tab-buttons\">            <button id=\"inspector-tab\" class=\"tab-button active\">Inspector</button>            <button id=\"dom-tab\" class=\"tab-button\">DOM Explorer</button>            <button id=\"extractor-tab\" class=\"tab-button\">Extractor</button>            <button id=\"framework-tab\" class=\"tab-button\">Frameworks</button>            <button id=\"code-tab\" class=\"tab-button\">Code</button>          </div>                    <div id=\"inspector-tab-content\" class=\"tab-content active\">            <button id=\"enable-inspection-btn\" class=\"primary\">Select Element</button>            <div class=\"button-group\">              <button id=\"highlight-events-btn\">Event Listeners</button>              <button id=\"highlight-accessibility-btn\">A11y</button>              <button id=\"show-z-index-btn\">Z-Index</button>            </div>                        <div id=\"element-breadcrumbs\" class=\"breadcrumb-trail\" style=\"display: none;\">                          </div>                        <div id=\"element-info-container\" style=\"display: none;\">                          </div>          </div>                    <div id=\"dom-tab-content\" class=\"tab-content\">            <div class=\"inspector-section\">              <div class=\"tree-view-container\">                <div class=\"tree-view-header\">                  <span>DOM Tree Explorer</span>                  <div>                    <button id=\"refresh-tree-btn\" class=\"small-btn\" title=\"Refresh Tree\">â†»</button>                    <button id=\"expand-all-btn\" class=\"small-btn\" title=\"Expand All\">+</button>                    <button id=\"collapse-all-btn\" class=\"small-btn\" title=\"Collapse All\">-</button>                  </div>                </div>                <div id=\"dom-tree-view\" class=\"tree-view\">                                  </div>              </div>            </div>                        <div class=\"search-container\">              <input type=\"text\" id=\"tree-search\" class=\"search-input\" placeholder=\"Filter elements (e.g. div, .class, %23id)\">            </div>                        <div class=\"button-group\">              <button id=\"analyze-dom-btn\" class=\"secondary\">Analyze Structure</button>              <button id=\"find-duplicates-btn\" class=\"secondary\">Find Duplicate IDs</button>            </div>                        <div class=\"button-group\">              <button id=\"analyze-form-btn\">Analyze Forms</button>              <button id=\"analyze-accessibility-btn\">Analyze A11y</button>            </div>          </div>                    <div id=\"extractor-tab-content\" class=\"tab-content\">            <button id=\"extract-content-btn\" class=\"primary\">Extract Content as Markdown</button>            <button id=\"select-content-btn\">Select Content Container</button>            <div class=\"button-group\">              <button id=\"copy-markdown-btn\">Copy to Clipboard</button>              <button id=\"preview-markdown-btn\">Preview Content</button>              <button id=\"download-markdown-btn\">Download</button>            </div>                        <div class=\"extractor-options\">              <div class=\"option-group\">                <label>                  <input type=\"checkbox\" id=\"extract-images\" checked>                  Include images                </label>                <label>                  <input type=\"checkbox\" id=\"extract-links\" checked>                  Preserve links                </label>                <label>                  <input type=\"checkbox\" id=\"extract-tables\" checked>                  Include tables                </label>              </div>                            <div class=\"option-group\">                <label>                  <input type=\"checkbox\" id=\"clean-whitespace\" checked>                  Clean whitespace                </label>                <label>                  <input type=\"checkbox\" id=\"strip-scripts\">                  Remove scripts                </label>              </div>            </div>          </div>                    <div id=\"framework-tab-content\" class=\"tab-content\">            <div id=\"framework-info-container\">              <div class=\"loading-indicator\">Analyzing frameworks...</div>            </div>                        <button id=\"analyze-frameworks-btn\" class=\"primary\">Detect Frameworks</button>            <div class=\"button-group\">              <button id=\"analyze-css-btn\">Analyze CSS Usage</button>              <button id=\"analyze-specificity-btn\">CSS Specificity</button>            </div>                        <div id=\"framework-detail-view\"></div>          </div>                    <div id=\"code-tab-content\" class=\"tab-content\">            <div class=\"code-section\">              <div class=\"code-section-header\">Element Access</div>              <div class=\"button-group\">                <button id=\"generate-selectors-btn\" class=\"primary\">Generate Selectors</button>                <button id=\"generate-traversal-btn\">DOM Traversal</button>              </div>            </div>                        <div class=\"code-section\">              <div class=\"code-section-header\">Interaction Code</div>              <div class=\"button-group\">                <button id=\"generate-access-btn\">Element Access</button>                <button id=\"generate-event-btn\">Event Handlers</button>              </div>            </div>                        <div class=\"code-section\">              <div class=\"code-section-header\">Test Automation</div>              <div class=\"button-group\">                <button id=\"generate-cypress-btn\">Cypress</button>                <button id=\"generate-playwright-btn\">Playwright</button>                <button id=\"generate-selenium-btn\">Selenium</button>              </div>            </div>                        <div id=\"code-output-container\"></div>          </div>        </div>                <div class=\"status-bar\">          <div id=\"status-message\">Ready</div>          <div class=\"button-group\">            <button id=\"export-info-btn\" class=\"small-btn\">Export</button>            <button id=\"help-btn\" class=\"small-btn\">Help</button>            <button id=\"close-tool-btn\" class=\"small-btn danger\">Ã—</button>          </div>        </div>      `);try{if(!document.body)throw new Error(\"document.body not available\");document.body.appendChild(e),C(),R(),j(),w(),setTimeout(()=>{z()},500)}catch(t){throw console.error(\"Failed to create tool panel:\",t),t}}function C(){const e=document.createElement(\"style\");e.textContent=`        .tree-view-container {          border: 1px solid var(--border-color);          border-radius: 4px;          margin-bottom: 10px;          max-height: 300px;          overflow: auto;        }                .tree-view-header {          padding: 5px 10px;          background: var(--button-bg);          border-bottom: 1px solid var(--border-color);          display: flex;          justify-content: space-between;          align-items: center;          font-weight: bold;          font-size: 13px;        }                .tree-view {          padding: 5px;          font-family: monospace;          font-size: 12px;          line-height: 1.4;        }                .small-btn {          width: auto !important;          padding: 2px 5px !important;          margin: 0 2px !important;          font-size: 12px !important;          display: inline-block !important;        }                .status-bar {          margin-top: 10px;          padding-top: 5px;          border-top: 1px solid var(--border-color);          display: flex;          justify-content: space-between;          align-items: center;          font-size: 12px;        }                %23status-message {          color: var(--text-color);          font-style: italic;        }                .loading-indicator {          padding: 10px;          text-align: center;          font-style: italic;          color: var(--text-color);        }                .code-section {          margin-bottom: 15px;        }                .code-section-header {          font-weight: bold;          margin-bottom: 5px;          color: var(--text-color);        }                .extractor-options {          margin: 10px 0;          padding: 10px;          border: 1px solid var(--border-color);          border-radius: 4px;        }                .option-group {          display: flex;          flex-wrap: wrap;          gap: 10px;          margin-bottom: 8px;        }                .option-group label {          display: flex;          align-items: center;          font-size: 12px;        }                .option-group input[type=\"checkbox\"] {          margin-right: 5px;        }                .framework-list {          display: flex;          flex-wrap: wrap;          gap: 5px;          margin: 10px 0;        }                .framework-badge {          padding: 4px 8px;          border-radius: 12px;          font-size: 12px;          background: var(--primary-bg);          color: white;          display: inline-flex;          align-items: center;        }                .framework-badge.react { background: %2361dafb; color: %23000; }        .framework-badge.vue { background: %2342b883; color: %23fff; }        .framework-badge.angular { background: %23dd0031; color: %23fff; }        .framework-badge.svelte { background: %23ff3e00; color: %23fff; }        .framework-badge.jquery { background: %230769ad; color: %23fff; }        .framework-badge.bootstrap { background: %237952b3; color: %23fff; }        .framework-badge.tailwind { background: %2338b2ac; color: %23fff; }                .framework-details {          margin-top: 15px;          border-top: 1px solid var(--border-color);          padding-top: 10px;        }                .framework-details h4 {          margin: 0 0 10px 0;          font-size: 14px;        }                .framework-detail-section {          margin-bottom: 15px;        }                .framework-property {          display: flex;          font-size: 12px;          margin-bottom: 3px;        }                .framework-property-name {          font-weight: bold;          width: 100px;        }                .framework-property-value {          flex: 1;        }                .tree-node {          padding: 2px 0;          white-space: nowrap;          display: flex;          align-items: center;        }                .tree-node:hover {          background: var(--button-hover);        }                .tree-node-selected {          background: var(--primary-bg) !important;          color: white;        }                .tree-node-children {          padding-left: 16px;          border-left: 1px dotted var(--border-color);          margin-left: 6px;        }                .tree-node-hidden {          display: none;        }                .tree-node-toggle {          width: 16px;          height: 16px;          text-align: center;          line-height: 14px;          cursor: pointer;          font-size: 10px;          user-select: none;        }                .tree-node-icon {          width: 16px;          height: 16px;          margin: 0 4px;          display: inline-block;          font-size: 12px;          text-align: center;        }                .tree-node-label {          cursor: pointer;          user-select: none;          font-size: 12px;        }                .tree-node-tag {          color: %23e76f51;        }                .tree-node-id {          color: %2300bfff;          font-weight: bold;        }                .tree-node-class {          color: %23ffd166;        }                .tree-node-filter-highlight {          background: rgba(255, 255, 0, 0.2);          border-radius: 2px;        }                .specificity-table {          width: 100%25;          border-collapse: collapse;          font-size: 12px;        }                .specificity-table th, .specificity-table td {          text-align: left;          padding: 4px;          border-bottom: 1px solid var(--border-color);        }                .specificity-table th {          background: var(--button-bg);          font-weight: bold;        }                .specificity-table tr:hover {          background: var(--button-hover);        }                .property-conflict {          background: rgba(255, 87, 34, 0.1);        }                .property-winning {          background: rgba(0, 200, 83, 0.1);        }                .test-code-tabs {          display: flex;          border-bottom: 1px solid var(--border-color);          margin-bottom: 10px;        }                .test-code-tab {          padding: 5px 10px;          cursor: pointer;          border: 1px solid transparent;          border-bottom: none;          border-radius: 4px 4px 0 0;          margin-right: 2px;          font-size: 12px;        }                .test-code-tab.active {          background: var(--button-bg);          border-color: var(--border-color);        }      `,document.head.appendChild(e)}function w(){const e=document.getElementById(\"dom-tree-view\");e%26%26(d(e,\"<div class=\\"loading-indicator\\">Loading DOM tree...</div>\"),setTimeout(()=>{const t=document.documentElement,n=N(t);d(e,n),q(),B()},100))}function N(e,t=2,n=0){if(!e||30<n)return\"\";const i=e.tagName%3Fe.tagName.toLowerCase():\"text\",d=e.id%3Fe.id:\"\",l=e.className%26%26\"string\"==typeof e.className%3Fe.className:\"\",r=e.childNodes%26%260<e.childNodes.length,a=n<t,o=I(e);let s=`<span class=\"tree-node-tag\">${i}</span>`;if(d%26%26(s+=` <span class=\"tree-node-id\">%23${d}</span>`),l%26%26l.trim()){const e=l.split(/\s+/).filter(Boolean);e.length%26%26(2>=e.length%3Fs+=` <span class=\"tree-node-class\">.${e.join(\".\")}</span>`:s+=` <span class=\"tree-node-class\">.${e[0]}...</span>`)}if(e.attributes%26%260<e.attributes.length){const t=e.attributes.length;s+=` <span class=\"tree-node-attrs\">(${t} attrs)</span>`}let c=`        <div class=\"tree-node\" data-node-id=\"${o}\">          <span class=\"tree-node-toggle\">${r%3Fa%3F\"\u25BE\":\"\u25B8\":\"\u2022\"}</span>          <span class=\"tree-node-icon\">${A(e)}</span>          <span class=\"tree-node-label\">${s}</span>        </div>      `;if(r){let i=`<div class=\"tree-node-children\" ${a%3F\"\":\"style=\\"display:none\\"\"}>`;Array.from(e.children).forEach(e=>{i+=N(e,t,n+1)}),1>n%26%26Array.from(e.childNodes).forEach(e=>{e.nodeType===Node.TEXT_NODE%26%26e.textContent.trim()%26%26(i+=`                <div class=\"tree-node\" data-node-type=\"text\">                  <span class=\"tree-node-toggle\">â€¢</span>                  <span class=\"tree-node-icon\">T</span>                  <span class=\"tree-node-label\">%23text</span>                </div>              `)}),i+=`</div>`,c+=i}return c}function I(e){if(!e)return\"unknown\";if(e.id)return`id:${e.id}`;let t=\"\",n=e;for(;n%26%26n!==document.documentElement;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t=`.${d}${t}`,n=e}return`path:${t||\"0\"}`}function A(e){if(!e)return\"%3F\";switch(e.tagName%26%26e.tagName.toLowerCase()){case\"html\":return\"H\";case\"head\":return\"\u2699\uFE0F\";case\"body\":return\"B\";case\"div\":return\"D\";case\"span\":return\"S\";case\"a\":return\"\uD83D\uDD17\";case\"img\":return\"\uD83D\uDDBC\uFE0F\";case\"button\":return\"\uD83D\uDD18\";case\"input\":return\"\uD83D\uDCDD\";case\"form\":return\"\uD83D\uDCCB\";case\"table\":return\"\uD83D\uDD32\";case\"ul\":case\"ol\":return\"\uD83D\uDCC4\";case\"li\":return\"\u2022\";case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":return\"H\"+e.tagName.substring(1);case\"script\":return\"\uD83D\uDCDC\";case\"style\":return\"\uD83C\uDFA8\";case\"link\":return\"\uD83D\uDD17\";case\"meta\":return\"M\";case\"iframe\":return\"\uD83D\uDCDF\";case\"svg\":return\"\u2693\";case\"video\":return\"\uD83D\uDCF9\";case\"audio\":return\"\uD83D\uDD0A\";case\"canvas\":return\"\uD83C\uDFAD\";default:return\"E\";}}function q(){document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-node\"),n=e.nextElementSibling;if(n%26%26n.classList.contains(\"tree-node-children\")){const e=\"none\"!==n.style.display;n.style.display=e%3F\"none\":\"block\",t.target.textContent=e%3F\"\u25B8\":\"\u25BE\"}t.stopPropagation()})}),document.querySelectorAll(\".tree-node-label\").forEach(e=>{e.addEventListener(\"click\",t=>{M(t.target.closest(\".tree-node\")),t.stopPropagation()})}),document.getElementById(\"refresh-tree-btn\")%3F.addEventListener(\"click\",()=>{w()}),document.getElementById(\"expand-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"block\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25BE\")})}),document.getElementById(\"collapse-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"none\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25B8\")})})}function B(){const e=document.getElementById(\"tree-search\");e%26%26e.addEventListener(\"input\",t=>{const e=t.target.value.trim().toLowerCase();return e%3Fvoid document.querySelectorAll(\".tree-node\").forEach(t=>{const n=t.querySelector(\".tree-node-label\");if(!n)return;const i=n.textContent.toLowerCase(),l=i.includes(e);if(l){t.classList.remove(\"tree-node-hidden\");const i=n.innerHTML,l=new RegExp(`(${T(e)})`,\"gi\");d(n,i.replace(l,\"<mark class=\\"tree-node-filter-highlight\\">$1</mark>\"));for(let e=t.parentElement;e;){if(e.classList.contains(\"tree-node-children\")){e.style.display=\"block\";const t=e.previousElementSibling;if(t%26%26t.classList.contains(\"tree-node\")){const e=t.querySelector(\".tree-node-toggle\");e%26%26(e.textContent=\"\u25BE\")}}e=e.parentElement}}else{const e=t.nextElementSibling;e%26%26e.classList.contains(\"tree-node-children\")%26%26e.querySelector(\".tree-node:not(.tree-node-hidden)\")%3Ft.classList.remove(\"tree-node-hidden\"):t.classList.add(\"tree-node-hidden\")}}):void document.querySelectorAll(\".tree-node\").forEach(e=>{e.classList.remove(\"tree-node-hidden\");const t=e.querySelector(\".tree-node-label\");t%26%26d(t,t.innerHTML.replace(/<mark class=\"tree-node-filter-highlight\">(.*%3F)<\/mark>/g,\"$1\"))})})}function T(e){return e.replace(/[.*+%3F^${}()|[\]\\]/g,\"\\$%26\")}function M(e){if(!e)return;document.querySelectorAll(\".tree-node-selected\").forEach(e=>{e.classList.remove(\"tree-node-selected\")}),e.classList.add(\"tree-node-selected\");const t=e.dataset.nodeId;if(!t)return;let n=null;if(t.startsWith(\"id:\")){const e=t.substring(3);n=document.getElementById(e)}else if(t.startsWith(\"path:\")){const e=t.substring(5).split(\".\");n=document.documentElement;for(let t=1;t<e.length;t++){const i=parseInt(e[t]);if(n.children%26%26i<n.children.length)n=n.children[i];else{n=null;break}}}n%26%26(ne(n),n.scrollIntoView({behavior:\"smooth\",block:\"center\"}),document.getElementById(\"inspector-tab\").click())}function z(){function e(e){return e.replace(/([A-Z])/g,\" $1\").replace(/^./,e=>e.toUpperCase())}const t=document.getElementById(\"framework-info-container\");if(!t)return;const n=r();let i=\"\";n.list%26%260<n.list.length%3F(i+=`<div class=\"framework-list\">`,n.list.forEach(e=>{const t=e.toLowerCase().replace(/\s+/g,\"\");i+=`<div class=\"framework-badge ${t}\">${e}</div>`}),i+=`</div>`,n.details%26%26Object.entries(n.details).forEach(([t,n])=>{i+=`<div class=\"framework-details\">`,i+=`<h4>${t} Details</h4>`,i+=`<div class=\"framework-detail-section\">`,Object.entries(n).forEach(([t,n])=>{\"object\"==typeof n%26%26null!==n%3FArray.isArray(n)%3F(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n.length} items</div>`,i+=`</div>`,0<n.length%26%26(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\"></div>`,i+=`<div class=\"framework-property-value\">`,n.slice(0,5).forEach(e=>{i+=`<div>${\"string\"==typeof e%3Fe:JSON.stringify(e)}</div>`}),5<n.length%26%26(i+=`<div>...and ${n.length-5} more</div>`),i+=`</div>`,i+=`</div>`)):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">[Object]</div>`,i+=`</div>`):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n}</div>`,i+=`</div>`)}),i+=`</div>`,i+=`</div>`})):i=`<div class=\"framework-info-message\">No frameworks detected on this page. This appears to be a static HTML page.</div>`,d(t,i)}function R(){const t=document.getElementById(\"html-analyzer-tool\"),n=document.getElementById(\"tool-header\");n.addEventListener(\"mousedown\",n=>{n.preventDefault(),Me.isMoving=!0,Me.moveOffset={x:n.clientX-t.getBoundingClientRect().left,y:n.clientY-t.getBoundingClientRect().top},document.addEventListener(\"mousemove\",O),document.addEventListener(\"mouseup\",()=>{Me.isMoving=!1,document.removeEventListener(\"mousemove\",O)},{once:!0})})}function O(i){if(!Me.isMoving)return;const e=document.getElementById(\"html-analyzer-tool\"),d=i.clientX-Me.moveOffset.x,l=i.clientY-Me.moveOffset.y,r=window.innerWidth-e.offsetWidth,a=window.innerHeight-e.offsetHeight;e.style.left=`${t(0,n(d,r))}px`,e.style.top=`${t(0,n(l,a))}px`}function j(){document.querySelectorAll(\".tab-button\").forEach(e=>{e.addEventListener(\"click\",Z)}),document.getElementById(\"enable-inspection-btn\").addEventListener(\"click\",J),document.getElementById(\"highlight-events-btn\").addEventListener(\"click\",re),document.getElementById(\"highlight-accessibility-btn\").addEventListener(\"click\",ae),document.getElementById(\"show-z-index-btn\").addEventListener(\"click\",oe),document.getElementById(\"extract-content-btn\").addEventListener(\"click\",ce),document.getElementById(\"select-content-btn\").addEventListener(\"click\",ue),document.getElementById(\"copy-markdown-btn\").addEventListener(\"click\",he),document.getElementById(\"preview-markdown-btn\").addEventListener(\"click\",me),document.getElementById(\"download-markdown-btn\").addEventListener(\"click\",fe),document.getElementById(\"analyze-dom-btn\").addEventListener(\"click\",ge),document.getElementById(\"analyze-form-btn\").addEventListener(\"click\",pe),document.getElementById(\"find-duplicates-btn\").addEventListener(\"click\",se),document.getElementById(\"tree-search\").addEventListener(\"input\",xe),document.getElementById(\"generate-selectors-btn\").addEventListener(\"click\",ye),document.getElementById(\"generate-traversal-btn\").addEventListener(\"click\",Ee),document.getElementById(\"generate-access-btn\").addEventListener(\"click\",ve),document.getElementById(\"export-info-btn\").addEventListener(\"click\",Ne),document.getElementById(\"close-tool-btn\").addEventListener(\"click\",Ie)}function H(e,t=\"Preview\",n=\"text\"){D();const i=document.createElement(\"div\");i.id=\"preview-overlay\";let l=\"\";if(\"markdown\"===n%3Fl=`          <div id=\"preview-tabs\">            <button id=\"preview-tab-markdown\" class=\"active\">Markdown</button>            <button id=\"preview-tab-html\">HTML</button>            <button id=\"preview-tab-rendered\">Rendered</button>          </div>        `:\"structure\"===n%26%26(l=`          <div id=\"preview-tabs\">            <button id=\"preview-tab-tree\" class=\"active\">Tree View</button>            <button id=\"preview-tab-json\">JSON</button>          </div>        `),d(i,`        <div id=\"preview-container\">          <div id=\"preview-header\">            <h3>${t}</h3>            <button id=\"close-preview-btn\" class=\"danger\">Ã—</button>          </div>          ${l}          <div id=\"preview-content\">${\"html\"===n%3Fe:\"rendered\"===n%3F\"\":Y(e)}</div>          <div id=\"preview-actions\">            <button id=\"preview-copy-btn\">Copy to Clipboard</button>            <button id=\"preview-download-btn\" class=\"primary\">Download</button>            <button id=\"preview-close-btn\">Close</button>          </div>        </div>      `),document.body.appendChild(i),document.getElementById(\"close-preview-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-close-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-copy-btn\").addEventListener(\"click\",()=>{Q(e),X(\"Copied to clipboard!\")}),document.getElementById(\"preview-download-btn\").addEventListener(\"click\",()=>{we(e,t,n)}),\"markdown\"===n){const t=G(e);document.getElementById(\"preview-tab-markdown\").addEventListener(\"click\",()=>{U(\"markdown\"),d(document.getElementById(\"preview-content\"),Y(e))}),document.getElementById(\"preview-tab-html\").addEventListener(\"click\",()=>{U(\"html\"),d(document.getElementById(\"preview-content\"),Y(t))}),document.getElementById(\"preview-tab-rendered\").addEventListener(\"click\",()=>{U(\"rendered\"),d(document.getElementById(\"preview-content\"),t)})}else if(\"structure\"===n){const t=F(e),n=JSON.stringify(e,null,2);document.getElementById(\"preview-tab-tree\").addEventListener(\"click\",()=>{U(\"tree\"),d(document.getElementById(\"preview-content\"),t),_()}),document.getElementById(\"preview-tab-json\").addEventListener(\"click\",()=>{U(\"json\"),d(document.getElementById(\"preview-content\"),Y(n))}),d(document.getElementById(\"preview-content\"),t),_()}}function _(){document.querySelectorAll(\".tree-toggler\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-item\"),n=e.querySelector(\".tree-children\");n%26%26(n.style.display=\"none\"===n.style.display%3F\"block\":\"none\",t.target.textContent=\"none\"===n.style.display%3F\"\u25B8\":\"\u25BE\")})}),document.querySelectorAll(\".tree-item-label\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.dataset.elementId;if(e){const t=document.querySelector(e);t%26%26(ie(t),le(t))}})})}function U(e){document.querySelectorAll(\"%23preview-tabs button\").forEach(e=>{e.classList.remove(\"active\")}),document.getElementById(`preview-tab-${e}`).classList.add(\"active\"),Me.previewActiveTab=e}function D(){const e=document.getElementById(\"preview-overlay\");e%26%26e.remove()}function $(e){if(!e)return;const t=document.getElementById(\"element-info-container\"),n=document.getElementById(\"element-breadcrumbs\");t.style.display=\"block\",n.style.display=\"block\",d(n,\"\"),V(e,n);const i=e.tagName.toLowerCase(),r=e.id%3F`%23${e.id}`:\"\",a=l(e),o=a%3F`.${a.split(\" \").join(\".\")}`:\"\",s=u(e),c=f(e),m=h(e),b=g(e),E=p(e);d(t,`        <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Basic Information</div>          <div><strong>Element:</strong> ${i}${r}${o}</div>          <div><strong>Unique Selector:</strong> ${s}</div>          <div><strong>Text Content:</strong> ${e.textContent.substring(0,50)}${50<e.textContent.length%3F\"...\":\"\"}</div>          <div><strong>Child Elements:</strong> ${e.children.length}</div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Attributes</div>          <div class=\"property-list\">            ${Array.from(e.attributes).map(e=>`              <div class=\"property-item\">                <div class=\"property-name\">${e.name}</div>                <div class=\"property-value\">${e.value}</div>              </div>            `).join(\"\")}          </div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Event Listeners</div>          ${0<Object.keys(c).length%3FObject.entries(c).map(([e,t])=>`<span class=\"badge badge-warning\">${e}</span>`).join(\"\"):\"<div>No event listeners detected</div>\"}        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Accessibility</div>          ${0<Object.keys(m).length%3F`<div class=\"property-list\">              ${Object.entries(m).map(([e,t])=>\"ariaAttributes\"===e%26%26\"object\"==typeof t%3FObject.entries(t).map(([e,t])=>`                    <div class=\"property-item\">                      <div class=\"property-name\">${e}</div>                      <div class=\"property-value\">${t}</div>                    </div>                  `).join(\"\"):`                    <div class=\"property-item\">                      <div class=\"property-name\">${e}</div>                      <div class=\"property-value\">${JSON.stringify(t)}</div>                    </div>                  `).join(\"\")}            </div>`:\"<div>No accessibility attributes detected</div>\"}        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Key Styles</div>          <div class=\"property-list\">            ${Object.entries(b).map(([e,t])=>`              <div class=\"property-item\">                <div class=\"property-name\">${e}</div>                <div class=\"property-value\">${t}</div>              </div>            `).join(\"\")}          </div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Actions</div>          <div class=\"button-group\">            <button id=\"generate-selector-btn\" class=\"secondary\">Generate Selector</button>            <button id=\"generate-js-access-btn\" class=\"secondary\">JS Access</button>          </div>          <div class=\"button-group\">            <button id=\"copy-outer-html-btn\" class=\"info\">Copy HTML</button>            <button id=\"inspect-children-btn\" class=\"info\">Inspect Children</button>          </div>        </div>      `),document.getElementById(\"generate-selector-btn\").addEventListener(\"click\",()=>{W(s,\"CSS Selector\")}),document.getElementById(\"generate-js-access-btn\").addEventListener(\"click\",()=>{const t=y(e);let n=`const element = ${t.querySelector};${t.byId%3F`const elementById = ${t.byId};`:\"\"}${t.byClass%3F`const elementByClass = ${t.byClass};`:\"\"}${t.byTagName%3F`const elementByTag = ${t.byTagName};`:\"\"}`;W(n,\"JavaScript Element Access\")}),document.getElementById(\"copy-outer-html-btn\").addEventListener(\"click\",()=>{Q(e.outerHTML),X(\"HTML copied to clipboard!\")}),document.getElementById(\"inspect-children-btn\").addEventListener(\"click\",()=>{P(e)})}function V(e,t){let n=e;const i=[];for(;n%26%26n!==document.documentElement;)i.unshift({element:n,tag:n.tagName.toLowerCase(),id:n.id,classes:n.className}),n=n.parentElement;i.unshift({element:document.documentElement,tag:\"html\",id:\"\",classes:\"\"}),i.forEach((e,n)=>{const i=document.createElement(\"span\");i.className=\"breadcrumb-item\";let d=e.tag;if(e.id%26%26(d+=`%23${e.id}`),e.classes){const t=e.classes.split(\" \")[0];t%26%26(d+=`.${t}`),1<e.classes.split(\" \").length%26%26(d+=\"...\")}i.textContent=d,i.dataset.index=n,i.addEventListener(\"click\",()=>{ie(e.element),$(e.element),Me.selectedElement=e.element}),t.appendChild(i)})}function P(e){const t=Array.from(e.children);if(0===t.length)return void X(\"This element has no child elements\");let n=`<div class=\"element-tree\">        <div class=\"tree-item\">          <span class=\"tree-toggler\">â–¾</span>          <span class=\"tree-item-label\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}</span>          <div class=\"tree-children\">      `;t.forEach(e=>{const t=u(e);n+=`          <div class=\"tree-item\">            <span class=\"tree-toggler\">${0<e.children.length%3F\"\u25B8\":\"\u2022\"}</span>            <span class=\"tree-item-label\" data-element-id=\"${t}\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}${l(e)%3F\" .\"+l(e).split(\" \")[0]:\"\"}</span>            ${0<e.children.length%3F\"<div class=\\"tree-children\\" style=\\"display: none;\\"></div>\":\"\"}          </div>        `}),n+=`          </div>        </div>      </div>`,H(n,\"Child Elements\",\"html\"),_()}function F(e){function t(e,n=0){if(!e)return\"\";let i=\"\";const d=e.children%26%260<e.children.length;i+=`<div class=\"tree-item\">`,i+=`<span class=\"tree-toggler\">${d%3F\"\u25BE\":\"\u2022\"}</span>`;let r=e.tagName||\"text\";e.id%26%26(r+=` %23${e.id}`);const a=l(e);if(a%26%26(r+=` .${a.split(\" \")[0]}`),i+=e.selector%3F`<span class=\"tree-item-label\" data-element-id=\"${e.selector}\">${r}</span>`:`<span class=\"tree-item-label\">${r}</span>`,e.attributes||e.textContent){let t=\"\";if(e.attributes){const n=Object.keys(e.attributes).length;0<n%26%26(t+=` [${n} attr]`)}if(e.textContent){const n=e.textContent.trim();if(0<n.length){const e=20<n.length%3Fn.substring(0,20)+\"...\":n;t+=` \"${e}\"`}}t%26%26(i+=`<span style=\"color: %23888;\">${t}</span>`)}return d%26%26(i+=`<div class=\"tree-children\">`,e.children.forEach(e=>{i+=t(e,n+1)}),i+=`</div>`),i+=`</div>`,i}return t(e)}function X(e,t=2e3){const n=document.querySelector(\".tooltip\");n%26%26n.remove();const i=document.createElement(\"div\");i.className=\"tooltip\",i.textContent=e,document.body.appendChild(i);const d=i.getBoundingClientRect();i.style.left=`${(window.innerWidth-d.width)/2}px`,i.style.top=`20px`,setTimeout(()=>{i%26%26i.parentNode%26%26i.remove()},t)}function W(e,t){H(e,t,\"text\")}function Q(e){const t=document.createElement(\"textarea\");t.value=e,t.style.position=\"fixed\",t.style.opacity=\"0\",document.body.appendChild(t),t.select();try{document.execCommand(\"copy\")}catch(e){console.error(\"Failed to copy text: \",e)}document.body.removeChild(t)}function Y(e){return e.replace(/%26/g,\"%26amp;\").replace(/</g,\"%26lt;\").replace(/>/g,\"%26gt;\").replace(/\"/g,\"%26quot;\").replace(/'/g,\"%26%23039;\")}function G(e){return e%3Fe.replace(/```(\w*)\n([\s\S]*%3F)\n```/g,\"<pre><code class=\\"language-$1\\">$2</code></pre>\").replace(/`([^`]+)`/g,\"<code>$1</code>\").replace(/^%23 (.*$)/gm,\"<h1>$1</h1>\").replace(/^%23%23 (.*$)/gm,\"<h2>$1</h2>\").replace(/^%23%23%23 (.*$)/gm,\"<h3>$1</h3>\").replace(/^%23%23%23%23 (.*$)/gm,\"<h4>$1</h4>\").replace(/^%23%23%23%23%23 (.*$)/gm,\"<h5>$1</h5>\").replace(/^%23%23%23%23%23%23 (.*$)/gm,\"<h6>$1</h6>\").replace(/\*\*(.*%3F)\*\*/g,\"<strong>$1</strong>\").replace(/\*(.*%3F)\*/g,\"<em>$1</em>\").replace(/^\s*- (.*$)/gm,\"<ul><li>$1</li></ul>\").replace(/^\s*\d+\. (.*$)/gm,\"<ol><li>$1</li></ol>\").replace(/\[(.*%3F)\]\((.*%3F)\)/g,\"<a href=\\"$2\\">$1</a>\").replace(/^(%3F!<[^>]*>)(.*$)/gm,\"<p>$1</p>\").replace(/<\/ul>\s*<ul>/g,\"\").replace(/<\/ol>\s*<ol>/g,\"\"):\"\"}function Z(t){document.querySelectorAll(\".tab-button\").forEach(e=>{e.classList.remove(\"active\")}),document.querySelectorAll(\".tab-content\").forEach(e=>{e.classList.remove(\"active\")}),t.target.classList.add(\"active\");const e=t.target.id,n=e.replace(\"-tab\",\"-tab-content\");document.getElementById(n).classList.add(\"active\"),Me.activeTab=e.replace(\"-tab\",\"\")}function J(){Me.isInspecting=!Me.isInspecting;const e=document.getElementById(\"enable-inspection-btn\");e.textContent=Me.isInspecting%3F\"Cancel Selection\":\"Select Element\",e.classList.toggle(\"primary\",!Me.isInspecting),e.classList.toggle(\"danger\",Me.isInspecting),Me.isInspecting%3F(document.addEventListener(\"mouseover\",K,!0),document.addEventListener(\"mouseout\",ee,!0),document.addEventListener(\"click\",te,!0),X(\"Hover over elements and click to select one for inspection\")):(document.removeEventListener(\"mouseover\",K,!0),document.removeEventListener(\"mouseout\",ee,!0),document.removeEventListener(\"click\",te,!0),de())}function K(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(de(),ie(t.target,!1),Me.hoveredElement=t.target))}function ee(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||t.target===Me.hoveredElement%26%26(de(),Me.hoveredElement=null))}function te(t){Me.isInspecting%26%26(t.preventDefault(),t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(ne(t.target),J()))}function ne(e){Me.selectedElement=e,de(),ie(e,!0),$(e),Me.inspectionHistory.find(t=>t===e)%26%26(Me.inspectionHistory=Me.inspectionHistory.filter(t=>t!==e)),Me.inspectionHistory.unshift(e),10<Me.inspectionHistory.length%26%26Me.inspectionHistory.pop()}function ie(e,t=!1){if(!e)return;de(),e.classList.add(\"element-highlight\");const n=document.createElement(\"div\");n.className=\"element-label\";let i=e.tagName.toLowerCase();e.id%26%26(i+=`%23${e.id}`);const d=l(e);if(d){const e=d.split(/\s+/).filter(e=>e%26%26\"element-highlight\"!==e);0<e.length%26%26(i+=`.${e[0]}`,1<e.length%26%26(i+=`+${e.length-1}`))}n.textContent=i,e.appendChild(n),Me.highlightedElements.push({element:e,label:n}),t%26%26le(e)}function de(){document.querySelectorAll(\".element-highlight\").forEach(e=>{e.classList.remove(\"element-highlight\")}),document.querySelectorAll(\".element-label\").forEach(e=>{e.remove()}),Me.highlightedElements=[]}function le(e){if(e){const t=e.getBoundingClientRect();(0>t.top||t.bottom>window.innerHeight)%26%26e.scrollIntoView({behavior:\"smooth\",block:\"center\"})}}function re(){de();const e=document.getElementById(\"highlight-events-btn\");if(\"events\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight Event Listeners\");Me.visualMode=\"events\",e.textContent=\"Remove Event Highlights\";const t=document.querySelectorAll(\"a, button, input, select, textarea, [onclick], [onkeyup], [onchange], [role=\\"button\\"], [role=\\"link\\"], [role=\\"checkbox\\"], [role=\\"menuitem\\"], [class*=\\"btn\\"], [class*=\\"button\\"], [class*=\\"clickable\\"]\");t.forEach(e=>{0<Object.keys(f(e)).length%26%26e.classList.add(\"event-highlight\")}),X(\"Highlighted all elements with event listeners\",3e3)}function ae(){de();const e=document.getElementById(\"highlight-accessibility-btn\");if(\"accessibility\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight A11y Elements\");Me.visualMode=\"accessibility\",e.textContent=\"Remove A11y Highlights\";const t=document.querySelectorAll(\"[role], [aria-*], [tabindex], [alt], [title], [for], label, a[href], button, input, select, textarea\");t.forEach(e=>{e.classList.add(\"accessibility-highlight\")}),X(\"Highlighted all elements with accessibility attributes\",3e3)}function oe(){de();const e=document.getElementById(\"show-z-index-btn\");if(document.querySelectorAll(\".z-index-highlighter\").forEach(e=>e.remove()),\"zindex\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\");Me.visualMode=\"zindex\",e.textContent=\"Remove Z-Index Visual\";const i=Array.from(document.querySelectorAll(\"*\")).filter(e=>{const t=window.getComputedStyle(e);return\"static\"!==t.position%26%26\"auto\"!==t.zIndex%26%26!isNaN(parseInt(t.zIndex))});return 0===i.length%3F(X(\"No elements with z-index found on this page\"),Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\")):void(i.sort((e,t)=>{const n=parseInt(window.getComputedStyle(e).zIndex),i=parseInt(window.getComputedStyle(t).zIndex);return n-i}),i.forEach(e=>{const i=e.getBoundingClientRect(),d=parseInt(window.getComputedStyle(e).zIndex),l=document.createElement(\"div\");l.className=\"z-index-highlighter\",l.style.left=`${i.left+window.scrollX}px`,l.style.top=`${i.top+window.scrollY}px`,l.style.width=`${i.width}px`,l.style.height=`${i.height}px`,l.style.opacity=n(.8,t(.2,d/1e3));const r=document.createElement(\"div\");r.style.position=\"absolute\",r.style.top=\"0\",r.style.left=\"0\",r.style.background=\"black\",r.style.color=\"white\",r.style.padding=\"2px 5px\",r.style.fontSize=\"12px\",r.style.borderRadius=\"2px\",r.textContent=`z-index: ${d}`,l.appendChild(r),document.body.appendChild(l)}),X(`Visualized ${i.length} elements with z-index stacking order`))}function se(){const e=document.querySelectorAll(\"[id]\"),t={};e.forEach(e=>{const n=e.id;t[n]||(t[n]=[]),t[n].push(e)});const n=Object.entries(t).filter(([e,t])=>1<t.length);if(0===n.length)return void X(\"No duplicate IDs found on the page.\");let i=`%23 Duplicate ID Report\n\n`;i+=`Found ${n.length} duplicate IDs on the page.\n\n`,n.forEach(([e,t])=>{i+=`%23%23 ID: \"${e}\"\n\n`,i+=`- Occurrences: ${t.length}\n`,i+=`- Elements:\n`,t.forEach((t,n)=>{const d=t.tagName.toLowerCase(),l=u(t).replace(`%23${e}`,\"\");i+=`  ${n+1}. \`<${d}>\` at ${l}\n`}),i+=`\n`}),i+=`%23%23 Recommendation\n\n`,i+=`Duplicate IDs can cause JavaScript errors and accessibility issues. Each ID should be unique within the document.`,H(i,\"Duplicate ID Report\",\"markdown\")}function ce(){const e=Me.selectedElement||ke();return e%3Fvoid(Me.extractedMarkdown=Ce(e),X(`Content extracted! (${Me.extractedMarkdown.length} characters)`)):void X(\"No content container selected. Use \\"Select Content Container\\" first.\")}function ue(){J(),X(\"Select the container that contains the content you want to extract\")}function me(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26H(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function fe(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26we(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function he(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26(Q(Me.extractedMarkdown),X(\"Markdown copied to clipboard!\"))}function ge(){const e=Me.selectedElement||document.body;X(\"Analyzing DOM structure...\"),Me.analyzedStructure=x(e,5),H(Me.analyzedStructure,\"DOM Structure Analysis\",\"structure\")}function pe(){const e=Me.selectedElement%26%26\"FORM\"===Me.selectedElement.tagName%3FMe.selectedElement:document.querySelector(\"form\");if(!e)return void X(\"No form found on the page. Select a form first.\");const t=S(e);return t%3Fvoid H(t,\"Form Structure Analysis\",\"structure\"):void X(\"Failed to analyze the form structure.\")}function ye(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=u(e);let n=\"\";if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n=`.${e[0]}`)}}n||(n=e.tagName.toLowerCase());const i=Array.from(e.attributes).filter(e=>![\"id\",\"class\",\"style\"].includes(e.name)).map(e=>`[${e.name}=\"${e.value.replace(/\"/g,\"\\\\"\")}\"]`),d=be(e);let r=`%23 CSS Selectors for Selected Element\n\n`;r+=`%23%23 Element Info\n`,r+=`- Tag: \`${e.tagName.toLowerCase()}\`\n`,r+=`- ID: ${e.id%3F`\`${e.id}\``:\"None\"}\n`,r+=`- Classes: ${e.className%3F`\`${e.className}\``:\"None\"}\n\n`,r+=`%23%23 Selectors\n\n`,r+=`%23%23%23 Most Specific (Unique)\n`,r+=`\`\`\`css\n${t}\n\`\`\`\n\n`,r+=`%23%23%23 Shortest Viable Selector\n`,r+=`\`\`\`css\n${n}\n\`\`\`\n\n`,r+=`%23%23%23 Full CSS Path\n`,r+=`\`\`\`css\n${d}\n\`\`\`\n\n`,0<i.length%26%26(r+=`%23%23%23 Attribute Selectors\n`,i.forEach(e=>{r+=`\`\`\`css\n${e}\n\`\`\`\n`}),r+=`\n`),r+=`%23%23 JavaScript Code\n\n`,r+=`\`\`\`javascript\n`,r+=`const element = document.querySelector('${t}');\n\n`,e.id%26%26(r+=`const elementById = document.getElementById('${e.id}');\n\n`);const a=l(e);if(a){const e=a.split(/\s+/)[0];r+=`const elementsByClass = document.getElementsByClassName('${e}');\n\n`}r+=`const elementsByTag = document.getElementsByTagName('${e.tagName.toLowerCase()}');\n`,r+=`\`\`\`\n`,H(r,\"CSS Selectors\",\"markdown\")}function be(e){if(!(e instanceof Element))return\"\";if(e.id)return`%23${e.id}`;let t=\"\";for(;e!==document.body%26%26e.parentElement;){let n=e.tagName.toLowerCase();if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n+=`.${e.join(\".\")}`)}}const i=Array.from(e.parentElement.children).filter(t=>t.tagName===e.tagName);if(1<i.length){const t=i.indexOf(e)+1;n+=`:nth-of-type(${t})`}t=`${n}${t%3F\" > \"+t:\"\"}`,e=e.parentElement}return`body > ${t}`}function Ee(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement;let t=`%23 DOM Traversal Code Examples\n\n`;t+=`The following examples show different ways to traverse the DOM to access the selected element:\n\n`,t+=`%23%23 Direct Access\n\n`,t+=`\`\`\`javascript\n`,t+=e.id%3F`const element = document.getElementById('${e.id}');\n`:`const element = document.querySelector('${u(e)}');\n`,t+=`\`\`\`\n\n`,t+=`%23%23 Parent-Child Traversal\n\n`,t+=`\`\`\`javascript\n`,t+=b(e),t+=`\n\`\`\`\n\n`,(e.previousElementSibling||e.nextElementSibling)%26%26(t+=`%23%23 Sibling Traversal\n\n`,t+=`\`\`\`javascript\n`,e.previousElementSibling%26%26(t+=`const prevSibling = document.querySelector('${u(e.previousElementSibling)}');\n`,t+=`const element = prevSibling.nextElementSibling;\n\n`),e.nextElementSibling%26%26(t+=`const nextSibling = document.querySelector('${u(e.nextElementSibling)}');\n`,t+=`const element = nextSibling.previousElementSibling;\n`),t+=`\`\`\`\n\n`),H(t,\"DOM Traversal Examples\",\"markdown\")}function ve(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=y(e),n=v(e);let i=`%23 JavaScript Code for Element Interaction\n\n`;i+=`%23%23 Accessing the Element\n\n`,i+=`\`\`\`javascript\n`,i+=`const element = ${t.querySelector};\n`,t.byId%26%26(i+=`const elementById = ${t.byId};\n`),t.byClass%26%26(i+=`const elementByClass = ${t.byClass};\n`),t.traversal%26%26(i+=`const elementByTraversal = ${t.traversal};\n`),i+=`\`\`\`\n\n`,i+=`%23%23 Reading Element Properties\n\n`,i+=`\`\`\`javascript\n`,i+=`const text = element.textContent;\n`,i+=`const html = element.innerHTML;\n`,e.hasAttributes()%26%26Array.from(e.attributes).slice(0,3).forEach(e=>{i+=`const ${e.name.replace(/-/g,\"_\")} = element.getAttribute('${e.name}');\n`}),i+=`\`\`\`\n\n`,i+=`%23%23 Adding Event Listeners\n\n`,i+=`\`\`\`javascript\n`,i+=t.eventCode%3Ft.eventCode:`element.addEventListener('click', (event) => {\n  console.log('Element clicked');\n});\n`,i+=`\`\`\`\n\n`,i+=`%23%23 Modifying the Element\n\n`,i+=`\`\`\`javascript\n`,i+=n,i+=`\`\`\`\n`,H(i,\"Element Access Code\",\"markdown\")}function xe(t){const e=t.target.value.trim().toLowerCase(),n=document.getElementById(\"search-results\");if(!e)return void(n.style.display=\"none\");const i=Se(e);return 0===i.length%3F(d(n,\"<div style=\\"padding: 5px;\\">No results found</div>\"),void(n.style.display=\"block\")):void(d(n,i.map((e,t)=>{const n=e.tagName.toLowerCase(),i=e.id%3F`%23${e.id}`:\"\",d=l(e),r=d%3F`.${d.split(\" \")[0]}`:\"\";return`<div class=\"search-result-item\" data-result-index=\"${t}\">${n}${i}${r}</div>`}).join(\"\")),n.style.display=\"block\",document.querySelectorAll(\".search-result-item\").forEach(e=>{e.addEventListener(\"click\",()=>{const t=parseInt(e.dataset.resultIndex),d=i[t];d%26%26(ne(d),n.style.display=\"none\",document.getElementById(\"element-search\").value=\"\")})}),Me.elementSearchResults=i)}function Se(e){if(!e)return[];try{return Array.from(document.querySelectorAll(e)).slice(0,20)}catch(t){return[]}}function ke(){if(Me.selectedElement)return Me.selectedElement;const e=[\".content\",\".post-content\",\".article\",\".post\",\".entry-content\",\"article\",\"main\",\"[role=\\"main\\"]\",\"%23content\",\".markdown-body\",\".blog-post\",\".page-content\",\".container main\",\".main-content\"];for(const t of e){const e=document.querySelector(t);if(e%26%26200<e.textContent.trim().length)return e}return document.body}function Le(e){if(!e)return\"\";let t=e;try{t=decodeURIComponent(t.replace(/\+/g,\" \"))}catch(t){}const n=document.createElement(\"textarea\");return n.innerHTML=Te%3FTe.createHTML(t):t,t=n.value,t}function Ce(e){function t(e){if(!e)return\"\";if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.trim().replace(/\s+/g,\" \");return Le(t)}if(e.nodeType!==Node.ELEMENT_NODE)return\"\";const t=e.tagName.toLowerCase();if([\"script\",\"style\",\"noscript\",\"iframe\",\"svg\",\"nav\",\"header\",\"footer\"].includes(t))return\"\";if(\"ytd-transcript-segment-renderer\"===t||e.classList%26%26e.classList.contains(\"segment-timestamp\")||e.classList%26%26e.classList.contains(\"segment-text\")){const t=e.querySelector(\".segment-timestamp\"),n=e.querySelector(\".segment-text\");if(t%26%26n){const e=Le(t.textContent.trim()),i=Le(n.textContent.trim());return`${e} ${i}\n`}}const d=window.getComputedStyle(e),l=\"block\"===d.display||\"flex\"===d.display||\"grid\"===d.display||\"list-item\"===d.display;switch(t){case\"h1\":return`%23 ${n(e).trim()}\n\n`;case\"h2\":return`%23%23 ${n(e).trim()}\n\n`;case\"h3\":return`%23%23%23 ${n(e).trim()}\n\n`;case\"h4\":return`%23%23%23%23 ${n(e).trim()}\n\n`;case\"h5\":return`%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"h6\":return`%23%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"p\":case\"div\":const t=n(e).trim();return t%3Fl%3F`${t}\n\n`:t+\" \":\"\";case\"br\":return\"\n\";case\"ul\":return i(e,\"*\")+\"\n\";case\"ol\":return i(e,\"1.\")+\"\n\";case\"li\":return n(e).trim()+\"\n\";case\"a\":const d=Le(e.getAttribute(\"href\")||\"\");return`[${n(e).trim()}](${d})`;case\"img\":const r=Le(e.getAttribute(\"src\")||\"\"),a=Le(e.getAttribute(\"alt\")||\"\");return`![${a}](${r})\n\n`;case\"code\":case\"pre\":return`\`${n(e).trim()}\``;case\"blockquote\":return`> ${n(e).trim()}\n\n`;case\"strong\":case\"b\":return`**${n(e)}**`;case\"em\":case\"i\":return`*${n(e)}*`;case\"span\":return n(e);default:const o=n(e).trim();return o%3Fl%3F`${o}\n\n`:o+\" \":\"\";}}function n(e){let n=\"\";return e.childNodes.forEach(e=>{n+=t(e)}),n}function i(e,t){let i=\"\";const d=e.querySelectorAll(\":scope > li\");return d.forEach((e,d)=>{const l=\"1.\"===t%3F`${d+1}. `:`${t} `;i+=`${l}${n(e).trim()}\n`}),i}if(!e)return\"\";let d=\"\";return d=t(e),d.replace(/\n{3,}/g,\"\n\n\").trim()}function we(e,t,n){let i=document.title.replace(/[^a-z0-9]/gi,\"-\").toLowerCase()||\"content\",d=\".txt\",l=\"text/plain\";\"markdown\"===n%3F(d=\".md\",l=\"text/markdown\"):(\"json\"==n||\"structure\"==n)%26%26(d=\".json\",l=\"application/json\",e=JSON.stringify(e,null,2));const r=new Blob([e],{type:l}),o=URL.createObjectURL(r),s=document.createElement(\"a\");s.href=Te%3FTe.createScriptURL(o):o,s.download=`${i}${d}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}function Ne(){const e={pageInfo:{title:document.title,url:window.location.href},frameworks:Me.framework,selectedElement:Me.selectedElement%3Fu(Me.selectedElement):null};we(e,\"analysis-report\",\"json\")}function Ie(){const e=document.getElementById(\"html-analyzer-tool\");e%26%26e.remove(),D(),de(),document.querySelectorAll(\".element-highlight, .event-highlight, .accessibility-highlight, .z-index-highlighter\").forEach(e=>e.remove());const t=document.querySelector(\"style[data-analyzer-tool]\");t%26%26t.remove()}function Ae(e,t=50,n=100){function i(){document.body%3Fe():d<t%3F(d++,setTimeout(i,n)):console.error(\"Failed to initialize: document.body not available after retries\")}let d=0;i()}function qe(){i()||(console.error(\"Failed to append styles, retrying...\"),setTimeout(()=>i(),100)),Ae(()=>{try{L(),setTimeout(()=>{X(\"HTML Structure Analyzer ready! Click \\"Select Element\\" to begin inspection.\",3e3)},500)}catch(t){console.error(\"Failed to initialize tool:\",t)}})}const Be=document.createElement(\"style\");Be.textContent=`      :root {        --bg-color: %231a1a1a;        --text-color: %23e0e0e0;        --border-color: %23404040;        --button-bg: %232d2d2d;        --button-hover: %233d3d3d;        --primary-bg: %234a90e2;        --primary-hover: %233b7dd8;        --secondary-bg: %236c757d;        --secondary-hover: %235a6268;        --success-bg: %2328a745;        --success-hover: %23218838;        --danger-bg: %23e25c5c;        --danger-hover: %23d44b4b;        --warning-bg: %23ffc107;        --warning-hover: %23e0a800;        --info-bg: %2317a2b8;        --info-hover: %23138496;        --preview-bg: %232d2d2d;        --preview-header-bg: %231a1a1a;        --preview-border: %23404040;        --highlight-border: rgba(255, 87, 34, 0.8);        --highlight-bg: rgba(255, 87, 34, 0.2);        --tab-active-bg: %233d3d3d;        --z-index-highlight: rgba(0, 255, 0, 0.4);      }            %23html-analyzer-tool {        position: fixed;        top: 20px;        right: 20px;        background: var(--bg-color);        border: 1px solid var(--border-color);        border-radius: 8px;        padding: 15px;        width: 400px;        height: calc(100vh - 40px);        overflow-y: auto;        box-shadow: 0 2px 10px rgba(0,0,0,0.2);        z-index: 9999;        font-family: Arial, sans-serif;        color: var(--text-color);        resize: both;        overflow: auto;        min-width: 250px;        min-height: 200px;      }            %23html-analyzer-tool h3 {        margin-top: 0;        margin-bottom: 15px;        font-size: 16px;        color: var(--text-color);        cursor: move;        user-select: none;      }            %23html-analyzer-tool button {        display: block;        width: 100%25;        padding: 8px;        margin-bottom: 8px;        background: var(--button-bg);        border: 1px solid var(--border-color);        border-radius: 4px;        cursor: pointer;        font-size: 14px;        transition: background 0.2s;        color: var(--text-color);      }            %23html-analyzer-tool button:hover {        background: var(--button-hover);      }            %23html-analyzer-tool button.primary {        background: var(--primary-bg);        color: white;        border: 1px solid var(--primary-hover);      }            %23html-analyzer-tool button.primary:hover {        background: var(--primary-hover);      }            %23html-analyzer-tool button.secondary {        background: var(--secondary-bg);        color: white;        border: 1px solid var(--secondary-hover);      }            %23html-analyzer-tool button.secondary:hover {        background: var(--secondary-hover);      }            %23html-analyzer-tool button.success {        background: var(--success-bg);        color: white;        border: 1px solid var(--success-hover);      }            %23html-analyzer-tool button.success:hover {        background: var(--success-hover);      }            %23html-analyzer-tool button.danger {        background: var(--danger-bg);        color: white;        border: 1px solid var(--danger-hover);      }            %23html-analyzer-tool button.danger:hover {        background: var(--danger-hover);      }            %23html-analyzer-tool button.warning {        background: var(--warning-bg);        color: black;        border: 1px solid var(--warning-hover);      }            %23html-analyzer-tool button.warning:hover {        background: var(--warning-hover);      }            %23html-analyzer-tool button.info {        background: var(--info-bg);        color: white;        border: 1px solid var(--info-hover);      }            %23html-analyzer-tool button.info:hover {        background: var(--info-hover);      }            %23html-analyzer-tool .button-group {        display: flex;        gap: 5px;        margin-bottom: 8px;      }            %23html-analyzer-tool .button-group button {        margin-bottom: 0;      }            %23html-analyzer-tool .tab-container {        margin-top: 10px;      }            %23html-analyzer-tool .tab-buttons {        display: flex;        border-bottom: 1px solid var(--border-color);        margin-bottom: 10px;      }            %23html-analyzer-tool .tab-button {        padding: 8px 12px;        border: none;        background: none;        cursor: pointer;        border-radius: 4px 4px 0 0;        margin-right: 2px;        margin-bottom: 0;      }            %23html-analyzer-tool .tab-button.active {        background: var(--tab-active-bg);        border: 1px solid var(--border-color);        border-bottom: none;      }            %23html-analyzer-tool .tab-content {        display: none;      }            %23html-analyzer-tool .tab-content.active {        display: block;      }            %23preview-overlay {        position: fixed;        top: 0;        left: 0;        right: 0;        bottom: 0;        background: rgba(0,0,0,0.7);        z-index: 10000;        display: flex;        justify-content: center;        align-items: center;      }            %23preview-container {        width: 80%25;        height: 80%25;        background: var(--preview-bg);        border-radius: 8px;        display: flex;        flex-direction: column;        overflow: hidden;        resize: both;      }            %23preview-header {        display: flex;        justify-content: space-between;        align-items: center;        padding: 10px 15px;        background: var(--preview-header-bg);        border-bottom: 1px solid var(--preview-border);      }            %23preview-content {        flex-grow: 1;        padding: 15px;        overflow-y: auto;        white-space: pre-wrap;        font-family: monospace;        font-size: 13px;        line-height: 1.4;        color: var(--text-color);      }            %23preview-tabs {        display: flex;        background: var(--preview-header-bg);        border-bottom: 1px solid var(--preview-border);      }            %23preview-tabs button {        padding: 8px 15px;        border: none;        background: none;        cursor: pointer;      }            %23preview-tabs button.active {        background: var(--preview-bg);        border-bottom: 2px solid var(--primary-bg);      }            %23preview-actions {        padding: 10px 15px;        background: var(--preview-header-bg);        border-top: 1px solid var(--preview-border);        display: flex;        justify-content: flex-end;      }            %23preview-actions button {        padding: 8px 15px;        margin-left: 10px;        border-radius: 4px;        cursor: pointer;      }      .element-highlight {        outline: 2px solid var(--highlight-border) !important;        background-color: var(--highlight-bg) !important;        position: relative;      }            .element-label {        position: absolute;        top: 0;        left: 0;        background: var(--primary-bg);        color: white;        font-size: 12px;        padding: 2px 5px;        border-radius: 2px;        z-index: 10001;        pointer-events: none;      }            .z-index-highlighter {        position: absolute;        background: var(--z-index-highlight);        pointer-events: none;        z-index: 10001;      }            .tooltip {        position: fixed;        background: var(--bg-color);        border: 1px solid var(--border-color);        padding: 8px;        border-radius: 4px;        font-size: 12px;        max-width: 300px;        z-index: 10002;        box-shadow: 0 2px 8px rgba(0,0,0,0.2);      }            .tooltip pre {        margin: 0;        white-space: pre-wrap;        font-family: monospace;        font-size: 11px;      }            .accessibility-highlight {        outline: 2px dashed %239c27b0 !important;      }            .event-highlight {        outline: 2px dashed %23ff9800 !important;      }            .breadcrumb-trail {        display: flex;        flex-wrap: wrap;        padding: 5px;        margin-bottom: 10px;        background: var(--button-bg);        border-radius: 4px;        font-size: 12px;      }            .breadcrumb-item {        margin-right: 5px;        cursor: pointer;        color: var(--primary-bg);      }            .breadcrumb-item:not(:last-child)::after {        content: \">\";        margin-left: 5px;        color: var(--text-color);      }            .breadcrumb-item:hover {        text-decoration: underline;      }            .element-tree {        font-family: monospace;        font-size: 12px;        line-height: 1.5;      }            .tree-item {        padding-left: 15px;        border-left: 1px dotted var(--border-color);        margin-left: 5px;        margin-bottom: 3px;      }            .tree-item-label {        cursor: pointer;      }            .tree-item-label:hover {        text-decoration: underline;        color: var(--primary-bg);      }            .tree-toggler {        display: inline-block;        width: 16px;        text-align: center;        cursor: pointer;      }            .property-list {        border: 1px solid var(--border-color);        border-radius: 4px;        margin-top: 10px;        margin-bottom: 10px;        max-height: 200px;        overflow-y: auto;      }            .property-item {        display: flex;        padding: 5px;        border-bottom: 1px solid var(--border-color);      }            .property-name {        font-weight: bold;        width: 30%25;      }            .property-value {        width: 70%25;        word-break: break-word;      }            .search-container {        margin-bottom: 10px;      }            .search-input {        width: 100%25;        padding: 8px;        border: 1px solid var(--border-color);        border-radius: 4px;        background: var(--bg-color);        color: var(--text-color);      }            .search-results {        margin-top: 5px;        max-height: 150px;        overflow-y: auto;        border: 1px solid var(--border-color);        border-radius: 4px;        padding: 5px;      }            .search-result-item {        padding: 3px;        cursor: pointer;        border-bottom: 1px solid var(--border-color);      }            .search-result-item:hover {        background: var(--button-hover);      }            .code-snippet {        background: %23f5f5f5;        border: 1px solid %23ddd;        border-radius: 4px;        padding: 10px;        margin: 10px 0;        font-family: monospace;        white-space: pre-wrap;        overflow-x: auto;      }            [data-theme=\"dark\"] .code-snippet {        background: %232d2d2d;        border-color: %23444;      }            .inspector-section {        margin-bottom: 15px;        border-bottom: 1px solid var(--border-color);        padding-bottom: 10px;      }            .inspector-section-title {        font-weight: bold;        margin-bottom: 5px;      }            .badge {        display: inline-block;        padding: 2px 6px;        border-radius: 10px;        font-size: 11px;        margin-right: 5px;        margin-bottom: 5px;        color: white;      }            .badge-primary { background: var(--primary-bg); }      .badge-secondary { background: var(--secondary-bg); }      .badge-success { background: var(--success-bg); }      .badge-danger { background: var(--danger-bg); }      .badge-warning { background: var(--warning-bg); color: black; }      .badge-info { background: var(--info-bg); }    `;let Te=null;if(window.trustedTypes%26%26trustedTypes.createPolicy)try{Te=trustedTypes.createPolicy(\"html-analyzer-tool\",{createHTML:e=>e,createScriptURL:e=>e,createScript:e=>e})}catch(t){console.warn(\"Failed to create Trusted Types policy:\",t)}let Me={selectedElement:null,hoveredElement:null,extractedMarkdown:\"\",inspectedElements:[],breadcrumbTrail:[],highlightedElements:[],eventListeners:{},analyzedStructure:null,framework:r(),visualMode:\"normal\",activeTab:\"inspector\",previewActiveTab:\"markdown\",isInspecting:!1,isResizing:!1,isMoving:!1,moveOffset:{x:0,y:0},elementSearchResults:[],inspectionHistory:[]};return\"loading\"===document.readyState%3Fdocument.addEventListener(\"DOMContentLoaded\",qe):qe(),{selectElement:ne,highlightElement:ie,generateUniqueSelector:u,findEventListeners:f,analyzeDOM:x,close:Ie}})()}();"
  },
  {
    "name": "Extract JSONs",
    "description": "Scans the page for JSON objects and arrays, extracts them, and allows copying or downloading",
    "file": "ExtractJsons.js",
    "icon": "ðŸ“‹",
    "code": "javascript:(function()%7Bjavascript%3A(function() %7B%0A  %2F%2F --- Configuration ---%0A  const SIDEBAR_ID %3D 'json-extractor-sidebar-v3'%3B%0A  const SIDEBAR_WIDTH %3D '380px'%3B%0A  const HIGHLIGHT_CLASS %3D 'json-extractor-rainbow-highlight'%3B%0A  const NOTIFICATION_TIMEOUT %3D 2500%3B%0A%0A  %2F%2F --- Check if sidebar already exists ---%0A  if (document.getElementById(SIDEBAR_ID)) %7B%0A    document.getElementById(SIDEBAR_ID).remove()%3B%0A    document.body.style.marginRight %3D ''%3B%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> el.classList.remove(HIGHLIGHT_CLASS))%3B%0A    const existingStyle %3D document.querySelector('%23json-extractor-styles')%3B%0A    if (existingStyle) existingStyle.remove()%3B%0A    const existingBadge %3D document.getElementById('json-extractor-badge')%3B%0A    if (existingBadge) existingBadge.remove()%3B%0A    return%3B%0A  %7D%0A%0A  %2F%2F --- State Variables ---%0A  let isSelecting %3D false%3B%0A  let capturedData %3D %5B%5D%3B%0A  let originalCursor %3D document.body.style.cursor%3B%0A  let highlightedElement %3D null%3B%0A  let mouseMoveThrottle %3D null%3B%0A%0A  %2F%2F --- Inject CSS for Rainbow Highlight and Notifications ---%0A  const styleElement %3D document.createElement('style')%3B%0A  styleElement.id %3D 'json-extractor-styles'%3B%0A  styleElement.textContent %3D %60%0A    %40keyframes rainbow-glow-animation %7B%0A      0%25 %7B %0A        outline-color%3A hsl(0%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(0%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(0%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(0%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      17%25 %7B %0A        outline-color%3A hsl(60%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(60%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(60%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(60%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      33%25 %7B %0A        outline-color%3A hsl(120%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(120%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(120%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(120%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      50%25 %7B %0A        outline-color%3A hsl(180%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(180%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(180%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(180%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      67%25 %7B %0A        outline-color%3A hsl(240%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(240%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(240%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(240%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      83%25 %7B %0A        outline-color%3A hsl(300%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(300%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(300%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(300%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      100%25 %7B %0A        outline-color%3A hsl(360%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(360%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(360%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(360%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D %7B%0A      outline%3A 3px solid hsl(0%2C 100%25%2C 65%25) !important%3B%0A      outline-offset%3A 2px !important%3B%0A      animation%3A rainbow-glow-animation 2.5s linear infinite !important%3B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.05) !important%3B%0A      cursor%3A crosshair !important%3B%0A      position%3A relative !important%3B %0A      z-index%3A 999998 !important%3B %0A      transition%3A all 0.2s ease-in-out !important%3B%0A      pointer-events%3A auto !important%3B%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D%3Ahover %7B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.1) !important%3B%0A    %7D%0A    %23json-extractor-notification %7B%0A      position%3A fixed%3B%0A      top%3A 20px%3B%0A      left%3A 50%25%3B%0A      transform%3A translateX(-50%25)%3B%0A      background-color%3A %23333%3B%0A      color%3A white%3B%0A      padding%3A 12px 25px%3B%0A      border-radius%3A 8px%3B%0A      z-index%3A 1000001%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      font-size%3A 14px%3B%0A      box-shadow%3A 0 5px 15px rgba(0%2C0%2C0%2C0.3)%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.3s ease-in-out%2C top 0.3s ease-in-out%3B%0A      pointer-events%3A none%3B%0A    %7D%0A    %23json-extractor-notification.show %7B%0A      opacity%3A 1%3B%0A      top%3A 30px%3B%0A    %7D%0A    %23json-extractor-notification.success %7B%0A      background-color%3A %234CAF50%3B%0A    %7D%0A    %23json-extractor-notification.error %7B%0A      background-color%3A %23F44336%3B%0A    %7D%0A    %23json-extractor-notification.info %7B%0A      background-color%3A %232196F3%3B%0A    %7D%0A    %23json-extractor-badge %7B%0A      position%3A fixed%3B%0A      background%3A rgba(0%2C 0%2C 0%2C 0.8)%3B%0A      color%3A white%3B%0A      padding%3A 4px 8px%3B%0A      border-radius%3A 12px%3B%0A      font-size%3A 11px%3B%0A      font-weight%3A 600%3B%0A      z-index%3A 1000002%3B%0A      pointer-events%3A none%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.2s ease-in-out%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      white-space%3A nowrap%3B%0A      box-shadow%3A 0 2px 8px rgba(0%2C0%2C0%2C0.3)%3B%0A    %7D%0A    %23json-extractor-badge.show %7B%0A      opacity%3A 1%3B%0A    %7D%0A  %60%3B%0A  document.head.appendChild(styleElement)%3B%0A%0A  %2F%2F --- Create Sidebar ---%0A  const sidebar %3D document.createElement('div')%3B%0A  sidebar.id %3D SIDEBAR_ID%3B%0A  sidebar.style.cssText %3D %60%0A    position%3A fixed%3B%0A    top%3A 0%3B%0A    right%3A 0%3B%0A    width%3A %24%7BSIDEBAR_WIDTH%7D%3B%0A    height%3A 100vh%3B%0A    background%3A %23282c34%3B%0A    color%3A %23abb2bf%3B%0A    z-index%3A 999999%3B%0A    font-family%3A 'Inter'%2C 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A    font-size%3A 14px%3B%0A    overflow-y%3A auto%3B%0A    box-shadow%3A -8px 0 25px rgba(0%2C0%2C0%2C0.5)%3B%0A    border-left%3A 4px solid %2361afef%3B%0A    pointer-events%3A auto%3B%0A    display%3A flex%3B%0A    flex-direction%3A column%3B%0A    transition%3A transform 0.3s ease-in-out%3B%0A  %60%3B%0A%0A  %2F%2F --- Create Sidebar Content ---%0A  sidebar.innerHTML %3D %60%0A    <div style%3D\"padding%3A 25px%3B border-bottom%3A 1px solid %233b4048%3B\">%0A      <h3 style%3D\"margin%3A 0 0 20px 0%3B color%3A %2361afef%3B font-size%3A 20px%3B font-weight%3A 600%3B\">%0A        <svg xmlns%3D\"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\" viewBox%3D\"0 0 24 24\" fill%3D\"currentColor\" style%3D\"width%3A24px%3B height%3A24px%3B vertical-align%3Amiddle%3B margin-right%3A8px%3B\">%0A          <path d%3D\"M12 2.5a.75.75 0 0 1 .75.75v2.518l4.08 2.04a.75.75 0 0 1-.03 1.33l-4.3 2.15a.75.75 0 0 1-.5 0l-4.3-2.15a.75.75 0 0 1-.03-1.33L11.25 5.768V3.25a.75.75 0 0 1 .75-.75ZM11.25 13.617v2.633a.75.75 0 0 0 .5.715l4.3 2.15a.75.75 0 0 0 .97-.031.75.75 0 0 0 .03-.97l-4.08-2.04a.75.75 0 0 0-.72-.017Zm1.5 0-.72.017a.75.75 0 0 1-.72-.017L7.23 11.58a.75.75 0 0 0 .03.97.75.75 0 0 0 .97.03l4.3-2.15a.75.75 0 0 0 .5-.715v-2.633Z\" %2F>%0A          <path fill-rule%3D\"evenodd\" d%3D\"M22.5 12c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5c1.836 0 3.562.462 5.074 1.286a.75.75 0 0 1-.6 1.372A9.004 9.004 0 0 0 12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9h-2.25a.75.75 0 0 1 0-1.5H22.5Z\" clip-rule%3D\"evenodd\" %2F>%0A        <%2Fsvg>%0A        JSON Data Extractor%0A      <%2Fh3>%0A      <div style%3D\"display%3A grid%3B grid-template-columns%3A 1fr 1fr%3B gap%3A 12px%3B\">%0A        <button id%3D\"start-selection-btn\" class%3D\"sidebar-btn primary\">ðŸŽ¯ Start Selecting<%2Fbutton>%0A        <button id%3D\"clear-data-btn\" class%3D\"sidebar-btn danger\">ðŸ—‘%EF%B8%8F Clear All<%2Fbutton>%0A        <button id%3D\"copy-json-btn\" class%3D\"sidebar-btn info\">ðŸ“‹ Copy JSON<%2Fbutton>%0A        <button id%3D\"copy-items-btn\" class%3D\"sidebar-btn info\">ðŸ“„ Copy Items<%2Fbutton>%0A        <button id%3D\"export-json-btn\" class%3D\"sidebar-btn success\">ðŸ’¾ Download JSON<%2Fbutton>%0A      <%2Fdiv>%0A      <button id%3D\"close-sidebar-btn\" class%3D\"sidebar-btn secondary\" style%3D\"width%3A100%25%3B margin-top%3A12px%3B\">âŒ Close Extractor<%2Fbutton>%0A      <div id%3D\"selection-status-msg\" style%3D\"margin-top%3A 15px%3B padding%3A 10px%3B background%3A %233b4048%3B border-radius%3A 6px%3B font-size%3A 13px%3B display%3A none%3B text-align%3A center%3B\">%0A        Click an element to capture data. Press <kbd style%3D\"background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B\">ESC<%2Fkbd> to stop.%0A      <%2Fdiv>%0A    <%2Fdiv>%0A%0A    <div style%3D\"padding%3A 20px%3B flex-grow%3A 1%3B display%3A flex%3B flex-direction%3A column%3B min-height%3A 0%3B\">%0A      <div style%3D\"margin-bottom%3A 15px%3B\">%0A        <label for%3D\"extraction-mode-select\" style%3D\"display%3A block%3B margin-bottom%3A 8px%3B font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Extraction Mode%3A<%2Flabel>%0A        <select id%3D\"extraction-mode-select\" class%3D\"sidebar-select\">%0A          <option value%3D\"partialJSON\" selected>Best-Effort JSON Parts<%2Foption>%0A          <option value%3D\"textContent\">Text Content<%2Foption>%0A          <option value%3D\"innerHTML\">Inner HTML<%2Foption>%0A          <option value%3D\"attributes\">All Attributes<%2Foption>%0A          <option value%3D\"dataset\">Data Attributes (data-*)<%2Foption>%0A          <option value%3D\"computed\">Key Computed Styles<%2Foption>%0A          <option value%3D\"custom\">Attempt Custom JSON<%2Foption>%0A        <%2Fselect>%0A      <%2Fdiv>%0A      <div style%3D\"display%3A flex%3B justify-content%3A space-between%3B align-items%3A center%3B margin-bottom%3A 10px%3B\">%0A        <span style%3D\"font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Captured Items%3A <span id%3D\"item-count-display\">0<%2Fspan><%2Fspan>%0A        <span style%3D\"font-size%3A 12px%3B color%3A %239da5b4%3B\">Size%3A <span id%3D\"data-size-display\">0 KB<%2Fspan><%2Fspan>%0A      <%2Fdiv>%0A      <div style%3D\"background%3A %2321252b%3B border-radius%3A 6px%3B padding%3A 15px%3B flex-grow%3A 1%3B overflow-y%3A auto%3B border%3A 1px solid %233b4048%3B min-height%3A 150px%3B\">%0A        <pre id%3D\"json-output-display\" style%3D\"margin%3A 0%3B font-family%3A 'Fira Code'%2C 'Courier New'%2C monospace%3B font-size%3A 12.5px%3B white-space%3A pre-wrap%3B word-break%3A break-all%3B color%3A %23d19a66%3B\">No data captured yet...<%2Fpre>%0A      <%2Fdiv>%0A    <%2Fdiv>%0A    <style>%0A      .sidebar-btn %7B background%3A %234b5263%3B color%3A %23d4d7dd%3B border%3A none%3B padding%3A 10px 15px%3B border-radius%3A 6px%3B cursor%3A pointer%3B font-size%3A 13px%3B font-weight%3A 500%3B transition%3A background-color 0.2s%2C transform 0.1s%3B text-align%3A center%3B %7D%0A      .sidebar-btn%3Ahover %7B background%3A %235c6370%3B %7D%0A      .sidebar-btn%3Aactive %7B transform%3A scale(0.98)%3B %7D%0A      .sidebar-btn.primary %7B background%3A %2361afef%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.primary%3Ahover %7B background%3A %23529bda%3B %7D%0A      .sidebar-btn.danger %7B background%3A %23e06c75%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.danger%3Ahover %7B background%3A %23c95f69%3B %7D%0A      .sidebar-btn.info %7B background%3A %2356b6c2%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.info%3Ahover %7B background%3A %234aa7b3%3B %7D%0A      .sidebar-btn.success %7B background%3A %2398c379%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.success%3Ahover %7B background%3A %2389b16c%3B %7D%0A      .sidebar-btn.secondary %7B background%3A %233b4048%3B color%3A %23abb2bf%3B %7D%0A      .sidebar-btn.secondary%3Ahover %7B background%3A %23454c58%3B %7D%0A      .sidebar-select %7B width%3A 100%25%3B padding%3A 10px%3B border-radius%3A 6px%3B background%3A %233b4048%3B color%3A %23abb2bf%3B border%3A 1px solid %23454c58%3B font-size%3A 13px%3B %7D%0A      %23%24%7BSIDEBAR_ID%7D kbd %7B background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B border%3A 1px solid %237d8590%3B box-shadow%3A 1px 1px 1px rgba(0%2C0%2C0%2C0.2)%3B %7D%0A    <%2Fstyle>%0A  %60%3B%0A  document.body.appendChild(sidebar)%3B%0A  document.body.style.marginRight %3D SIDEBAR_WIDTH%3B%0A%0A  %2F%2F --- Helper Functions ---%0A  function showNotification(message%2C type %3D 'info'%2C duration %3D NOTIFICATION_TIMEOUT) %7B%0A    let notification %3D document.getElementById('json-extractor-notification')%3B%0A    if (!notification) %7B%0A      notification %3D document.createElement('div')%3B%0A      notification.id %3D 'json-extractor-notification'%3B%0A      document.body.appendChild(notification)%3B%0A    %7D%0A    notification.textContent %3D message%3B%0A    notification.className %3D %60show %24%7Btype%7D%60%3B %0A    setTimeout(() %3D> %7B%0A      notification.className %3D notification.className.replace('show'%2C '').trim()%3B%0A    %7D%2C duration)%3B%0A  %7D%0A%0A  function createBadge() %7B%0A    let badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (!badge) %7B%0A      badge %3D document.createElement('div')%3B%0A      badge.id %3D 'json-extractor-badge'%3B%0A      document.body.appendChild(badge)%3B%0A    %7D%0A    return badge%3B%0A  %7D%0A%0A  function countJsonComponents(element%2C mode) %7B%0A    if (!element) return 0%3B%0A    %0A    try %7B%0A      const rawText %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A      %0A      %2F%2F Skip counting for very large text to prevent hanging%0A      if (rawText.length > 50000) return 0%3B%0A      %0A      switch (mode) %7B%0A        case 'textContent'%3A%0A        case 'innerHTML'%3A%0A        case 'attributes'%3A%0A        case 'dataset'%3A%0A        case 'computed'%3A%0A          return 1%3B %2F%2F These modes always return 1 object%0A          %0A        case 'custom'%3A%0A          try %7B%0A            JSON.parse(rawText)%3B%0A            return 1%3B%0A          %7D catch (e) %7B%0A            let count %3D 0%3B%0A            for (let attr of element.attributes) %7B%0A              if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A                try %7B%0A                  JSON.parse(attr.value)%3B%0A                  count%2B%2B%3B%0A                %7D catch (e2) %7B%0A                  %2F%2F Invalid JSON%2C don't count%0A                %7D%0A              %7D%0A            %7D%0A            return count%3B%0A          %7D%0A          %0A        case 'partialJSON'%3A%0A          %2F%2F Simplified counting to avoid hanging - just count likely JSON objects%0A          try %7B%0A            const parsedOuter %3D JSON.parse(rawText)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A              %2F%2F Just return 1 for input%2Foutput structure to avoid complex parsing during hover%0A              return 1%3B%0A            %7D%0A          %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to simple greedy count%0A          %7D%0A          %0A          %2F%2F Simple count of JSON-like structures without full parsing%0A          const jsonObjects %3D (rawText.match(%2F%5C%7B%5B%5E%7B%7D%5D*%5C%7D%2Fg) %7C%7C %5B%5D).length%3B%0A          const jsonArrays %3D (rawText.match(%2F%5C%5B%5B%5E%5C%5B%5C%5D%5D*%5C%5D%2Fg) %7C%7C %5B%5D).length%3B%0A          return jsonObjects %2B jsonArrays%3B%0A          %0A        default%3A%0A          return 0%3B%0A      %7D%0A    %7D catch (e) %7B%0A      return 0%3B%0A    %7D%0A  %7D%0A%0A  function showBadge(count%2C x%2C y) %7B%0A    const badge %3D createBadge()%3B%0A    if (count > 0) %7B%0A      badge.textContent %3D %60%24%7Bcount%7D JSON%24%7Bcount %3D%3D%3D 1 %3F '' %3A 's'%7D%60%3B%0A      badge.style.left %3D (x %2B 15) %2B 'px'%3B%0A      badge.style.top %3D (y - 25) %2B 'px'%3B%0A      badge.classList.add('show')%3B%0A    %7D else %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  function hideBadge() %7B%0A    const badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (badge) %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Modern clipboard copy function%0A  async function copyToClipboard(text) %7B%0A    try %7B%0A      if (navigator.clipboard %26%26 window.isSecureContext) %7B%0A        await navigator.clipboard.writeText(text)%3B%0A        return true%3B%0A      %7D else %7B%0A        %2F%2F Fallback for older browsers or non-secure contexts%0A        const textarea %3D document.createElement('textarea')%3B%0A        textarea.value %3D text%3B%0A        textarea.style.position %3D 'fixed'%3B%0A        textarea.style.left %3D '-999999px'%3B%0A        textarea.style.top %3D '-999999px'%3B%0A        document.body.appendChild(textarea)%3B%0A        textarea.focus()%3B%0A        textarea.select()%3B%0A        const result %3D document.execCommand('copy')%3B%0A        document.body.removeChild(textarea)%3B%0A        return result%3B%0A      %7D%0A    %7D catch (err) %7B%0A      console.error('Copy failed%3A'%2C err)%3B%0A      return false%3B%0A    %7D%0A  %7D%0A%0A  function repairJsonStringLiterals(jsonString) %7B%0A    let repaired %3D ''%3B%0A    let inString %3D false%3B%0A    let escapeNext %3D false%3B%0A%0A    for (let i %3D 0%3B i < jsonString.length%3B i%2B%2B) %7B%0A        const char %3D jsonString%5Bi%5D%3B%0A        if (escapeNext) %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D false%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '%5C%5C') %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D true%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '\"') %7B%0A            inString %3D !inString%3B%0A            repaired %2B%3D char%3B%0A            continue%3B%0A        %7D%0A        if (inString) %7B%0A            if (char %3D%3D%3D '%5Cn') repaired %2B%3D '%5C%5Cn'%3B%0A            else if (char %3D%3D%3D '%5Cr') repaired %2B%3D '%5C%5Cr'%3B%0A            else if (char %3D%3D%3D '%5Ct') repaired %2B%3D '%5C%5Ct'%3B%0A            else repaired %2B%3D char%3B%0A        %7D else %7B%0A            repaired %2B%3D char%3B%0A        %7D%0A    %7D%0A    return repaired%3B%0A  %7D%0A%0A  function flattenUnnecessaryArrays(data) %7B%0A    %2F%2F Simple single-level flatten to avoid infinite loops%0A    %2F%2F Only flatten if it's an array with exactly 1 element that is also an array%0A    if (Array.isArray(data) %26%26 data.length %3D%3D%3D 1 %26%26 Array.isArray(data%5B0%5D)) %7B%0A      return data%5B0%5D%3B%0A    %7D%0A    return data%3B%0A  %7D%0A%0A  function extractGreedyJson(text) %7B%0A    const results %3D %5B%5D%3B%0A    let remainingText %3D text.trim()%3B%0A    %0A    while (remainingText.length > 0) %7B%0A        let foundThisIteration %3D false%3B%0A        let firstJsonCharIndex %3D -1%3B%0A%0A        for (let i %3D 0%3B i < remainingText.length%3B i%2B%2B) %7B%0A            if (remainingText%5Bi%5D %3D%3D%3D '%7B' %7C%7C remainingText%5Bi%5D %3D%3D%3D '%5B') %7B%0A                firstJsonCharIndex %3D i%3B%0A                break%3B%0A            %7D%0A        %7D%0A%0A        if (firstJsonCharIndex %3D%3D%3D -1) break%3B %0A%0A        const textToParse %3D remainingText.substring(firstJsonCharIndex)%3B%0A%0A        for (let i %3D 1%3B i <%3D textToParse.length%3B i%2B%2B) %7B%0A            const segment %3D textToParse.substring(0%2C i)%3B%0A            %0A            if ((segment.startsWith('%7B') %26%26 segment.endsWith('%7D')) %7C%7C (segment.startsWith('%5B') %26%26 segment.endsWith('%5D'))) %7B%0A                try %7B%0A                    JSON.parse(segment)%3B%0A                    results.push(segment)%3B%0A                    remainingText %3D textToParse.substring(i)%3B %0A                    foundThisIteration %3D true%3B%0A                    break%3B %0A                %7D catch (e) %7B%0A                    try %7B%0A                        const repairedSegment %3D repairJsonStringLiterals(segment)%3B%0A                        if (repairedSegment !%3D%3D segment) %7B%0A                            JSON.parse(repairedSegment)%3B%0A                            results.push(repairedSegment)%3B%0A                            remainingText %3D textToParse.substring(i)%3B%0A                            foundThisIteration %3D true%3B%0A                            break%3B %0A                        %7D%0A                    %7D catch (e2) %7B%0A                        %2F%2F Continue extending segment%0A                    %7D%0A                %7D%0A            %7D%0A        %7D%0A        %0A        if (!foundThisIteration) %7B%0A            remainingText %3D remainingText.substring(firstJsonCharIndex %2B 1)%3B%0A        %7D%0A    %7D%0A    return results%3B%0A  %7D%0A%0A  function extractJSON(element%2C mode) %7B%0A    const timestamp %3D new Date().toISOString()%3B%0A    const commonData %3D %7B%0A        selector%3A getSelector(element)%2C%0A        tag%3A element.tagName.toLowerCase()%2C%0A        timestamp%3A timestamp%0A    %7D%3B%0A    const rawTextForPartial %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A%0A    switch (mode) %7B%0A      case 'textContent'%3A%0A        return %7B ...commonData%2C textContent%3A rawTextForPartial %7D%3B%0A      case 'innerHTML'%3A%0A        return %7B ...commonData%2C innerHTML%3A element.innerHTML %7D%3B%0A      case 'attributes'%3A%0A        let attrs %3D %7B%7D%3B%0A        for (let attr of element.attributes) attrs%5Battr.name%5D %3D attr.value%3B%0A        return %7B ...commonData%2C attributes%3A attrs %7D%3B%0A      case 'dataset'%3A%0A        return %7B ...commonData%2C dataset%3A %7B ...element.dataset %7D %7D%3B%0A      case 'computed'%3A%0A        let styles %3D window.getComputedStyle(element)%3B%0A        let computedStyles %3D %7B%7D%3B%0A        %5B'display'%2C 'position'%2C 'width'%2C 'height'%2C 'color'%2C 'background-color'%2C 'font-size'%2C 'font-family'%2C 'font-weight'%2C 'margin'%2C 'padding'%2C 'border'%2C 'opacity'%2C 'visibility'%2C 'z-index'%2C 'overflow'%2C 'text-align'%2C 'line-height'%5D.forEach(prop %3D> %7B%0A          computedStyles%5Bprop%5D %3D styles.getPropertyValue(prop)%3B%0A        %7D)%3B%0A        return %7B ...commonData%2C computedStyles%3A computedStyles %7D%3B%0A      case 'custom'%3A %0A        let jsonText %3D rawTextForPartial%3B%0A        try %7B%0A          const parsedText %3D JSON.parse(jsonText)%3B%0A          return %7B ...commonData%2C source%3A 'textContent'%2C parsedJSON%3A parsedText %7D%3B%0A        %7D catch (e) %7B%0A          let jsonAttrs %3D %7B%7D%3B%0A          let foundInDataAttr %3D false%3B%0A          for (let attr of element.attributes) %7B%0A            if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A              try %7B%0A                jsonAttrs%5Battr.name%5D %3D JSON.parse(attr.value)%3B%0A                foundInDataAttr %3D true%3B%0A              %7D catch (e2) %7B%0A                jsonAttrs%5Battr.name%5D %3D %60Error parsing%3A %24%7Battr.value.substring(0%2C50)%7D...%60%3B%0A              %7D%0A            %7D%0A          %7D%0A          if (foundInDataAttr) %7B%0A            return %7B ...commonData%2C source%3A 'dataAttributes'%2C possibleJSON%3A jsonAttrs %7D%3B%0A          %7D else %7B%0A            return %7B ...commonData%2C source%3A 'none'%2C error%3A 'Could not parse JSON from text or data attributes.'%2C rawTextSample%3A jsonText.substring(0%2C 200) %7D%3B%0A          %7D%0A        %7D%0A      case 'partialJSON'%3A %0A        try %7B%0A            const parsedOuter %3D JSON.parse(rawTextForPartial)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A                let finalOutputString %3D parsedOuter.output%3B%0A                let parsedInnerJson %3D null%3B%0A                try %7B%0A                    parsedInnerJson %3D JSON.parse(finalOutputString)%3B%0A                %7D catch (innerParseError) %7B%0A                    const repairedInnerOutput %3D repairJsonStringLiterals(finalOutputString)%3B%0A                    try %7B%0A                        parsedInnerJson %3D JSON.parse(repairedInnerOutput)%3B%0A                    %7D catch (repairedInnerParseError) %7B%0A                        parsedInnerJson %3D null%3B%0A                    %7D%0A                %7D%0A%0A                if (parsedInnerJson !%3D%3D null) %7B%0A                    %2F%2F Flatten unnecessary nested arrays%0A                    const flattened %3D flattenUnnecessaryArrays(parsedInnerJson)%3B%0A                    return Array.isArray(flattened) %3F flattened %3A %5Bflattened%5D%3B%0A                %7D%0A            %7D%0A        %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to greedy extraction%0A        %7D%0A%0A        const extractedStringParts %3D extractGreedyJson(rawTextForPartial)%3B %0A        if (extractedStringParts.length > 0) %7B%0A            const parsed %3D extractedStringParts.map(jsonStringPart %3D> %7B%0A                try %7B%0A                    const parsedJson %3D JSON.parse(jsonStringPart)%3B%0A                    return flattenUnnecessaryArrays(parsedJson)%3B%0A                %7D catch (e) %7B%0A                    return jsonStringPart%3B %2F%2F Fallback to string if parsing fails%0A                %7D%0A            %7D)%3B%0A            %0A            %2F%2F Flatten the results - if we get nested arrays%2C flatten them%0A            const result %3D %5B%5D%3B%0A            parsed.forEach(item %3D> %7B%0A                if (Array.isArray(item)) %7B%0A                    result.push(...item)%3B%0A                %7D else %7B%0A                    result.push(item)%3B%0A                %7D%0A            %7D)%3B%0A            %0A            return result.length > 0 %3F result %3A null%3B%0A        %7D else %7B%0A            return null%3B %0A        %7D%0A      default%3A%0A        return %7B ...commonData%2C error%3A 'Unknown extraction mode' %7D%3B%0A    %7D%0A  %7D%0A%0A  function getSelector(element) %7B%0A    if (!element %7C%7C !element.tagName) return 'unknown'%3B%0A    if (element.id) return %60%23%24%7Belement.id%7D%60%3B%0A%0A    let path %3D %5B%5D%3B%0A    let current %3D element%3B%0A    while (current %26%26 current.parentElement %26%26 path.length < 7) %7B %0A      let selectorPart %3D current.tagName.toLowerCase()%3B%0A      const parent %3D current.parentElement%3B%0A      if (parent) %7B%0A        const siblings %3D Array.from(parent.children).filter(child %3D> child.tagName %3D%3D%3D current.tagName)%3B%0A        if (siblings.length > 1) %7B%0A          const index %3D siblings.indexOf(current) %2B 1%3B%0A          selectorPart %2B%3D %60%3Anth-of-type(%24%7Bindex%7D)%60%3B%0A        %7D else %7B%0A            if (current.classList %26%26 current.classList.length > 0) %7B%0A                const distinctiveClass %3D Array.from(current.classList).find(cls %3D> %7B%0A                    if (!cls %7C%7C !%2F%5E%5Ba-zA-Z%5D%2F.test(cls.charAt(0))) return false%3B %0A                    try %7B%0A                        return parent.querySelectorAll(%60%24%7Bcurrent.tagName.toLowerCase()%7D.%24%7BCSS.escape(cls)%7D%60).length %3D%3D%3D 1%3B%0A                    %7D catch (e) %7B%0A                        return false%3B %0A                    %7D%0A                %7D)%3B%0A                if (distinctiveClass) %7B%0A                    selectorPart %2B%3D %60.%24%7BCSS.escape(distinctiveClass)%7D%60%3B%0A                %7D%0A            %7D%0A        %7D%0A      %7D%0A      path.unshift(selectorPart)%3B%0A      if (current.tagName.toLowerCase() %3D%3D%3D 'body') break%3B%0A      current %3D parent%3B%0A    %7D%0A    return path.join(' > ')%3B%0A  %7D%0A%0A  function updateDisplay() %7B%0A    const jsonDisplay %3D document.getElementById('json-output-display')%3B%0A    const itemCount %3D document.getElementById('item-count-display')%3B%0A    const dataSize %3D document.getElementById('data-size-display')%3B%0A%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      jsonDisplay.textContent %3D 'No data captured yet... Hover and click elements when selection is active.'%3B%0A      jsonDisplay.style.color %3D '%239da5b4'%3B %0A    %7D else %7B%0A      %2F%2F Use proper JSON stringification without double-escaping%0A      jsonDisplay.textContent %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A      jsonDisplay.style.color %3D '%23d19a66'%3B %0A    %7D%0A%0A    itemCount.textContent %3D capturedData.length%3B%0A    const sizeInBytes %3D new TextEncoder().encode(JSON.stringify(capturedData)).length%3B %0A    dataSize.textContent %3D %60%24%7B(sizeInBytes %2F 1024).toFixed(2)%7D KB%60%3B%0A  %7D%0A%0A  function handleMouseOver(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Remove highlight from previous element%0A    if (highlightedElement %26%26 highlightedElement !%3D%3D target) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A    %7D%0A    %0A    %2F%2F Add highlight to current element%0A    target.classList.add(HIGHLIGHT_CLASS)%3B%0A    highlightedElement %3D target%3B%0A    %0A    %2F%2F Show badge with JSON count%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const count %3D countJsonComponents(target%2C mode)%3B%0A    showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %0A    %2F%2F Prevent event bubbling to avoid highlighting parent elements%0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseOut(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Only remove highlight if we're leaving this element and not entering a child%0A    if (target %3D%3D%3D highlightedElement %26%26 !target.contains(e.relatedTarget)) %7B%0A        target.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A        hideBadge()%3B%0A    %7D%0A    %0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseMove(e) %7B%0A    if (!isSelecting %7C%7C !highlightedElement) return%3B%0A    %0A    %2F%2F Throttle mouse move updates to prevent performance issues%0A    if (mouseMoveThrottle) return%3B%0A    %0A    mouseMoveThrottle %3D setTimeout(() %3D> %7B%0A      %2F%2F Double-check we're still selecting before updating%0A      if (!isSelecting) %7B%0A        mouseMoveThrottle %3D null%3B%0A        return%3B%0A      %7D%0A      mouseMoveThrottle %3D null%3B%0A      %2F%2F Update badge position to follow cursor%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %7D%2C 50)%3B %2F%2F Update at most every 50ms%0A  %7D%0A%0A  function handleClick(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification') return%3B%0A%0A    e.preventDefault()%3B%0A    e.stopPropagation()%3B%0A%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const extractionResult %3D extractJSON(target%2C mode)%3B %0A%0A    %2F%2F Visual feedback for successful extraction%0A    target.style.transition %3D 'background-color 0.2s ease-out'%3B%0A    target.style.backgroundColor %3D 'rgba(152%2C 195%2C 121%2C 0.5)'%3B %0A    setTimeout(() %3D> %7B%0A      target.style.backgroundColor %3D ''%3B %0A      if(isSelecting %26%26 highlightedElement %3D%3D%3D target) %7B%0A          target.classList.add(HIGHLIGHT_CLASS)%3B%0A      %7D%0A    %7D%2C 300)%3B%0A    %0A    if (mode %3D%3D%3D 'partialJSON') %7B%0A        if (Array.isArray(extractionResult) %26%26 extractionResult.length > 0) %7B %0A            extractionResult.forEach(item %3D> capturedData.push(item))%3B%0A            showNotification(%60âœ… Captured %24%7BextractionResult.length%7D JSON part(s) from %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B %0A            showNotification(%60â„¹%EF%B8%8F No JSON parts found in %24%7Btarget.tagName.toLowerCase()%7D.%60%2C 'info')%3B%0A        %7D%0A    %7D else %7B %0A        if (extractionResult) %7B %0A            capturedData.push(extractionResult)%3B%0A            showNotification(%60âœ… Captured %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B%0A            showNotification(%60âš %EF%B8%8F Extraction failed for %24%7Btarget.tagName.toLowerCase()%7D. No data returned.%60%2C 'error')%3B%0A        %7D%0A    %7D%0A    updateDisplay()%3B%0A  %7D%0A%0A  function startSelectionMode() %7B%0A    isSelecting %3D true%3B%0A    originalCursor %3D document.body.style.cursor%3B%0A    document.body.style.cursor %3D 'crosshair'%3B%0A    %0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%23e06c75'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'â¹%EF%B8%8F Stop Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'block'%3B%0A%0A    %2F%2F Use capture phase for better event handling%0A    document.addEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.addEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.addEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.addEventListener('click'%2C handleClick%2C true)%3B%0A    document.addEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A  %7D%0A%0A  function stopSelectionMode() %7B%0A    isSelecting %3D false%3B%0A    document.body.style.cursor %3D originalCursor%3B%0A%0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%2361afef'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'ðŸŽ¯ Start Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'none'%3B%0A%0A    %2F%2F Remove event listeners%0A    document.removeEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.removeEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.removeEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.removeEventListener('click'%2C handleClick%2C true)%3B%0A    document.removeEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A%0A    %2F%2F Force clean up any remaining highlights%0A    if (highlightedElement) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A    %7D%0A    %0A    %2F%2F Remove ALL highlight classes from any element that might have them%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      %2F%2F Force remove any inline styles that might have been added%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    hideBadge()%3B%0A    %0A    %2F%2F Clear any pending throttle%0A    if (mouseMoveThrottle) %7B%0A      clearTimeout(mouseMoveThrottle)%3B%0A      mouseMoveThrottle %3D null%3B%0A    %7D%0A    %0A    %2F%2F Double-check that selection is truly off by removing cursor style%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  function handleEscapeKey(e) %7B%0A    if (e.key %3D%3D%3D 'Escape' %26%26 isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Event Listeners%0A  document.getElementById('start-selection-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D else %7B%0A      startSelectionMode()%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('clear-data-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length > 0) %7B%0A        const userConfirmed %3D confirm(\"Are you sure you want to clear all captured data%3F\")%3B%0A        if (userConfirmed) %7B%0A            capturedData %3D %5B%5D%3B%0A            updateDisplay()%3B%0A            showNotification('ðŸ—‘%EF%B8%8F All data cleared.'%2C 'info')%3B%0A        %7D%0A    %7D else %7B%0A        showNotification('No data to clear.'%2C 'info')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-json-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    const jsonString %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A    const success %3D await copyToClipboard(jsonString)%3B%0A    %0A    if (success) %7B%0A      showNotification('ðŸ“‹ JSON copied to clipboard!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy JSON. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-items-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    %2F%2F Convert each item to JSON string and join with commas%0A    const itemsString %3D capturedData.map(item %3D> JSON.stringify(item%2C null%2C 2)).join('%2C%5Cn')%3B%0A    const success %3D await copyToClipboard(itemsString)%3B%0A    %0A    if (success) %7B%0A      showNotification('ðŸ“„ Items copied to clipboard (without array brackets)!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy items. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('export-json-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to export.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    const blob %3D new Blob(%5BJSON.stringify(capturedData%2C null%2C 2)%5D%2C %7B type%3A 'application%2Fjson' %7D)%3B%0A    const url %3D URL.createObjectURL(blob)%3B%0A    const a %3D document.createElement('a')%3B%0A    a.href %3D url%3B%0A    a.download %3D %60extracted-data-%24%7Bnew Date().toISOString().slice(0%2C19).replace(%2F%5B%3AT%5D%2Fg%2C'-')%7D.json%60%3B%0A    document.body.appendChild(a)%3B%0A    a.click()%3B%0A    document.body.removeChild(a)%3B%0A    URL.revokeObjectURL(url)%3B%0A    showNotification('ðŸ’¾ JSON download started!'%2C 'success')%3B%0A  %7D)%3B%0A%0A  document.getElementById('close-sidebar-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    cleanupAndClose()%3B%0A  %7D)%3B%0A  %0A  function cleanupAndClose() %7B%0A    %2F%2F Force stop selection mode first%0A    stopSelectionMode()%3B %0A    %0A    %2F%2F Remove all traces of the extractor%0A    document.body.style.marginRight %3D ''%3B%0A    sidebar.remove()%3B%0A    styleElement.remove()%3B %0A    %0A    %2F%2F Clean up notifications and badge%0A    const notificationEl %3D document.getElementById('json-extractor-notification')%3B%0A    if (notificationEl) notificationEl.remove()%3B%0A    const badgeEl %3D document.getElementById('json-extractor-badge')%3B%0A    if (badgeEl) badgeEl.remove()%3B%0A    %0A    %2F%2F Final cleanup of any remaining highlights%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    %2F%2F Reset cursor completely%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  updateDisplay()%3B%0A%0A  %2F%2F Update badge when extraction mode changes%0A  document.getElementById('extraction-mode-select').addEventListener('change'%2C () %3D> %7B%0A    if (isSelecting %26%26 highlightedElement) %7B%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      %2F%2F Use a simple position near the element center%0A      const rect %3D highlightedElement.getBoundingClientRect()%3B%0A      const x %3D rect.left %2B rect.width %2F 2%3B%0A      const y %3D rect.top %2B rect.height %2F 2%3B%0A      showBadge(count%2C x%2C y)%3B%0A    %7D%0A  %7D)%3B%0A%0A%7D)()%3B%7D)()%3B"
  }
];for(const n of t)if(e.hasAttribute(n)){const t=e.getAttribute(n),i=`[${n}=\"${CSS.escape(t)}\"]`;if(1===document.querySelectorAll(i).length)return i}const n=l(e);if(n){const e=n.split(/\s+/).filter(Boolean);if(0<e.length)for(let t=1;t<=e.length;t++)for(const n of m(e,t)){const e=n.map(e=>\".\"+CSS.escape(e)).join(\"\");if(1===document.querySelectorAll(e).length)return e}}const i=e.parentElement;if(!i)return null;const d=e.tagName.toLowerCase(),r=Array.from(i.children).filter(e=>e.tagName.toLowerCase()===d);if(1===r.length){const e=u(i);return e%3F`${e} > ${d}`:d}else{const t=r.indexOf(e)+1,n=u(i);return n%3F`${n} > ${d}:nth-child(${t})`:`${d}:nth-child(${t})`}}function m(e,t){return t>e.length%3F[]:1===t%3Fe.map(e=>[e]):e.reduce((n,i,d)=>{const l=m(e.slice(d+1),t-1),r=l.map(e=>[i,...e]);return[...n,...r]},[])}function f(e){const t={};[\"onclick\",\"onchange\",\"onsubmit\",\"onkeyup\",\"onkeydown\",\"onmousedown\",\"onmouseup\",\"onmouseover\",\"onmouseout\",\"onfocus\",\"onblur\",\"oninput\",\"ondrag\",\"ondrop\"].forEach(n=>{if(e.hasAttribute(n)){const i=n.substring(2);t[i]=e.getAttribute(n)}});const n=Array.from(e.classList).join(\" \");return(n.includes(\"ng-click\")||e.hasAttribute(\"ng-click\"))%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"v-on:click\")||e.hasAttribute(\"%40click\"))%26%26(t.click=\"Vue click binding\"),(e.hasAttribute(\"v-on:change\")||e.hasAttribute(\"%40change\"))%26%26(t.change=\"Vue change binding\"),e.hasAttribute(\"(click)\")%26%26(t.click=\"Angular click binding\"),(e.hasAttribute(\"onClick\")||n.includes(\"clickable\")||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26\"button\"===e.type)%26%26!t.click%26%26(t.click=\"Probable click handler\"),(\"A\"===e.tagName||\"BUTTON\"===e.tagName||\"INPUT\"===e.tagName%26%26[\"button\",\"submit\",\"reset\"].includes(e.type))%26%26!t.click%26%26(t.click=\"Native click behavior\"),\"FORM\"!==e.tagName||t.submit||(t.submit=\"Native form submission\"),(\"INPUT\"===e.tagName||\"SELECT\"===e.tagName||\"TEXTAREA\"===e.tagName)%26%26(!t.change%26%26(t.change=\"Native change behavior\"),!t.input%26%26\"SELECT\"!==e.tagName%26%26(t.input=\"Native input behavior\")),t}function h(e){const t={},n=Array.from(e.attributes),i=n.filter(e=>e.name.startsWith(\"aria-\"));if(0<i.length%26%26(t.ariaAttributes={},i.forEach(e=>{t.ariaAttributes[e.name]=e.value})),e.hasAttribute(\"role\")%26%26(t.role=e.getAttribute(\"role\")),t.focusable=0<=e.tabIndex||[\"A\",\"BUTTON\",\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName),[\"INPUT\",\"SELECT\",\"TEXTAREA\"].includes(e.tagName)%26%26e.id){const n=document.querySelector(`label[for=\"${e.id}\"]`);n%26%26(t.labelText=n.textContent.trim())}return\"IMG\"===e.tagName%26%26(t.altText=e.alt||\"(missing alt text)\"),t}function g(e){const t=window.getComputedStyle(e);return{position:t.position,display:t.display,visibility:t.visibility,zIndex:t.zIndex,overflow:t.overflow,opacity:t.opacity,boxSizing:t.boxSizing,pointerEvents:t.pointerEvents,flexDirection:t.flexDirection,gridTemplateColumns:t.gridTemplateColumns,gridTemplateRows:t.gridTemplateRows}}function p(e){const t=e.getBoundingClientRect();return{x:t.left+window.scrollX,y:t.top+window.scrollY,width:t.width,height:t.height,viewportX:t.left,viewportY:t.top,isInViewport:0<=t.top%26%260<=t.left%26%26t.bottom<=window.innerHeight%26%26t.right<=window.innerWidth}}function y(e){const t=u(e);return{querySelector:`document.querySelector('${t}')`,traversal:b(e),byId:e.id%3F`document.getElementById('${e.id}')`:null,byClass:l(e)%3F`document.getElementsByClassName('${l(e).split(\" \")[0]}')[0]`:null,byTagName:`document.getElementsByTagName('${e.tagName.toLowerCase()}')[0]`,eventCode:E(e)}}function b(e){if(e===document.body)return\"document.body\";if(e.id)return`document.getElementById('${e.id}')`;const t=[];for(let n=e;n%26%26n!==document.body;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t.unshift(d),n=e}if(0===t.length)return null;let n=\"document.body\";return t.forEach(e=>{n+=`.children[${e}]`}),n}function E(e){const t=u(e),n=f(e),i=Object.keys(n);if(0===i.length)return null;let d=``;return d+=`const element = document.querySelector('${t}');\n`,i.forEach(e=>{d+=`element.addEventListener('${e}', (event) => {\n  console.log('${e} event triggered');\n});\n`}),d}function v(e){const t=u(e);return`const element = document.querySelector('${t}');element.textContent = 'New text';element.setAttribute('data-custom', 'value');element.classList.toggle('active');element.style.backgroundColor = 'lightblue';const newChild = document.createElement('div');newChild.textContent = 'Child element';element.appendChild(newChild);`}function x(e=document.body,t=3){function n(e,i=0){if(!e||i>t)return null;const d={tagName:e.tagName%3F.toLowerCase()||\"text\",nodeType:e.nodeType,id:e.id||null,className:e.className||null,textContent:3===e.nodeType%3Fe.textContent:null,childCount:e.childNodes%3F.length||0,selector:u(e),depth:i,children:[]};if(0<e.attributes%3F.length%26%26(d.attributes={},Array.from(e.attributes).forEach(e=>{d.attributes[e.name]=e.value})),1===e.nodeType)try{d.accessible=h(e),d.hasEventListeners=0<Object.keys(f(e)).length,d.geometry=p(e)}catch(t){d.error=t.message}return e.childNodes%26%26i<t%26%26e.childNodes.forEach(e=>{const t=n(e,i+1);t%26%26d.children.push(t)}),d}return n(e)}function S(e){if(!e||\"FORM\"!==e.tagName)return null;const t={action:e.action,method:e.method,id:e.id,name:e.name,enctype:e.enctype,controls:[]},n=e.querySelectorAll(\"input, select, textarea, button\");return n.forEach(e=>{const n={type:e.tagName.toLowerCase(),name:e.name,id:e.id,value:e.value,placeholder:e.placeholder,required:e.required,disabled:e.disabled,attributes:{}};if(\"INPUT\"===e.tagName%26%26(n.inputType=e.type,(\"checkbox\"===e.type||\"radio\"===e.type)%26%26(n.checked=e.checked),\"file\"===e.type%26%26(n.accept=e.accept,n.multiple=e.multiple)),\"SELECT\"===e.tagName%26%26(n.multiple=e.multiple,n.options=Array.from(e.options).map(e=>({value:e.value,text:e.text,selected:e.selected}))),e.id){const t=document.querySelector(`label[for=\"${e.id}\"]`);t%26%26(n.label=t.textContent.trim())}Array.from(e.attributes).forEach(e=>{[\"id\",\"name\",\"value\",\"type\",\"placeholder\",\"required\",\"disabled\"].includes(e.name)||(n.attributes[e.name]=e.value)}),t.controls.push(n)}),t.submissionCode=k(e),t}function k(e){const t=e.id||null,n=t%3F`document.getElementById('${t}')`:`document.querySelector('form')`,i=e.querySelectorAll(\"input[name], select[name], textarea[name]\");let d=`document.querySelector('${u(e)}').addEventListener('submit', function(event) {  event.preventDefault();  const formData = new FormData(this);  const formValues = {};  for (const [key, value] of formData.entries()) {    formValues[key] = value;  }  console.log('Form values:', formValues);  fetch('${e.action||\"url-here\"}', {    method: '${e.method.toUpperCase()||\"POST\"}',    body: formData  })  .then(response => response.json())  .then(data => console.log('Success:', data))  .catch(error => console.error('Error:', error));});function getFormValues() {  const form = ${n};  const values = {};`;return i.forEach(e=>{const t=e.name;d+=\"checkbox\"===e.type%3F`  values['${t}'] = form.elements['${t}'].checked;\n`:\"radio\"===e.type%3F`  values['${t}'] = form.querySelector('input[name=\"${t}\"]:checked')%3F.value;\n`:\"SELECT\"===e.tagName%26%26e.multiple%3F`  values['${t}'] = Array.from(form.elements['${t}'].selectedOptions).map(opt => opt.value);\n`:`  values['${t}'] = form.elements['${t}'].value;\n`}),d+=`  return values;}`,d}function L(){const e=document.createElement(\"div\");e.id=\"html-analyzer-tool\",d(e,`        <h3 id=\"tool-header\">HTML Structure Analyzer</h3>        <div class=\"tab-container\">          <div class=\"tab-buttons\">            <button id=\"inspector-tab\" class=\"tab-button active\">Inspector</button>            <button id=\"dom-tab\" class=\"tab-button\">DOM Explorer</button>            <button id=\"extractor-tab\" class=\"tab-button\">Extractor</button>            <button id=\"framework-tab\" class=\"tab-button\">Frameworks</button>            <button id=\"code-tab\" class=\"tab-button\">Code</button>          </div>                    <div id=\"inspector-tab-content\" class=\"tab-content active\">            <button id=\"enable-inspection-btn\" class=\"primary\">Select Element</button>            <div class=\"button-group\">              <button id=\"highlight-events-btn\">Event Listeners</button>              <button id=\"highlight-accessibility-btn\">A11y</button>              <button id=\"show-z-index-btn\">Z-Index</button>            </div>                        <div id=\"element-breadcrumbs\" class=\"breadcrumb-trail\" style=\"display: none;\">                          </div>                        <div id=\"element-info-container\" style=\"display: none;\">                          </div>          </div>                    <div id=\"dom-tab-content\" class=\"tab-content\">            <div class=\"inspector-section\">              <div class=\"tree-view-container\">                <div class=\"tree-view-header\">                  <span>DOM Tree Explorer</span>                  <div>                    <button id=\"refresh-tree-btn\" class=\"small-btn\" title=\"Refresh Tree\">â†»</button>                    <button id=\"expand-all-btn\" class=\"small-btn\" title=\"Expand All\">+</button>                    <button id=\"collapse-all-btn\" class=\"small-btn\" title=\"Collapse All\">-</button>                  </div>                </div>                <div id=\"dom-tree-view\" class=\"tree-view\">                                  </div>              </div>            </div>                        <div class=\"search-container\">              <input type=\"text\" id=\"tree-search\" class=\"search-input\" placeholder=\"Filter elements (e.g. div, .class, %23id)\">            </div>                        <div class=\"button-group\">              <button id=\"analyze-dom-btn\" class=\"secondary\">Analyze Structure</button>              <button id=\"find-duplicates-btn\" class=\"secondary\">Find Duplicate IDs</button>            </div>                        <div class=\"button-group\">              <button id=\"analyze-form-btn\">Analyze Forms</button>              <button id=\"analyze-accessibility-btn\">Analyze A11y</button>            </div>          </div>                    <div id=\"extractor-tab-content\" class=\"tab-content\">            <button id=\"extract-content-btn\" class=\"primary\">Extract Content as Markdown</button>            <button id=\"select-content-btn\">Select Content Container</button>            <div class=\"button-group\">              <button id=\"copy-markdown-btn\">Copy to Clipboard</button>              <button id=\"preview-markdown-btn\">Preview Content</button>              <button id=\"download-markdown-btn\">Download</button>            </div>                        <div class=\"extractor-options\">              <div class=\"option-group\">                <label>                  <input type=\"checkbox\" id=\"extract-images\" checked>                  Include images                </label>                <label>                  <input type=\"checkbox\" id=\"extract-links\" checked>                  Preserve links                </label>                <label>                  <input type=\"checkbox\" id=\"extract-tables\" checked>                  Include tables                </label>              </div>                            <div class=\"option-group\">                <label>                  <input type=\"checkbox\" id=\"clean-whitespace\" checked>                  Clean whitespace                </label>                <label>                  <input type=\"checkbox\" id=\"strip-scripts\">                  Remove scripts                </label>              </div>            </div>          </div>                    <div id=\"framework-tab-content\" class=\"tab-content\">            <div id=\"framework-info-container\">              <div class=\"loading-indicator\">Analyzing frameworks...</div>            </div>                        <button id=\"analyze-frameworks-btn\" class=\"primary\">Detect Frameworks</button>            <div class=\"button-group\">              <button id=\"analyze-css-btn\">Analyze CSS Usage</button>              <button id=\"analyze-specificity-btn\">CSS Specificity</button>            </div>                        <div id=\"framework-detail-view\"></div>          </div>                    <div id=\"code-tab-content\" class=\"tab-content\">            <div class=\"code-section\">              <div class=\"code-section-header\">Element Access</div>              <div class=\"button-group\">                <button id=\"generate-selectors-btn\" class=\"primary\">Generate Selectors</button>                <button id=\"generate-traversal-btn\">DOM Traversal</button>              </div>            </div>                        <div class=\"code-section\">              <div class=\"code-section-header\">Interaction Code</div>              <div class=\"button-group\">                <button id=\"generate-access-btn\">Element Access</button>                <button id=\"generate-event-btn\">Event Handlers</button>              </div>            </div>                        <div class=\"code-section\">              <div class=\"code-section-header\">Test Automation</div>              <div class=\"button-group\">                <button id=\"generate-cypress-btn\">Cypress</button>                <button id=\"generate-playwright-btn\">Playwright</button>                <button id=\"generate-selenium-btn\">Selenium</button>              </div>            </div>                        <div id=\"code-output-container\"></div>          </div>        </div>                <div class=\"status-bar\">          <div id=\"status-message\">Ready</div>          <div class=\"button-group\">            <button id=\"export-info-btn\" class=\"small-btn\">Export</button>            <button id=\"help-btn\" class=\"small-btn\">Help</button>            <button id=\"close-tool-btn\" class=\"small-btn danger\">Ã—</button>          </div>        </div>      `);try{if(!document.body)throw new Error(\"document.body not available\");document.body.appendChild(e),C(),R(),j(),w(),setTimeout(()=>{z()},500)}catch(t){throw console.error(\"Failed to create tool panel:\",t),t}}function C(){const e=document.createElement(\"style\");e.textContent=`        .tree-view-container {          border: 1px solid var(--border-color);          border-radius: 4px;          margin-bottom: 10px;          max-height: 300px;          overflow: auto;        }                .tree-view-header {          padding: 5px 10px;          background: var(--button-bg);          border-bottom: 1px solid var(--border-color);          display: flex;          justify-content: space-between;          align-items: center;          font-weight: bold;          font-size: 13px;        }                .tree-view {          padding: 5px;          font-family: monospace;          font-size: 12px;          line-height: 1.4;        }                .small-btn {          width: auto !important;          padding: 2px 5px !important;          margin: 0 2px !important;          font-size: 12px !important;          display: inline-block !important;        }                .status-bar {          margin-top: 10px;          padding-top: 5px;          border-top: 1px solid var(--border-color);          display: flex;          justify-content: space-between;          align-items: center;          font-size: 12px;        }                %23status-message {          color: var(--text-color);          font-style: italic;        }                .loading-indicator {          padding: 10px;          text-align: center;          font-style: italic;          color: var(--text-color);        }                .code-section {          margin-bottom: 15px;        }                .code-section-header {          font-weight: bold;          margin-bottom: 5px;          color: var(--text-color);        }                .extractor-options {          margin: 10px 0;          padding: 10px;          border: 1px solid var(--border-color);          border-radius: 4px;        }                .option-group {          display: flex;          flex-wrap: wrap;          gap: 10px;          margin-bottom: 8px;        }                .option-group label {          display: flex;          align-items: center;          font-size: 12px;        }                .option-group input[type=\"checkbox\"] {          margin-right: 5px;        }                .framework-list {          display: flex;          flex-wrap: wrap;          gap: 5px;          margin: 10px 0;        }                .framework-badge {          padding: 4px 8px;          border-radius: 12px;          font-size: 12px;          background: var(--primary-bg);          color: white;          display: inline-flex;          align-items: center;        }                .framework-badge.react { background: %2361dafb; color: %23000; }        .framework-badge.vue { background: %2342b883; color: %23fff; }        .framework-badge.angular { background: %23dd0031; color: %23fff; }        .framework-badge.svelte { background: %23ff3e00; color: %23fff; }        .framework-badge.jquery { background: %230769ad; color: %23fff; }        .framework-badge.bootstrap { background: %237952b3; color: %23fff; }        .framework-badge.tailwind { background: %2338b2ac; color: %23fff; }                .framework-details {          margin-top: 15px;          border-top: 1px solid var(--border-color);          padding-top: 10px;        }                .framework-details h4 {          margin: 0 0 10px 0;          font-size: 14px;        }                .framework-detail-section {          margin-bottom: 15px;        }                .framework-property {          display: flex;          font-size: 12px;          margin-bottom: 3px;        }                .framework-property-name {          font-weight: bold;          width: 100px;        }                .framework-property-value {          flex: 1;        }                .tree-node {          padding: 2px 0;          white-space: nowrap;          display: flex;          align-items: center;        }                .tree-node:hover {          background: var(--button-hover);        }                .tree-node-selected {          background: var(--primary-bg) !important;          color: white;        }                .tree-node-children {          padding-left: 16px;          border-left: 1px dotted var(--border-color);          margin-left: 6px;        }                .tree-node-hidden {          display: none;        }                .tree-node-toggle {          width: 16px;          height: 16px;          text-align: center;          line-height: 14px;          cursor: pointer;          font-size: 10px;          user-select: none;        }                .tree-node-icon {          width: 16px;          height: 16px;          margin: 0 4px;          display: inline-block;          font-size: 12px;          text-align: center;        }                .tree-node-label {          cursor: pointer;          user-select: none;          font-size: 12px;        }                .tree-node-tag {          color: %23e76f51;        }                .tree-node-id {          color: %2300bfff;          font-weight: bold;        }                .tree-node-class {          color: %23ffd166;        }                .tree-node-filter-highlight {          background: rgba(255, 255, 0, 0.2);          border-radius: 2px;        }                .specificity-table {          width: 100%25;          border-collapse: collapse;          font-size: 12px;        }                .specificity-table th, .specificity-table td {          text-align: left;          padding: 4px;          border-bottom: 1px solid var(--border-color);        }                .specificity-table th {          background: var(--button-bg);          font-weight: bold;        }                .specificity-table tr:hover {          background: var(--button-hover);        }                .property-conflict {          background: rgba(255, 87, 34, 0.1);        }                .property-winning {          background: rgba(0, 200, 83, 0.1);        }                .test-code-tabs {          display: flex;          border-bottom: 1px solid var(--border-color);          margin-bottom: 10px;        }                .test-code-tab {          padding: 5px 10px;          cursor: pointer;          border: 1px solid transparent;          border-bottom: none;          border-radius: 4px 4px 0 0;          margin-right: 2px;          font-size: 12px;        }                .test-code-tab.active {          background: var(--button-bg);          border-color: var(--border-color);        }      `,document.head.appendChild(e)}function w(){const e=document.getElementById(\"dom-tree-view\");e%26%26(d(e,\"<div class=\\"loading-indicator\\">Loading DOM tree...</div>\"),setTimeout(()=>{const t=document.documentElement,n=N(t);d(e,n),q(),B()},100))}function N(e,t=2,n=0){if(!e||30<n)return\"\";const i=e.tagName%3Fe.tagName.toLowerCase():\"text\",d=e.id%3Fe.id:\"\",l=e.className%26%26\"string\"==typeof e.className%3Fe.className:\"\",r=e.childNodes%26%260<e.childNodes.length,a=n<t,o=I(e);let s=`<span class=\"tree-node-tag\">${i}</span>`;if(d%26%26(s+=` <span class=\"tree-node-id\">%23${d}</span>`),l%26%26l.trim()){const e=l.split(/\s+/).filter(Boolean);e.length%26%26(2>=e.length%3Fs+=` <span class=\"tree-node-class\">.${e.join(\".\")}</span>`:s+=` <span class=\"tree-node-class\">.${e[0]}...</span>`)}if(e.attributes%26%260<e.attributes.length){const t=e.attributes.length;s+=` <span class=\"tree-node-attrs\">(${t} attrs)</span>`}let c=`        <div class=\"tree-node\" data-node-id=\"${o}\">          <span class=\"tree-node-toggle\">${r%3Fa%3F\"\u25BE\":\"\u25B8\":\"\u2022\"}</span>          <span class=\"tree-node-icon\">${A(e)}</span>          <span class=\"tree-node-label\">${s}</span>        </div>      `;if(r){let i=`<div class=\"tree-node-children\" ${a%3F\"\":\"style=\\"display:none\\"\"}>`;Array.from(e.children).forEach(e=>{i+=N(e,t,n+1)}),1>n%26%26Array.from(e.childNodes).forEach(e=>{e.nodeType===Node.TEXT_NODE%26%26e.textContent.trim()%26%26(i+=`                <div class=\"tree-node\" data-node-type=\"text\">                  <span class=\"tree-node-toggle\">â€¢</span>                  <span class=\"tree-node-icon\">T</span>                  <span class=\"tree-node-label\">%23text</span>                </div>              `)}),i+=`</div>`,c+=i}return c}function I(e){if(!e)return\"unknown\";if(e.id)return`id:${e.id}`;let t=\"\",n=e;for(;n%26%26n!==document.documentElement;){const e=n.parentElement;if(!e)break;const i=Array.from(e.children),d=i.indexOf(n);t=`.${d}${t}`,n=e}return`path:${t||\"0\"}`}function A(e){if(!e)return\"%3F\";switch(e.tagName%26%26e.tagName.toLowerCase()){case\"html\":return\"H\";case\"head\":return\"\u2699\uFE0F\";case\"body\":return\"B\";case\"div\":return\"D\";case\"span\":return\"S\";case\"a\":return\"\uD83D\uDD17\";case\"img\":return\"\uD83D\uDDBC\uFE0F\";case\"button\":return\"\uD83D\uDD18\";case\"input\":return\"\uD83D\uDCDD\";case\"form\":return\"\uD83D\uDCCB\";case\"table\":return\"\uD83D\uDD32\";case\"ul\":case\"ol\":return\"\uD83D\uDCC4\";case\"li\":return\"\u2022\";case\"h1\":case\"h2\":case\"h3\":case\"h4\":case\"h5\":case\"h6\":return\"H\"+e.tagName.substring(1);case\"script\":return\"\uD83D\uDCDC\";case\"style\":return\"\uD83C\uDFA8\";case\"link\":return\"\uD83D\uDD17\";case\"meta\":return\"M\";case\"iframe\":return\"\uD83D\uDCDF\";case\"svg\":return\"\u2693\";case\"video\":return\"\uD83D\uDCF9\";case\"audio\":return\"\uD83D\uDD0A\";case\"canvas\":return\"\uD83C\uDFAD\";default:return\"E\";}}function q(){document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-node\"),n=e.nextElementSibling;if(n%26%26n.classList.contains(\"tree-node-children\")){const e=\"none\"!==n.style.display;n.style.display=e%3F\"none\":\"block\",t.target.textContent=e%3F\"\u25B8\":\"\u25BE\"}t.stopPropagation()})}),document.querySelectorAll(\".tree-node-label\").forEach(e=>{e.addEventListener(\"click\",t=>{M(t.target.closest(\".tree-node\")),t.stopPropagation()})}),document.getElementById(\"refresh-tree-btn\")%3F.addEventListener(\"click\",()=>{w()}),document.getElementById(\"expand-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"block\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25BE\")})}),document.getElementById(\"collapse-all-btn\")%3F.addEventListener(\"click\",()=>{document.querySelectorAll(\".tree-node-children\").forEach(e=>{e.style.display=\"none\"}),document.querySelectorAll(\".tree-node-toggle\").forEach(e=>{const t=\"\u25B8\"===e.textContent||\"\u25BE\"===e.textContent;t%26%26(e.textContent=\"\u25B8\")})})}function B(){const e=document.getElementById(\"tree-search\");e%26%26e.addEventListener(\"input\",t=>{const e=t.target.value.trim().toLowerCase();return e%3Fvoid document.querySelectorAll(\".tree-node\").forEach(t=>{const n=t.querySelector(\".tree-node-label\");if(!n)return;const i=n.textContent.toLowerCase(),l=i.includes(e);if(l){t.classList.remove(\"tree-node-hidden\");const i=n.innerHTML,l=new RegExp(`(${T(e)})`,\"gi\");d(n,i.replace(l,\"<mark class=\\"tree-node-filter-highlight\\">$1</mark>\"));for(let e=t.parentElement;e;){if(e.classList.contains(\"tree-node-children\")){e.style.display=\"block\";const t=e.previousElementSibling;if(t%26%26t.classList.contains(\"tree-node\")){const e=t.querySelector(\".tree-node-toggle\");e%26%26(e.textContent=\"\u25BE\")}}e=e.parentElement}}else{const e=t.nextElementSibling;e%26%26e.classList.contains(\"tree-node-children\")%26%26e.querySelector(\".tree-node:not(.tree-node-hidden)\")%3Ft.classList.remove(\"tree-node-hidden\"):t.classList.add(\"tree-node-hidden\")}}):void document.querySelectorAll(\".tree-node\").forEach(e=>{e.classList.remove(\"tree-node-hidden\");const t=e.querySelector(\".tree-node-label\");t%26%26d(t,t.innerHTML.replace(/<mark class=\"tree-node-filter-highlight\">(.*%3F)<\/mark>/g,\"$1\"))})})}function T(e){return e.replace(/[.*+%3F^${}()|[\]\\]/g,\"\\$%26\")}function M(e){if(!e)return;document.querySelectorAll(\".tree-node-selected\").forEach(e=>{e.classList.remove(\"tree-node-selected\")}),e.classList.add(\"tree-node-selected\");const t=e.dataset.nodeId;if(!t)return;let n=null;if(t.startsWith(\"id:\")){const e=t.substring(3);n=document.getElementById(e)}else if(t.startsWith(\"path:\")){const e=t.substring(5).split(\".\");n=document.documentElement;for(let t=1;t<e.length;t++){const i=parseInt(e[t]);if(n.children%26%26i<n.children.length)n=n.children[i];else{n=null;break}}}n%26%26(ne(n),n.scrollIntoView({behavior:\"smooth\",block:\"center\"}),document.getElementById(\"inspector-tab\").click())}function z(){function e(e){return e.replace(/([A-Z])/g,\" $1\").replace(/^./,e=>e.toUpperCase())}const t=document.getElementById(\"framework-info-container\");if(!t)return;const n=r();let i=\"\";n.list%26%260<n.list.length%3F(i+=`<div class=\"framework-list\">`,n.list.forEach(e=>{const t=e.toLowerCase().replace(/\s+/g,\"\");i+=`<div class=\"framework-badge ${t}\">${e}</div>`}),i+=`</div>`,n.details%26%26Object.entries(n.details).forEach(([t,n])=>{i+=`<div class=\"framework-details\">`,i+=`<h4>${t} Details</h4>`,i+=`<div class=\"framework-detail-section\">`,Object.entries(n).forEach(([t,n])=>{\"object\"==typeof n%26%26null!==n%3FArray.isArray(n)%3F(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n.length} items</div>`,i+=`</div>`,0<n.length%26%26(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\"></div>`,i+=`<div class=\"framework-property-value\">`,n.slice(0,5).forEach(e=>{i+=`<div>${\"string\"==typeof e%3Fe:JSON.stringify(e)}</div>`}),5<n.length%26%26(i+=`<div>...and ${n.length-5} more</div>`),i+=`</div>`,i+=`</div>`)):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">[Object]</div>`,i+=`</div>`):(i+=`<div class=\"framework-property\">`,i+=`<div class=\"framework-property-name\">${e(t)}</div>`,i+=`<div class=\"framework-property-value\">${n}</div>`,i+=`</div>`)}),i+=`</div>`,i+=`</div>`})):i=`<div class=\"framework-info-message\">No frameworks detected on this page. This appears to be a static HTML page.</div>`,d(t,i)}function R(){const t=document.getElementById(\"html-analyzer-tool\"),n=document.getElementById(\"tool-header\");n.addEventListener(\"mousedown\",n=>{n.preventDefault(),Me.isMoving=!0,Me.moveOffset={x:n.clientX-t.getBoundingClientRect().left,y:n.clientY-t.getBoundingClientRect().top},document.addEventListener(\"mousemove\",O),document.addEventListener(\"mouseup\",()=>{Me.isMoving=!1,document.removeEventListener(\"mousemove\",O)},{once:!0})})}function O(i){if(!Me.isMoving)return;const e=document.getElementById(\"html-analyzer-tool\"),d=i.clientX-Me.moveOffset.x,l=i.clientY-Me.moveOffset.y,r=window.innerWidth-e.offsetWidth,a=window.innerHeight-e.offsetHeight;e.style.left=`${t(0,n(d,r))}px`,e.style.top=`${t(0,n(l,a))}px`}function j(){document.querySelectorAll(\".tab-button\").forEach(e=>{e.addEventListener(\"click\",Z)}),document.getElementById(\"enable-inspection-btn\").addEventListener(\"click\",J),document.getElementById(\"highlight-events-btn\").addEventListener(\"click\",re),document.getElementById(\"highlight-accessibility-btn\").addEventListener(\"click\",ae),document.getElementById(\"show-z-index-btn\").addEventListener(\"click\",oe),document.getElementById(\"extract-content-btn\").addEventListener(\"click\",ce),document.getElementById(\"select-content-btn\").addEventListener(\"click\",ue),document.getElementById(\"copy-markdown-btn\").addEventListener(\"click\",he),document.getElementById(\"preview-markdown-btn\").addEventListener(\"click\",me),document.getElementById(\"download-markdown-btn\").addEventListener(\"click\",fe),document.getElementById(\"analyze-dom-btn\").addEventListener(\"click\",ge),document.getElementById(\"analyze-form-btn\").addEventListener(\"click\",pe),document.getElementById(\"find-duplicates-btn\").addEventListener(\"click\",se),document.getElementById(\"tree-search\").addEventListener(\"input\",xe),document.getElementById(\"generate-selectors-btn\").addEventListener(\"click\",ye),document.getElementById(\"generate-traversal-btn\").addEventListener(\"click\",Ee),document.getElementById(\"generate-access-btn\").addEventListener(\"click\",ve),document.getElementById(\"export-info-btn\").addEventListener(\"click\",Ne),document.getElementById(\"close-tool-btn\").addEventListener(\"click\",Ie)}function H(e,t=\"Preview\",n=\"text\"){D();const i=document.createElement(\"div\");i.id=\"preview-overlay\";let l=\"\";if(\"markdown\"===n%3Fl=`          <div id=\"preview-tabs\">            <button id=\"preview-tab-markdown\" class=\"active\">Markdown</button>            <button id=\"preview-tab-html\">HTML</button>            <button id=\"preview-tab-rendered\">Rendered</button>          </div>        `:\"structure\"===n%26%26(l=`          <div id=\"preview-tabs\">            <button id=\"preview-tab-tree\" class=\"active\">Tree View</button>            <button id=\"preview-tab-json\">JSON</button>          </div>        `),d(i,`        <div id=\"preview-container\">          <div id=\"preview-header\">            <h3>${t}</h3>            <button id=\"close-preview-btn\" class=\"danger\">Ã—</button>          </div>          ${l}          <div id=\"preview-content\">${\"html\"===n%3Fe:\"rendered\"===n%3F\"\":Y(e)}</div>          <div id=\"preview-actions\">            <button id=\"preview-copy-btn\">Copy to Clipboard</button>            <button id=\"preview-download-btn\" class=\"primary\">Download</button>            <button id=\"preview-close-btn\">Close</button>          </div>        </div>      `),document.body.appendChild(i),document.getElementById(\"close-preview-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-close-btn\").addEventListener(\"click\",D),document.getElementById(\"preview-copy-btn\").addEventListener(\"click\",()=>{Q(e),X(\"Copied to clipboard!\")}),document.getElementById(\"preview-download-btn\").addEventListener(\"click\",()=>{we(e,t,n)}),\"markdown\"===n){const t=G(e);document.getElementById(\"preview-tab-markdown\").addEventListener(\"click\",()=>{U(\"markdown\"),d(document.getElementById(\"preview-content\"),Y(e))}),document.getElementById(\"preview-tab-html\").addEventListener(\"click\",()=>{U(\"html\"),d(document.getElementById(\"preview-content\"),Y(t))}),document.getElementById(\"preview-tab-rendered\").addEventListener(\"click\",()=>{U(\"rendered\"),d(document.getElementById(\"preview-content\"),t)})}else if(\"structure\"===n){const t=F(e),n=JSON.stringify(e,null,2);document.getElementById(\"preview-tab-tree\").addEventListener(\"click\",()=>{U(\"tree\"),d(document.getElementById(\"preview-content\"),t),_()}),document.getElementById(\"preview-tab-json\").addEventListener(\"click\",()=>{U(\"json\"),d(document.getElementById(\"preview-content\"),Y(n))}),d(document.getElementById(\"preview-content\"),t),_()}}function _(){document.querySelectorAll(\".tree-toggler\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.closest(\".tree-item\"),n=e.querySelector(\".tree-children\");n%26%26(n.style.display=\"none\"===n.style.display%3F\"block\":\"none\",t.target.textContent=\"none\"===n.style.display%3F\"\u25B8\":\"\u25BE\")})}),document.querySelectorAll(\".tree-item-label\").forEach(e=>{e.addEventListener(\"click\",t=>{const e=t.target.dataset.elementId;if(e){const t=document.querySelector(e);t%26%26(ie(t),le(t))}})})}function U(e){document.querySelectorAll(\"%23preview-tabs button\").forEach(e=>{e.classList.remove(\"active\")}),document.getElementById(`preview-tab-${e}`).classList.add(\"active\"),Me.previewActiveTab=e}function D(){const e=document.getElementById(\"preview-overlay\");e%26%26e.remove()}function $(e){if(!e)return;const t=document.getElementById(\"element-info-container\"),n=document.getElementById(\"element-breadcrumbs\");t.style.display=\"block\",n.style.display=\"block\",d(n,\"\"),V(e,n);const i=e.tagName.toLowerCase(),r=e.id%3F`%23${e.id}`:\"\",a=l(e),o=a%3F`.${a.split(\" \").join(\".\")}`:\"\",s=u(e),c=f(e),m=h(e),b=g(e),E=p(e);d(t,`        <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Basic Information</div>          <div><strong>Element:</strong> ${i}${r}${o}</div>          <div><strong>Unique Selector:</strong> ${s}</div>          <div><strong>Text Content:</strong> ${e.textContent.substring(0,50)}${50<e.textContent.length%3F\"...\":\"\"}</div>          <div><strong>Child Elements:</strong> ${e.children.length}</div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Attributes</div>          <div class=\"property-list\">            ${Array.from(e.attributes).map(e=>`              <div class=\"property-item\">                <div class=\"property-name\">${e.name}</div>                <div class=\"property-value\">${e.value}</div>              </div>            `).join(\"\")}          </div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Event Listeners</div>          ${0<Object.keys(c).length%3FObject.entries(c).map(([e,t])=>`<span class=\"badge badge-warning\">${e}</span>`).join(\"\"):\"<div>No event listeners detected</div>\"}        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Accessibility</div>          ${0<Object.keys(m).length%3F`<div class=\"property-list\">              ${Object.entries(m).map(([e,t])=>\"ariaAttributes\"===e%26%26\"object\"==typeof t%3FObject.entries(t).map(([e,t])=>`                    <div class=\"property-item\">                      <div class=\"property-name\">${e}</div>                      <div class=\"property-value\">${t}</div>                    </div>                  `).join(\"\"):`                    <div class=\"property-item\">                      <div class=\"property-name\">${e}</div>                      <div class=\"property-value\">${JSON.stringify(t)}</div>                    </div>                  `).join(\"\")}            </div>`:\"<div>No accessibility attributes detected</div>\"}        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Key Styles</div>          <div class=\"property-list\">            ${Object.entries(b).map(([e,t])=>`              <div class=\"property-item\">                <div class=\"property-name\">${e}</div>                <div class=\"property-value\">${t}</div>              </div>            `).join(\"\")}          </div>        </div>                <div class=\"inspector-section\">          <div class=\"inspector-section-title\">Actions</div>          <div class=\"button-group\">            <button id=\"generate-selector-btn\" class=\"secondary\">Generate Selector</button>            <button id=\"generate-js-access-btn\" class=\"secondary\">JS Access</button>          </div>          <div class=\"button-group\">            <button id=\"copy-outer-html-btn\" class=\"info\">Copy HTML</button>            <button id=\"inspect-children-btn\" class=\"info\">Inspect Children</button>          </div>        </div>      `),document.getElementById(\"generate-selector-btn\").addEventListener(\"click\",()=>{W(s,\"CSS Selector\")}),document.getElementById(\"generate-js-access-btn\").addEventListener(\"click\",()=>{const t=y(e);let n=`const element = ${t.querySelector};${t.byId%3F`const elementById = ${t.byId};`:\"\"}${t.byClass%3F`const elementByClass = ${t.byClass};`:\"\"}${t.byTagName%3F`const elementByTag = ${t.byTagName};`:\"\"}`;W(n,\"JavaScript Element Access\")}),document.getElementById(\"copy-outer-html-btn\").addEventListener(\"click\",()=>{Q(e.outerHTML),X(\"HTML copied to clipboard!\")}),document.getElementById(\"inspect-children-btn\").addEventListener(\"click\",()=>{P(e)})}function V(e,t){let n=e;const i=[];for(;n%26%26n!==document.documentElement;)i.unshift({element:n,tag:n.tagName.toLowerCase(),id:n.id,classes:n.className}),n=n.parentElement;i.unshift({element:document.documentElement,tag:\"html\",id:\"\",classes:\"\"}),i.forEach((e,n)=>{const i=document.createElement(\"span\");i.className=\"breadcrumb-item\";let d=e.tag;if(e.id%26%26(d+=`%23${e.id}`),e.classes){const t=e.classes.split(\" \")[0];t%26%26(d+=`.${t}`),1<e.classes.split(\" \").length%26%26(d+=\"...\")}i.textContent=d,i.dataset.index=n,i.addEventListener(\"click\",()=>{ie(e.element),$(e.element),Me.selectedElement=e.element}),t.appendChild(i)})}function P(e){const t=Array.from(e.children);if(0===t.length)return void X(\"This element has no child elements\");let n=`<div class=\"element-tree\">        <div class=\"tree-item\">          <span class=\"tree-toggler\">â–¾</span>          <span class=\"tree-item-label\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}</span>          <div class=\"tree-children\">      `;t.forEach(e=>{const t=u(e);n+=`          <div class=\"tree-item\">            <span class=\"tree-toggler\">${0<e.children.length%3F\"\u25B8\":\"\u2022\"}</span>            <span class=\"tree-item-label\" data-element-id=\"${t}\">${e.tagName.toLowerCase()}${e.id%3F\" %23\"+e.id:\"\"}${l(e)%3F\" .\"+l(e).split(\" \")[0]:\"\"}</span>            ${0<e.children.length%3F\"<div class=\\"tree-children\\" style=\\"display: none;\\"></div>\":\"\"}          </div>        `}),n+=`          </div>        </div>      </div>`,H(n,\"Child Elements\",\"html\"),_()}function F(e){function t(e,n=0){if(!e)return\"\";let i=\"\";const d=e.children%26%260<e.children.length;i+=`<div class=\"tree-item\">`,i+=`<span class=\"tree-toggler\">${d%3F\"\u25BE\":\"\u2022\"}</span>`;let r=e.tagName||\"text\";e.id%26%26(r+=` %23${e.id}`);const a=l(e);if(a%26%26(r+=` .${a.split(\" \")[0]}`),i+=e.selector%3F`<span class=\"tree-item-label\" data-element-id=\"${e.selector}\">${r}</span>`:`<span class=\"tree-item-label\">${r}</span>`,e.attributes||e.textContent){let t=\"\";if(e.attributes){const n=Object.keys(e.attributes).length;0<n%26%26(t+=` [${n} attr]`)}if(e.textContent){const n=e.textContent.trim();if(0<n.length){const e=20<n.length%3Fn.substring(0,20)+\"...\":n;t+=` \"${e}\"`}}t%26%26(i+=`<span style=\"color: %23888;\">${t}</span>`)}return d%26%26(i+=`<div class=\"tree-children\">`,e.children.forEach(e=>{i+=t(e,n+1)}),i+=`</div>`),i+=`</div>`,i}return t(e)}function X(e,t=2e3){const n=document.querySelector(\".tooltip\");n%26%26n.remove();const i=document.createElement(\"div\");i.className=\"tooltip\",i.textContent=e,document.body.appendChild(i);const d=i.getBoundingClientRect();i.style.left=`${(window.innerWidth-d.width)/2}px`,i.style.top=`20px`,setTimeout(()=>{i%26%26i.parentNode%26%26i.remove()},t)}function W(e,t){H(e,t,\"text\")}function Q(e){const t=document.createElement(\"textarea\");t.value=e,t.style.position=\"fixed\",t.style.opacity=\"0\",document.body.appendChild(t),t.select();try{document.execCommand(\"copy\")}catch(e){console.error(\"Failed to copy text: \",e)}document.body.removeChild(t)}function Y(e){return e.replace(/%26/g,\"%26amp;\").replace(/</g,\"%26lt;\").replace(/>/g,\"%26gt;\").replace(/\"/g,\"%26quot;\").replace(/'/g,\"%26%23039;\")}function G(e){return e%3Fe.replace(/```(\w*)\n([\s\S]*%3F)\n```/g,\"<pre><code class=\\"language-$1\\">$2</code></pre>\").replace(/`([^`]+)`/g,\"<code>$1</code>\").replace(/^%23 (.*$)/gm,\"<h1>$1</h1>\").replace(/^%23%23 (.*$)/gm,\"<h2>$1</h2>\").replace(/^%23%23%23 (.*$)/gm,\"<h3>$1</h3>\").replace(/^%23%23%23%23 (.*$)/gm,\"<h4>$1</h4>\").replace(/^%23%23%23%23%23 (.*$)/gm,\"<h5>$1</h5>\").replace(/^%23%23%23%23%23%23 (.*$)/gm,\"<h6>$1</h6>\").replace(/\*\*(.*%3F)\*\*/g,\"<strong>$1</strong>\").replace(/\*(.*%3F)\*/g,\"<em>$1</em>\").replace(/^\s*- (.*$)/gm,\"<ul><li>$1</li></ul>\").replace(/^\s*\d+\. (.*$)/gm,\"<ol><li>$1</li></ol>\").replace(/\[(.*%3F)\]\((.*%3F)\)/g,\"<a href=\\"$2\\">$1</a>\").replace(/^(%3F!<[^>]*>)(.*$)/gm,\"<p>$1</p>\").replace(/<\/ul>\s*<ul>/g,\"\").replace(/<\/ol>\s*<ol>/g,\"\"):\"\"}function Z(t){document.querySelectorAll(\".tab-button\").forEach(e=>{e.classList.remove(\"active\")}),document.querySelectorAll(\".tab-content\").forEach(e=>{e.classList.remove(\"active\")}),t.target.classList.add(\"active\");const e=t.target.id,n=e.replace(\"-tab\",\"-tab-content\");document.getElementById(n).classList.add(\"active\"),Me.activeTab=e.replace(\"-tab\",\"\")}function J(){Me.isInspecting=!Me.isInspecting;const e=document.getElementById(\"enable-inspection-btn\");e.textContent=Me.isInspecting%3F\"Cancel Selection\":\"Select Element\",e.classList.toggle(\"primary\",!Me.isInspecting),e.classList.toggle(\"danger\",Me.isInspecting),Me.isInspecting%3F(document.addEventListener(\"mouseover\",K,!0),document.addEventListener(\"mouseout\",ee,!0),document.addEventListener(\"click\",te,!0),X(\"Hover over elements and click to select one for inspection\")):(document.removeEventListener(\"mouseover\",K,!0),document.removeEventListener(\"mouseout\",ee,!0),document.removeEventListener(\"click\",te,!0),de())}function K(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(de(),ie(t.target,!1),Me.hoveredElement=t.target))}function ee(t){Me.isInspecting%26%26(t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||t.target===Me.hoveredElement%26%26(de(),Me.hoveredElement=null))}function te(t){Me.isInspecting%26%26(t.preventDefault(),t.stopPropagation(),t.target.closest(\"%23html-analyzer-tool\")||(ne(t.target),J()))}function ne(e){Me.selectedElement=e,de(),ie(e,!0),$(e),Me.inspectionHistory.find(t=>t===e)%26%26(Me.inspectionHistory=Me.inspectionHistory.filter(t=>t!==e)),Me.inspectionHistory.unshift(e),10<Me.inspectionHistory.length%26%26Me.inspectionHistory.pop()}function ie(e,t=!1){if(!e)return;de(),e.classList.add(\"element-highlight\");const n=document.createElement(\"div\");n.className=\"element-label\";let i=e.tagName.toLowerCase();e.id%26%26(i+=`%23${e.id}`);const d=l(e);if(d){const e=d.split(/\s+/).filter(e=>e%26%26\"element-highlight\"!==e);0<e.length%26%26(i+=`.${e[0]}`,1<e.length%26%26(i+=`+${e.length-1}`))}n.textContent=i,e.appendChild(n),Me.highlightedElements.push({element:e,label:n}),t%26%26le(e)}function de(){document.querySelectorAll(\".element-highlight\").forEach(e=>{e.classList.remove(\"element-highlight\")}),document.querySelectorAll(\".element-label\").forEach(e=>{e.remove()}),Me.highlightedElements=[]}function le(e){if(e){const t=e.getBoundingClientRect();(0>t.top||t.bottom>window.innerHeight)%26%26e.scrollIntoView({behavior:\"smooth\",block:\"center\"})}}function re(){de();const e=document.getElementById(\"highlight-events-btn\");if(\"events\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight Event Listeners\");Me.visualMode=\"events\",e.textContent=\"Remove Event Highlights\";const t=document.querySelectorAll(\"a, button, input, select, textarea, [onclick], [onkeyup], [onchange], [role=\\"button\\"], [role=\\"link\\"], [role=\\"checkbox\\"], [role=\\"menuitem\\"], [class*=\\"btn\\"], [class*=\\"button\\"], [class*=\\"clickable\\"]\");t.forEach(e=>{0<Object.keys(f(e)).length%26%26e.classList.add(\"event-highlight\")}),X(\"Highlighted all elements with event listeners\",3e3)}function ae(){de();const e=document.getElementById(\"highlight-accessibility-btn\");if(\"accessibility\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Highlight A11y Elements\");Me.visualMode=\"accessibility\",e.textContent=\"Remove A11y Highlights\";const t=document.querySelectorAll(\"[role], [aria-*], [tabindex], [alt], [title], [for], label, a[href], button, input, select, textarea\");t.forEach(e=>{e.classList.add(\"accessibility-highlight\")}),X(\"Highlighted all elements with accessibility attributes\",3e3)}function oe(){de();const e=document.getElementById(\"show-z-index-btn\");if(document.querySelectorAll(\".z-index-highlighter\").forEach(e=>e.remove()),\"zindex\"===Me.visualMode)return Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\");Me.visualMode=\"zindex\",e.textContent=\"Remove Z-Index Visual\";const i=Array.from(document.querySelectorAll(\"*\")).filter(e=>{const t=window.getComputedStyle(e);return\"static\"!==t.position%26%26\"auto\"!==t.zIndex%26%26!isNaN(parseInt(t.zIndex))});return 0===i.length%3F(X(\"No elements with z-index found on this page\"),Me.visualMode=\"normal\",void(e.textContent=\"Visualize Z-Index\")):void(i.sort((e,t)=>{const n=parseInt(window.getComputedStyle(e).zIndex),i=parseInt(window.getComputedStyle(t).zIndex);return n-i}),i.forEach(e=>{const i=e.getBoundingClientRect(),d=parseInt(window.getComputedStyle(e).zIndex),l=document.createElement(\"div\");l.className=\"z-index-highlighter\",l.style.left=`${i.left+window.scrollX}px`,l.style.top=`${i.top+window.scrollY}px`,l.style.width=`${i.width}px`,l.style.height=`${i.height}px`,l.style.opacity=n(.8,t(.2,d/1e3));const r=document.createElement(\"div\");r.style.position=\"absolute\",r.style.top=\"0\",r.style.left=\"0\",r.style.background=\"black\",r.style.color=\"white\",r.style.padding=\"2px 5px\",r.style.fontSize=\"12px\",r.style.borderRadius=\"2px\",r.textContent=`z-index: ${d}`,l.appendChild(r),document.body.appendChild(l)}),X(`Visualized ${i.length} elements with z-index stacking order`))}function se(){const e=document.querySelectorAll(\"[id]\"),t={};e.forEach(e=>{const n=e.id;t[n]||(t[n]=[]),t[n].push(e)});const n=Object.entries(t).filter(([e,t])=>1<t.length);if(0===n.length)return void X(\"No duplicate IDs found on the page.\");let i=`%23 Duplicate ID Report\n\n`;i+=`Found ${n.length} duplicate IDs on the page.\n\n`,n.forEach(([e,t])=>{i+=`%23%23 ID: \"${e}\"\n\n`,i+=`- Occurrences: ${t.length}\n`,i+=`- Elements:\n`,t.forEach((t,n)=>{const d=t.tagName.toLowerCase(),l=u(t).replace(`%23${e}`,\"\");i+=`  ${n+1}. \`<${d}>\` at ${l}\n`}),i+=`\n`}),i+=`%23%23 Recommendation\n\n`,i+=`Duplicate IDs can cause JavaScript errors and accessibility issues. Each ID should be unique within the document.`,H(i,\"Duplicate ID Report\",\"markdown\")}function ce(){const e=Me.selectedElement||ke();return e%3Fvoid(Me.extractedMarkdown=Ce(e),X(`Content extracted! (${Me.extractedMarkdown.length} characters)`)):void X(\"No content container selected. Use \\"Select Content Container\\" first.\")}function ue(){J(),X(\"Select the container that contains the content you want to extract\")}function me(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26H(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function fe(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26we(Me.extractedMarkdown,\"Extracted Content\",\"markdown\")}function he(){Me.extractedMarkdown||ce(),Me.extractedMarkdown%26%26(Q(Me.extractedMarkdown),X(\"Markdown copied to clipboard!\"))}function ge(){const e=Me.selectedElement||document.body;X(\"Analyzing DOM structure...\"),Me.analyzedStructure=x(e,5),H(Me.analyzedStructure,\"DOM Structure Analysis\",\"structure\")}function pe(){const e=Me.selectedElement%26%26\"FORM\"===Me.selectedElement.tagName%3FMe.selectedElement:document.querySelector(\"form\");if(!e)return void X(\"No form found on the page. Select a form first.\");const t=S(e);return t%3Fvoid H(t,\"Form Structure Analysis\",\"structure\"):void X(\"Failed to analyze the form structure.\")}function ye(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=u(e);let n=\"\";if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n=`.${e[0]}`)}}n||(n=e.tagName.toLowerCase());const i=Array.from(e.attributes).filter(e=>![\"id\",\"class\",\"style\"].includes(e.name)).map(e=>`[${e.name}=\"${e.value.replace(/\"/g,\"\\\\"\")}\"]`),d=be(e);let r=`%23 CSS Selectors for Selected Element\n\n`;r+=`%23%23 Element Info\n`,r+=`- Tag: \`${e.tagName.toLowerCase()}\`\n`,r+=`- ID: ${e.id%3F`\`${e.id}\``:\"None\"}\n`,r+=`- Classes: ${e.className%3F`\`${e.className}\``:\"None\"}\n\n`,r+=`%23%23 Selectors\n\n`,r+=`%23%23%23 Most Specific (Unique)\n`,r+=`\`\`\`css\n${t}\n\`\`\`\n\n`,r+=`%23%23%23 Shortest Viable Selector\n`,r+=`\`\`\`css\n${n}\n\`\`\`\n\n`,r+=`%23%23%23 Full CSS Path\n`,r+=`\`\`\`css\n${d}\n\`\`\`\n\n`,0<i.length%26%26(r+=`%23%23%23 Attribute Selectors\n`,i.forEach(e=>{r+=`\`\`\`css\n${e}\n\`\`\`\n`}),r+=`\n`),r+=`%23%23 JavaScript Code\n\n`,r+=`\`\`\`javascript\n`,r+=`const element = document.querySelector('${t}');\n\n`,e.id%26%26(r+=`const elementById = document.getElementById('${e.id}');\n\n`);const a=l(e);if(a){const e=a.split(/\s+/)[0];r+=`const elementsByClass = document.getElementsByClassName('${e}');\n\n`}r+=`const elementsByTag = document.getElementsByTagName('${e.tagName.toLowerCase()}');\n`,r+=`\`\`\`\n`,H(r,\"CSS Selectors\",\"markdown\")}function be(e){if(!(e instanceof Element))return\"\";if(e.id)return`%23${e.id}`;let t=\"\";for(;e!==document.body%26%26e.parentElement;){let n=e.tagName.toLowerCase();if(e.id)n=`%23${e.id}`;else{const t=l(e);if(t){const e=t.split(/\s+/).filter(Boolean);0<e.length%26%26(n+=`.${e.join(\".\")}`)}}const i=Array.from(e.parentElement.children).filter(t=>t.tagName===e.tagName);if(1<i.length){const t=i.indexOf(e)+1;n+=`:nth-of-type(${t})`}t=`${n}${t%3F\" > \"+t:\"\"}`,e=e.parentElement}return`body > ${t}`}function Ee(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement;let t=`%23 DOM Traversal Code Examples\n\n`;t+=`The following examples show different ways to traverse the DOM to access the selected element:\n\n`,t+=`%23%23 Direct Access\n\n`,t+=`\`\`\`javascript\n`,t+=e.id%3F`const element = document.getElementById('${e.id}');\n`:`const element = document.querySelector('${u(e)}');\n`,t+=`\`\`\`\n\n`,t+=`%23%23 Parent-Child Traversal\n\n`,t+=`\`\`\`javascript\n`,t+=b(e),t+=`\n\`\`\`\n\n`,(e.previousElementSibling||e.nextElementSibling)%26%26(t+=`%23%23 Sibling Traversal\n\n`,t+=`\`\`\`javascript\n`,e.previousElementSibling%26%26(t+=`const prevSibling = document.querySelector('${u(e.previousElementSibling)}');\n`,t+=`const element = prevSibling.nextElementSibling;\n\n`),e.nextElementSibling%26%26(t+=`const nextSibling = document.querySelector('${u(e.nextElementSibling)}');\n`,t+=`const element = nextSibling.previousElementSibling;\n`),t+=`\`\`\`\n\n`),H(t,\"DOM Traversal Examples\",\"markdown\")}function ve(){if(!Me.selectedElement)return void X(\"No element selected. Use \\"Select Element\\" first.\");const e=Me.selectedElement,t=y(e),n=v(e);let i=`%23 JavaScript Code for Element Interaction\n\n`;i+=`%23%23 Accessing the Element\n\n`,i+=`\`\`\`javascript\n`,i+=`const element = ${t.querySelector};\n`,t.byId%26%26(i+=`const elementById = ${t.byId};\n`),t.byClass%26%26(i+=`const elementByClass = ${t.byClass};\n`),t.traversal%26%26(i+=`const elementByTraversal = ${t.traversal};\n`),i+=`\`\`\`\n\n`,i+=`%23%23 Reading Element Properties\n\n`,i+=`\`\`\`javascript\n`,i+=`const text = element.textContent;\n`,i+=`const html = element.innerHTML;\n`,e.hasAttributes()%26%26Array.from(e.attributes).slice(0,3).forEach(e=>{i+=`const ${e.name.replace(/-/g,\"_\")} = element.getAttribute('${e.name}');\n`}),i+=`\`\`\`\n\n`,i+=`%23%23 Adding Event Listeners\n\n`,i+=`\`\`\`javascript\n`,i+=t.eventCode%3Ft.eventCode:`element.addEventListener('click', (event) => {\n  console.log('Element clicked');\n});\n`,i+=`\`\`\`\n\n`,i+=`%23%23 Modifying the Element\n\n`,i+=`\`\`\`javascript\n`,i+=n,i+=`\`\`\`\n`,H(i,\"Element Access Code\",\"markdown\")}function xe(t){const e=t.target.value.trim().toLowerCase(),n=document.getElementById(\"search-results\");if(!e)return void(n.style.display=\"none\");const i=Se(e);return 0===i.length%3F(d(n,\"<div style=\\"padding: 5px;\\">No results found</div>\"),void(n.style.display=\"block\")):void(d(n,i.map((e,t)=>{const n=e.tagName.toLowerCase(),i=e.id%3F`%23${e.id}`:\"\",d=l(e),r=d%3F`.${d.split(\" \")[0]}`:\"\";return`<div class=\"search-result-item\" data-result-index=\"${t}\">${n}${i}${r}</div>`}).join(\"\")),n.style.display=\"block\",document.querySelectorAll(\".search-result-item\").forEach(e=>{e.addEventListener(\"click\",()=>{const t=parseInt(e.dataset.resultIndex),d=i[t];d%26%26(ne(d),n.style.display=\"none\",document.getElementById(\"element-search\").value=\"\")})}),Me.elementSearchResults=i)}function Se(e){if(!e)return[];try{return Array.from(document.querySelectorAll(e)).slice(0,20)}catch(t){return[]}}function ke(){if(Me.selectedElement)return Me.selectedElement;const e=[\".content\",\".post-content\",\".article\",\".post\",\".entry-content\",\"article\",\"main\",\"[role=\\"main\\"]\",\"%23content\",\".markdown-body\",\".blog-post\",\".page-content\",\".container main\",\".main-content\"];for(const t of e){const e=document.querySelector(t);if(e%26%26200<e.textContent.trim().length)return e}return document.body}function Le(e){if(!e)return\"\";let t=e;try{t=decodeURIComponent(t.replace(/\+/g,\" \"))}catch(t){}const n=document.createElement(\"textarea\");return n.innerHTML=Te%3FTe.createHTML(t):t,t=n.value,t}function Ce(e){function t(e){if(!e)return\"\";if(e.nodeType===Node.TEXT_NODE){const t=e.textContent.trim().replace(/\s+/g,\" \");return Le(t)}if(e.nodeType!==Node.ELEMENT_NODE)return\"\";const t=e.tagName.toLowerCase();if([\"script\",\"style\",\"noscript\",\"iframe\",\"svg\",\"nav\",\"header\",\"footer\"].includes(t))return\"\";if(\"ytd-transcript-segment-renderer\"===t||e.classList%26%26e.classList.contains(\"segment-timestamp\")||e.classList%26%26e.classList.contains(\"segment-text\")){const t=e.querySelector(\".segment-timestamp\"),n=e.querySelector(\".segment-text\");if(t%26%26n){const e=Le(t.textContent.trim()),i=Le(n.textContent.trim());return`${e} ${i}\n`}}const d=window.getComputedStyle(e),l=\"block\"===d.display||\"flex\"===d.display||\"grid\"===d.display||\"list-item\"===d.display;switch(t){case\"h1\":return`%23 ${n(e).trim()}\n\n`;case\"h2\":return`%23%23 ${n(e).trim()}\n\n`;case\"h3\":return`%23%23%23 ${n(e).trim()}\n\n`;case\"h4\":return`%23%23%23%23 ${n(e).trim()}\n\n`;case\"h5\":return`%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"h6\":return`%23%23%23%23%23%23 ${n(e).trim()}\n\n`;case\"p\":case\"div\":const t=n(e).trim();return t%3Fl%3F`${t}\n\n`:t+\" \":\"\";case\"br\":return\"\n\";case\"ul\":return i(e,\"*\")+\"\n\";case\"ol\":return i(e,\"1.\")+\"\n\";case\"li\":return n(e).trim()+\"\n\";case\"a\":const d=Le(e.getAttribute(\"href\")||\"\");return`[${n(e).trim()}](${d})`;case\"img\":const r=Le(e.getAttribute(\"src\")||\"\"),a=Le(e.getAttribute(\"alt\")||\"\");return`![${a}](${r})\n\n`;case\"code\":case\"pre\":return`\`${n(e).trim()}\``;case\"blockquote\":return`> ${n(e).trim()}\n\n`;case\"strong\":case\"b\":return`**${n(e)}**`;case\"em\":case\"i\":return`*${n(e)}*`;case\"span\":return n(e);default:const o=n(e).trim();return o%3Fl%3F`${o}\n\n`:o+\" \":\"\";}}function n(e){let n=\"\";return e.childNodes.forEach(e=>{n+=t(e)}),n}function i(e,t){let i=\"\";const d=e.querySelectorAll(\":scope > li\");return d.forEach((e,d)=>{const l=\"1.\"===t%3F`${d+1}. `:`${t} `;i+=`${l}${n(e).trim()}\n`}),i}if(!e)return\"\";let d=\"\";return d=t(e),d.replace(/\n{3,}/g,\"\n\n\").trim()}function we(e,t,n){let i=document.title.replace(/[^a-z0-9]/gi,\"-\").toLowerCase()||\"content\",d=\".txt\",l=\"text/plain\";\"markdown\"===n%3F(d=\".md\",l=\"text/markdown\"):(\"json\"==n||\"structure\"==n)%26%26(d=\".json\",l=\"application/json\",e=JSON.stringify(e,null,2));const r=new Blob([e],{type:l}),o=URL.createObjectURL(r),s=document.createElement(\"a\");s.href=Te%3FTe.createScriptURL(o):o,s.download=`${i}${d}`,document.body.appendChild(s),s.click(),document.body.removeChild(s),URL.revokeObjectURL(o)}function Ne(){const e={pageInfo:{title:document.title,url:window.location.href},frameworks:Me.framework,selectedElement:Me.selectedElement%3Fu(Me.selectedElement):null};we(e,\"analysis-report\",\"json\")}function Ie(){const e=document.getElementById(\"html-analyzer-tool\");e%26%26e.remove(),D(),de(),document.querySelectorAll(\".element-highlight, .event-highlight, .accessibility-highlight, .z-index-highlighter\").forEach(e=>e.remove());const t=document.querySelector(\"style[data-analyzer-tool]\");t%26%26t.remove()}function Ae(e,t=50,n=100){function i(){document.body%3Fe():d<t%3F(d++,setTimeout(i,n)):console.error(\"Failed to initialize: document.body not available after retries\")}let d=0;i()}function qe(){i()||(console.error(\"Failed to append styles, retrying...\"),setTimeout(()=>i(),100)),Ae(()=>{try{L(),setTimeout(()=>{X(\"HTML Structure Analyzer ready! Click \\"Select Element\\" to begin inspection.\",3e3)},500)}catch(t){console.error(\"Failed to initialize tool:\",t)}})}const Be=document.createElement(\"style\");Be.textContent=`      :root {        --bg-color: %231a1a1a;        --text-color: %23e0e0e0;        --border-color: %23404040;        --button-bg: %232d2d2d;        --button-hover: %233d3d3d;        --primary-bg: %234a90e2;        --primary-hover: %233b7dd8;        --secondary-bg: %236c757d;        --secondary-hover: %235a6268;        --success-bg: %2328a745;        --success-hover: %23218838;        --danger-bg: %23e25c5c;        --danger-hover: %23d44b4b;        --warning-bg: %23ffc107;        --warning-hover: %23e0a800;        --info-bg: %2317a2b8;        --info-hover: %23138496;        --preview-bg: %232d2d2d;        --preview-header-bg: %231a1a1a;        --preview-border: %23404040;        --highlight-border: rgba(255, 87, 34, 0.8);        --highlight-bg: rgba(255, 87, 34, 0.2);        --tab-active-bg: %233d3d3d;        --z-index-highlight: rgba(0, 255, 0, 0.4);      }            %23html-analyzer-tool {        position: fixed;        top: 20px;        right: 20px;        background: var(--bg-color);        border: 1px solid var(--border-color);        border-radius: 8px;        padding: 15px;        width: 400px;        height: calc(100vh - 40px);        overflow-y: auto;        box-shadow: 0 2px 10px rgba(0,0,0,0.2);        z-index: 9999;        font-family: Arial, sans-serif;        color: var(--text-color);        resize: both;        overflow: auto;        min-width: 250px;        min-height: 200px;      }            %23html-analyzer-tool h3 {        margin-top: 0;        margin-bottom: 15px;        font-size: 16px;        color: var(--text-color);        cursor: move;        user-select: none;      }            %23html-analyzer-tool button {        display: block;        width: 100%25;        padding: 8px;        margin-bottom: 8px;        background: var(--button-bg);        border: 1px solid var(--border-color);        border-radius: 4px;        cursor: pointer;        font-size: 14px;        transition: background 0.2s;        color: var(--text-color);      }            %23html-analyzer-tool button:hover {        background: var(--button-hover);      }            %23html-analyzer-tool button.primary {        background: var(--primary-bg);        color: white;        border: 1px solid var(--primary-hover);      }            %23html-analyzer-tool button.primary:hover {        background: var(--primary-hover);      }            %23html-analyzer-tool button.secondary {        background: var(--secondary-bg);        color: white;        border: 1px solid var(--secondary-hover);      }            %23html-analyzer-tool button.secondary:hover {        background: var(--secondary-hover);      }            %23html-analyzer-tool button.success {        background: var(--success-bg);        color: white;        border: 1px solid var(--success-hover);      }            %23html-analyzer-tool button.success:hover {        background: var(--success-hover);      }            %23html-analyzer-tool button.danger {        background: var(--danger-bg);        color: white;        border: 1px solid var(--danger-hover);      }            %23html-analyzer-tool button.danger:hover {        background: var(--danger-hover);      }            %23html-analyzer-tool button.warning {        background: var(--warning-bg);        color: black;        border: 1px solid var(--warning-hover);      }            %23html-analyzer-tool button.warning:hover {        background: var(--warning-hover);      }            %23html-analyzer-tool button.info {        background: var(--info-bg);        color: white;        border: 1px solid var(--info-hover);      }            %23html-analyzer-tool button.info:hover {        background: var(--info-hover);      }            %23html-analyzer-tool .button-group {        display: flex;        gap: 5px;        margin-bottom: 8px;      }            %23html-analyzer-tool .button-group button {        margin-bottom: 0;      }            %23html-analyzer-tool .tab-container {        margin-top: 10px;      }            %23html-analyzer-tool .tab-buttons {        display: flex;        border-bottom: 1px solid var(--border-color);        margin-bottom: 10px;      }            %23html-analyzer-tool .tab-button {        padding: 8px 12px;        border: none;        background: none;        cursor: pointer;        border-radius: 4px 4px 0 0;        margin-right: 2px;        margin-bottom: 0;      }            %23html-analyzer-tool .tab-button.active {        background: var(--tab-active-bg);        border: 1px solid var(--border-color);        border-bottom: none;      }            %23html-analyzer-tool .tab-content {        display: none;      }            %23html-analyzer-tool .tab-content.active {        display: block;      }            %23preview-overlay {        position: fixed;        top: 0;        left: 0;        right: 0;        bottom: 0;        background: rgba(0,0,0,0.7);        z-index: 10000;        display: flex;        justify-content: center;        align-items: center;      }            %23preview-container {        width: 80%25;        height: 80%25;        background: var(--preview-bg);        border-radius: 8px;        display: flex;        flex-direction: column;        overflow: hidden;        resize: both;      }            %23preview-header {        display: flex;        justify-content: space-between;        align-items: center;        padding: 10px 15px;        background: var(--preview-header-bg);        border-bottom: 1px solid var(--preview-border);      }            %23preview-content {        flex-grow: 1;        padding: 15px;        overflow-y: auto;        white-space: pre-wrap;        font-family: monospace;        font-size: 13px;        line-height: 1.4;        color: var(--text-color);      }            %23preview-tabs {        display: flex;        background: var(--preview-header-bg);        border-bottom: 1px solid var(--preview-border);      }            %23preview-tabs button {        padding: 8px 15px;        border: none;        background: none;        cursor: pointer;      }            %23preview-tabs button.active {        background: var(--preview-bg);        border-bottom: 2px solid var(--primary-bg);      }            %23preview-actions {        padding: 10px 15px;        background: var(--preview-header-bg);        border-top: 1px solid var(--preview-border);        display: flex;        justify-content: flex-end;      }            %23preview-actions button {        padding: 8px 15px;        margin-left: 10px;        border-radius: 4px;        cursor: pointer;      }      .element-highlight {        outline: 2px solid var(--highlight-border) !important;        background-color: var(--highlight-bg) !important;        position: relative;      }            .element-label {        position: absolute;        top: 0;        left: 0;        background: var(--primary-bg);        color: white;        font-size: 12px;        padding: 2px 5px;        border-radius: 2px;        z-index: 10001;        pointer-events: none;      }            .z-index-highlighter {        position: absolute;        background: var(--z-index-highlight);        pointer-events: none;        z-index: 10001;      }            .tooltip {        position: fixed;        background: var(--bg-color);        border: 1px solid var(--border-color);        padding: 8px;        border-radius: 4px;        font-size: 12px;        max-width: 300px;        z-index: 10002;        box-shadow: 0 2px 8px rgba(0,0,0,0.2);      }            .tooltip pre {        margin: 0;        white-space: pre-wrap;        font-family: monospace;        font-size: 11px;      }            .accessibility-highlight {        outline: 2px dashed %239c27b0 !important;      }            .event-highlight {        outline: 2px dashed %23ff9800 !important;      }            .breadcrumb-trail {        display: flex;        flex-wrap: wrap;        padding: 5px;        margin-bottom: 10px;        background: var(--button-bg);        border-radius: 4px;        font-size: 12px;      }            .breadcrumb-item {        margin-right: 5px;        cursor: pointer;        color: var(--primary-bg);      }            .breadcrumb-item:not(:last-child)::after {        content: \">\";        margin-left: 5px;        color: var(--text-color);      }            .breadcrumb-item:hover {        text-decoration: underline;      }            .element-tree {        font-family: monospace;        font-size: 12px;        line-height: 1.5;      }            .tree-item {        padding-left: 15px;        border-left: 1px dotted var(--border-color);        margin-left: 5px;        margin-bottom: 3px;      }            .tree-item-label {        cursor: pointer;      }            .tree-item-label:hover {        text-decoration: underline;        color: var(--primary-bg);      }            .tree-toggler {        display: inline-block;        width: 16px;        text-align: center;        cursor: pointer;      }            .property-list {        border: 1px solid var(--border-color);        border-radius: 4px;        margin-top: 10px;        margin-bottom: 10px;        max-height: 200px;        overflow-y: auto;      }            .property-item {        display: flex;        padding: 5px;        border-bottom: 1px solid var(--border-color);      }            .property-name {        font-weight: bold;        width: 30%25;      }            .property-value {        width: 70%25;        word-break: break-word;      }            .search-container {        margin-bottom: 10px;      }            .search-input {        width: 100%25;        padding: 8px;        border: 1px solid var(--border-color);        border-radius: 4px;        background: var(--bg-color);        color: var(--text-color);      }            .search-results {        margin-top: 5px;        max-height: 150px;        overflow-y: auto;        border: 1px solid var(--border-color);        border-radius: 4px;        padding: 5px;      }            .search-result-item {        padding: 3px;        cursor: pointer;        border-bottom: 1px solid var(--border-color);      }            .search-result-item:hover {        background: var(--button-hover);      }            .code-snippet {        background: %23f5f5f5;        border: 1px solid %23ddd;        border-radius: 4px;        padding: 10px;        margin: 10px 0;        font-family: monospace;        white-space: pre-wrap;        overflow-x: auto;      }            [data-theme=\"dark\"] .code-snippet {        background: %232d2d2d;        border-color: %23444;      }            .inspector-section {        margin-bottom: 15px;        border-bottom: 1px solid var(--border-color);        padding-bottom: 10px;      }            .inspector-section-title {        font-weight: bold;        margin-bottom: 5px;      }            .badge {        display: inline-block;        padding: 2px 6px;        border-radius: 10px;        font-size: 11px;        margin-right: 5px;        margin-bottom: 5px;        color: white;      }            .badge-primary { background: var(--primary-bg); }      .badge-secondary { background: var(--secondary-bg); }      .badge-success { background: var(--success-bg); }      .badge-danger { background: var(--danger-bg); }      .badge-warning { background: var(--warning-bg); color: black; }      .badge-info { background: var(--info-bg); }    `;let Te=null;if(window.trustedTypes%26%26trustedTypes.createPolicy)try{Te=trustedTypes.createPolicy(\"html-analyzer-tool\",{createHTML:e=>e,createScriptURL:e=>e,createScript:e=>e})}catch(t){console.warn(\"Failed to create Trusted Types policy:\",t)}let Me={selectedElement:null,hoveredElement:null,extractedMarkdown:\"\",inspectedElements:[],breadcrumbTrail:[],highlightedElements:[],eventListeners:{},analyzedStructure:null,framework:r(),visualMode:\"normal\",activeTab:\"inspector\",previewActiveTab:\"markdown\",isInspecting:!1,isResizing:!1,isMoving:!1,moveOffset:{x:0,y:0},elementSearchResults:[],inspectionHistory:[]};return\"loading\"===document.readyState%3Fdocument.addEventListener(\"DOMContentLoaded\",qe):qe(),{selectElement:ne,highlightElement:ie,generateUniqueSelector:u,findEventListeners:f,analyzeDOM:x,close:Ie}})()}();"
},
{
        "name": "Extract JSONs",
        "description": "Scans the page for JSON objects and arrays, extracts them, and allows copying or downloading",
        "file": "ExtractJsons.js",
        "icon": "ðŸ“‹",
        "code": "javascript:(function()%7Bjavascript%3A(function() %7B%0A  %2F%2F --- Configuration ---%0A  const SIDEBAR_ID %3D 'json-extractor-sidebar-v3'%3B%0A  const SIDEBAR_WIDTH %3D '380px'%3B%0A  const HIGHLIGHT_CLASS %3D 'json-extractor-rainbow-highlight'%3B%0A  const NOTIFICATION_TIMEOUT %3D 2500%3B%0A%0A  %2F%2F --- Check if sidebar already exists ---%0A  if (document.getElementById(SIDEBAR_ID)) %7B%0A    document.getElementById(SIDEBAR_ID).remove()%3B%0A    document.body.style.marginRight %3D ''%3B%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> el.classList.remove(HIGHLIGHT_CLASS))%3B%0A    const existingStyle %3D document.querySelector('%23json-extractor-styles')%3B%0A    if (existingStyle) existingStyle.remove()%3B%0A    const existingBadge %3D document.getElementById('json-extractor-badge')%3B%0A    if (existingBadge) existingBadge.remove()%3B%0A    return%3B%0A  %7D%0A%0A  %2F%2F --- State Variables ---%0A  let isSelecting %3D false%3B%0A  let capturedData %3D %5B%5D%3B%0A  let originalCursor %3D document.body.style.cursor%3B%0A  let highlightedElement %3D null%3B%0A  let mouseMoveThrottle %3D null%3B%0A%0A  %2F%2F --- Inject CSS for Rainbow Highlight and Notifications ---%0A  const styleElement %3D document.createElement('style')%3B%0A  styleElement.id %3D 'json-extractor-styles'%3B%0A  styleElement.textContent %3D %60%0A    %40keyframes rainbow-glow-animation %7B%0A      0%25 %7B %0A        outline-color%3A hsl(0%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(0%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(0%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(0%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      17%25 %7B %0A        outline-color%3A hsl(60%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(60%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(60%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(60%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      33%25 %7B %0A        outline-color%3A hsl(120%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(120%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(120%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(120%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      50%25 %7B %0A        outline-color%3A hsl(180%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(180%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(180%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(180%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      67%25 %7B %0A        outline-color%3A hsl(240%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(240%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(240%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(240%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      83%25 %7B %0A        outline-color%3A hsl(300%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(300%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(300%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(300%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A      100%25 %7B %0A        outline-color%3A hsl(360%2C 100%25%2C 65%25)%3B %0A        box-shadow%3A %0A          0 0 8px 3px hsl(360%2C 100%25%2C 70%25)%2C %0A          0 0 16px 6px hsla(360%2C 100%25%2C 65%25%2C 0.7)%2C %0A          0 0 24px 8px hsla(360%2C 100%25%2C 60%25%2C 0.5)%3B%0A      %7D%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D %7B%0A      outline%3A 3px solid hsl(0%2C 100%25%2C 65%25) !important%3B%0A      outline-offset%3A 2px !important%3B%0A      animation%3A rainbow-glow-animation 2.5s linear infinite !important%3B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.05) !important%3B%0A      cursor%3A crosshair !important%3B%0A      position%3A relative !important%3B %0A      z-index%3A 999998 !important%3B %0A      transition%3A all 0.2s ease-in-out !important%3B%0A      pointer-events%3A auto !important%3B%0A    %7D%0A    .%24%7BHIGHLIGHT_CLASS%7D%3Ahover %7B%0A      background-color%3A rgba(100%2C 150%2C 255%2C 0.1) !important%3B%0A    %7D%0A    %23json-extractor-notification %7B%0A      position%3A fixed%3B%0A      top%3A 20px%3B%0A      left%3A 50%25%3B%0A      transform%3A translateX(-50%25)%3B%0A      background-color%3A %23333%3B%0A      color%3A white%3B%0A      padding%3A 12px 25px%3B%0A      border-radius%3A 8px%3B%0A      z-index%3A 1000001%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      font-size%3A 14px%3B%0A      box-shadow%3A 0 5px 15px rgba(0%2C0%2C0%2C0.3)%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.3s ease-in-out%2C top 0.3s ease-in-out%3B%0A      pointer-events%3A none%3B%0A    %7D%0A    %23json-extractor-notification.show %7B%0A      opacity%3A 1%3B%0A      top%3A 30px%3B%0A    %7D%0A    %23json-extractor-notification.success %7B%0A      background-color%3A %234CAF50%3B%0A    %7D%0A    %23json-extractor-notification.error %7B%0A      background-color%3A %23F44336%3B%0A    %7D%0A    %23json-extractor-notification.info %7B%0A      background-color%3A %232196F3%3B%0A    %7D%0A    %23json-extractor-badge %7B%0A      position%3A fixed%3B%0A      background%3A rgba(0%2C 0%2C 0%2C 0.8)%3B%0A      color%3A white%3B%0A      padding%3A 4px 8px%3B%0A      border-radius%3A 12px%3B%0A      font-size%3A 11px%3B%0A      font-weight%3A 600%3B%0A      z-index%3A 1000002%3B%0A      pointer-events%3A none%3B%0A      opacity%3A 0%3B%0A      transition%3A opacity 0.2s ease-in-out%3B%0A      font-family%3A 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A      white-space%3A nowrap%3B%0A      box-shadow%3A 0 2px 8px rgba(0%2C0%2C0%2C0.3)%3B%0A    %7D%0A    %23json-extractor-badge.show %7B%0A      opacity%3A 1%3B%0A    %7D%0A  %60%3B%0A  document.head.appendChild(styleElement)%3B%0A%0A  %2F%2F --- Create Sidebar ---%0A  const sidebar %3D document.createElement('div')%3B%0A  sidebar.id %3D SIDEBAR_ID%3B%0A  sidebar.style.cssText %3D %60%0A    position%3A fixed%3B%0A    top%3A 0%3B%0A    right%3A 0%3B%0A    width%3A %24%7BSIDEBAR_WIDTH%7D%3B%0A    height%3A 100vh%3B%0A    background%3A %23282c34%3B%0A    color%3A %23abb2bf%3B%0A    z-index%3A 999999%3B%0A    font-family%3A 'Inter'%2C 'Segoe UI'%2C Tahoma%2C Geneva%2C Verdana%2C sans-serif%3B%0A    font-size%3A 14px%3B%0A    overflow-y%3A auto%3B%0A    box-shadow%3A -8px 0 25px rgba(0%2C0%2C0%2C0.5)%3B%0A    border-left%3A 4px solid %2361afef%3B%0A    pointer-events%3A auto%3B%0A    display%3A flex%3B%0A    flex-direction%3A column%3B%0A    transition%3A transform 0.3s ease-in-out%3B%0A  %60%3B%0A%0A  %2F%2F --- Create Sidebar Content ---%0A  sidebar.innerHTML %3D %60%0A    <div style%3D\"padding%3A 25px%3B border-bottom%3A 1px solid %233b4048%3B\">%0A      <h3 style%3D\"margin%3A 0 0 20px 0%3B color%3A %2361afef%3B font-size%3A 20px%3B font-weight%3A 600%3B\">%0A        <svg xmlns%3D\"http%3A%2F%2Fwww.w3.org%2F2000%2Fsvg\" viewBox%3D\"0 0 24 24\" fill%3D\"currentColor\" style%3D\"width%3A24px%3B height%3A24px%3B vertical-align%3Amiddle%3B margin-right%3A8px%3B\">%0A          <path d%3D\"M12 2.5a.75.75 0 0 1 .75.75v2.518l4.08 2.04a.75.75 0 0 1-.03 1.33l-4.3 2.15a.75.75 0 0 1-.5 0l-4.3-2.15a.75.75 0 0 1-.03-1.33L11.25 5.768V3.25a.75.75 0 0 1 .75-.75ZM11.25 13.617v2.633a.75.75 0 0 0 .5.715l4.3 2.15a.75.75 0 0 0 .97-.031.75.75 0 0 0 .03-.97l-4.08-2.04a.75.75 0 0 0-.72-.017Zm1.5 0-.72.017a.75.75 0 0 1-.72-.017L7.23 11.58a.75.75 0 0 0 .03.97.75.75 0 0 0 .97.03l4.3-2.15a.75.75 0 0 0 .5-.715v-2.633Z\" %2F>%0A          <path fill-rule%3D\"evenodd\" d%3D\"M22.5 12c0 5.799-4.701 10.5-10.5 10.5S1.5 17.799 1.5 12 6.201 1.5 12 1.5c1.836 0 3.562.462 5.074 1.286a.75.75 0 0 1-.6 1.372A9.004 9.004 0 0 0 12 3C7.03 3 3 7.03 3 12s4.03 9 9 9 9-4.03 9-9h-2.25a.75.75 0 0 1 0-1.5H22.5Z\" clip-rule%3D\"evenodd\" %2F>%0A        <%2Fsvg>%0A        JSON Data Extractor%0A      <%2Fh3>%0A      <div style%3D\"display%3A grid%3B grid-template-columns%3A 1fr 1fr%3B gap%3A 12px%3B\">%0A        <button id%3D\"start-selection-btn\" class%3D\"sidebar-btn primary\">ðŸŽ¯ Start Selecting<%2Fbutton>%0A        <button id%3D\"clear-data-btn\" class%3D\"sidebar-btn danger\">ðŸ—‘%EF%B8%8F Clear All<%2Fbutton>%0A        <button id%3D\"copy-json-btn\" class%3D\"sidebar-btn info\">ðŸ“‹ Copy JSON<%2Fbutton>%0A        <button id%3D\"copy-items-btn\" class%3D\"sidebar-btn info\">ðŸ“„ Copy Items<%2Fbutton>%0A        <button id%3D\"export-json-btn\" class%3D\"sidebar-btn success\">ðŸ’¾ Download JSON<%2Fbutton>%0A      <%2Fdiv>%0A      <button id%3D\"close-sidebar-btn\" class%3D\"sidebar-btn secondary\" style%3D\"width%3A100%25%3B margin-top%3A12px%3B\">âŒ Close Extractor<%2Fbutton>%0A      <div id%3D\"selection-status-msg\" style%3D\"margin-top%3A 15px%3B padding%3A 10px%3B background%3A %233b4048%3B border-radius%3A 6px%3B font-size%3A 13px%3B display%3A none%3B text-align%3A center%3B\">%0A        Click an element to capture data. Press <kbd style%3D\"background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B\">ESC<%2Fkbd> to stop.%0A      <%2Fdiv>%0A    <%2Fdiv>%0A%0A    <div style%3D\"padding%3A 20px%3B flex-grow%3A 1%3B display%3A flex%3B flex-direction%3A column%3B min-height%3A 0%3B\">%0A      <div style%3D\"margin-bottom%3A 15px%3B\">%0A        <label for%3D\"extraction-mode-select\" style%3D\"display%3A block%3B margin-bottom%3A 8px%3B font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Extraction Mode%3A<%2Flabel>%0A        <select id%3D\"extraction-mode-select\" class%3D\"sidebar-select\">%0A          <option value%3D\"partialJSON\" selected>Best-Effort JSON Parts<%2Foption>%0A          <option value%3D\"textContent\">Text Content<%2Foption>%0A          <option value%3D\"innerHTML\">Inner HTML<%2Foption>%0A          <option value%3D\"attributes\">All Attributes<%2Foption>%0A          <option value%3D\"dataset\">Data Attributes (data-*)<%2Foption>%0A          <option value%3D\"computed\">Key Computed Styles<%2Foption>%0A          <option value%3D\"custom\">Attempt Custom JSON<%2Foption>%0A        <%2Fselect>%0A      <%2Fdiv>%0A      <div style%3D\"display%3A flex%3B justify-content%3A space-between%3B align-items%3A center%3B margin-bottom%3A 10px%3B\">%0A        <span style%3D\"font-weight%3A 500%3B color%3A %23c8ccd4%3B\">Captured Items%3A <span id%3D\"item-count-display\">0<%2Fspan><%2Fspan>%0A        <span style%3D\"font-size%3A 12px%3B color%3A %239da5b4%3B\">Size%3A <span id%3D\"data-size-display\">0 KB<%2Fspan><%2Fspan>%0A      <%2Fdiv>%0A      <div style%3D\"background%3A %2321252b%3B border-radius%3A 6px%3B padding%3A 15px%3B flex-grow%3A 1%3B overflow-y%3A auto%3B border%3A 1px solid %233b4048%3B min-height%3A 150px%3B\">%0A        <pre id%3D\"json-output-display\" style%3D\"margin%3A 0%3B font-family%3A 'Fira Code'%2C 'Courier New'%2C monospace%3B font-size%3A 12.5px%3B white-space%3A pre-wrap%3B word-break%3A break-all%3B color%3A %23d19a66%3B\">No data captured yet...<%2Fpre>%0A      <%2Fdiv>%0A    <%2Fdiv>%0A    <style>%0A      .sidebar-btn %7B background%3A %234b5263%3B color%3A %23d4d7dd%3B border%3A none%3B padding%3A 10px 15px%3B border-radius%3A 6px%3B cursor%3A pointer%3B font-size%3A 13px%3B font-weight%3A 500%3B transition%3A background-color 0.2s%2C transform 0.1s%3B text-align%3A center%3B %7D%0A      .sidebar-btn%3Ahover %7B background%3A %235c6370%3B %7D%0A      .sidebar-btn%3Aactive %7B transform%3A scale(0.98)%3B %7D%0A      .sidebar-btn.primary %7B background%3A %2361afef%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.primary%3Ahover %7B background%3A %23529bda%3B %7D%0A      .sidebar-btn.danger %7B background%3A %23e06c75%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.danger%3Ahover %7B background%3A %23c95f69%3B %7D%0A      .sidebar-btn.info %7B background%3A %2356b6c2%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.info%3Ahover %7B background%3A %234aa7b3%3B %7D%0A      .sidebar-btn.success %7B background%3A %2398c379%3B color%3A %23282c34%3B %7D%0A      .sidebar-btn.success%3Ahover %7B background%3A %2389b16c%3B %7D%0A      .sidebar-btn.secondary %7B background%3A %233b4048%3B color%3A %23abb2bf%3B %7D%0A      .sidebar-btn.secondary%3Ahover %7B background%3A %23454c58%3B %7D%0A      .sidebar-select %7B width%3A 100%25%3B padding%3A 10px%3B border-radius%3A 6px%3B background%3A %233b4048%3B color%3A %23abb2bf%3B border%3A 1px solid %23454c58%3B font-size%3A 13px%3B %7D%0A      %23%24%7BSIDEBAR_ID%7D kbd %7B background%3A%235c6370%3B padding%3A2px 5px%3B border-radius%3A3px%3B font-family%3Amonospace%3B border%3A 1px solid %237d8590%3B box-shadow%3A 1px 1px 1px rgba(0%2C0%2C0%2C0.2)%3B %7D%0A    <%2Fstyle>%0A  %60%3B%0A  document.body.appendChild(sidebar)%3B%0A  document.body.style.marginRight %3D SIDEBAR_WIDTH%3B%0A%0A  %2F%2F --- Helper Functions ---%0A  function showNotification(message%2C type %3D 'info'%2C duration %3D NOTIFICATION_TIMEOUT) %7B%0A    let notification %3D document.getElementById('json-extractor-notification')%3B%0A    if (!notification) %7B%0A      notification %3D document.createElement('div')%3B%0A      notification.id %3D 'json-extractor-notification'%3B%0A      document.body.appendChild(notification)%3B%0A    %7D%0A    notification.textContent %3D message%3B%0A    notification.className %3D %60show %24%7Btype%7D%60%3B %0A    setTimeout(() %3D> %7B%0A      notification.className %3D notification.className.replace('show'%2C '').trim()%3B%0A    %7D%2C duration)%3B%0A  %7D%0A%0A  function createBadge() %7B%0A    let badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (!badge) %7B%0A      badge %3D document.createElement('div')%3B%0A      badge.id %3D 'json-extractor-badge'%3B%0A      document.body.appendChild(badge)%3B%0A    %7D%0A    return badge%3B%0A  %7D%0A%0A  function countJsonComponents(element%2C mode) %7B%0A    if (!element) return 0%3B%0A    %0A    try %7B%0A      const rawText %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A      %0A      %2F%2F Skip counting for very large text to prevent hanging%0A      if (rawText.length > 50000) return 0%3B%0A      %0A      switch (mode) %7B%0A        case 'textContent'%3A%0A        case 'innerHTML'%3A%0A        case 'attributes'%3A%0A        case 'dataset'%3A%0A        case 'computed'%3A%0A          return 1%3B %2F%2F These modes always return 1 object%0A          %0A        case 'custom'%3A%0A          try %7B%0A            JSON.parse(rawText)%3B%0A            return 1%3B%0A          %7D catch (e) %7B%0A            let count %3D 0%3B%0A            for (let attr of element.attributes) %7B%0A              if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A                try %7B%0A                  JSON.parse(attr.value)%3B%0A                  count%2B%2B%3B%0A                %7D catch (e2) %7B%0A                  %2F%2F Invalid JSON%2C don't count%0A                %7D%0A              %7D%0A            %7D%0A            return count%3B%0A          %7D%0A          %0A        case 'partialJSON'%3A%0A          %2F%2F Simplified counting to avoid hanging - just count likely JSON objects%0A          try %7B%0A            const parsedOuter %3D JSON.parse(rawText)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A              %2F%2F Just return 1 for input%2Foutput structure to avoid complex parsing during hover%0A              return 1%3B%0A            %7D%0A          %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to simple greedy count%0A          %7D%0A          %0A          %2F%2F Simple count of JSON-like structures without full parsing%0A          const jsonObjects %3D (rawText.match(%2F%5C%7B%5B%5E%7B%7D%5D*%5C%7D%2Fg) %7C%7C %5B%5D).length%3B%0A          const jsonArrays %3D (rawText.match(%2F%5C%5B%5B%5E%5C%5B%5C%5D%5D*%5C%5D%2Fg) %7C%7C %5B%5D).length%3B%0A          return jsonObjects %2B jsonArrays%3B%0A          %0A        default%3A%0A          return 0%3B%0A      %7D%0A    %7D catch (e) %7B%0A      return 0%3B%0A    %7D%0A  %7D%0A%0A  function showBadge(count%2C x%2C y) %7B%0A    const badge %3D createBadge()%3B%0A    if (count > 0) %7B%0A      badge.textContent %3D %60%24%7Bcount%7D JSON%24%7Bcount %3D%3D%3D 1 %3F '' %3A 's'%7D%60%3B%0A      badge.style.left %3D (x %2B 15) %2B 'px'%3B%0A      badge.style.top %3D (y - 25) %2B 'px'%3B%0A      badge.classList.add('show')%3B%0A    %7D else %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  function hideBadge() %7B%0A    const badge %3D document.getElementById('json-extractor-badge')%3B%0A    if (badge) %7B%0A      badge.classList.remove('show')%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Modern clipboard copy function%0A  async function copyToClipboard(text) %7B%0A    try %7B%0A      if (navigator.clipboard %26%26 window.isSecureContext) %7B%0A        await navigator.clipboard.writeText(text)%3B%0A        return true%3B%0A      %7D else %7B%0A        %2F%2F Fallback for older browsers or non-secure contexts%0A        const textarea %3D document.createElement('textarea')%3B%0A        textarea.value %3D text%3B%0A        textarea.style.position %3D 'fixed'%3B%0A        textarea.style.left %3D '-999999px'%3B%0A        textarea.style.top %3D '-999999px'%3B%0A        document.body.appendChild(textarea)%3B%0A        textarea.focus()%3B%0A        textarea.select()%3B%0A        const result %3D document.execCommand('copy')%3B%0A        document.body.removeChild(textarea)%3B%0A        return result%3B%0A      %7D%0A    %7D catch (err) %7B%0A      console.error('Copy failed%3A'%2C err)%3B%0A      return false%3B%0A    %7D%0A  %7D%0A%0A  function repairJsonStringLiterals(jsonString) %7B%0A    let repaired %3D ''%3B%0A    let inString %3D false%3B%0A    let escapeNext %3D false%3B%0A%0A    for (let i %3D 0%3B i < jsonString.length%3B i%2B%2B) %7B%0A        const char %3D jsonString%5Bi%5D%3B%0A        if (escapeNext) %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D false%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '%5C%5C') %7B%0A            repaired %2B%3D char%3B%0A            escapeNext %3D true%3B%0A            continue%3B%0A        %7D%0A        if (char %3D%3D%3D '\"') %7B%0A            inString %3D !inString%3B%0A            repaired %2B%3D char%3B%0A            continue%3B%0A        %7D%0A        if (inString) %7B%0A            if (char %3D%3D%3D '%5Cn') repaired %2B%3D '%5C%5Cn'%3B%0A            else if (char %3D%3D%3D '%5Cr') repaired %2B%3D '%5C%5Cr'%3B%0A            else if (char %3D%3D%3D '%5Ct') repaired %2B%3D '%5C%5Ct'%3B%0A            else repaired %2B%3D char%3B%0A        %7D else %7B%0A            repaired %2B%3D char%3B%0A        %7D%0A    %7D%0A    return repaired%3B%0A  %7D%0A%0A  function flattenUnnecessaryArrays(data) %7B%0A    %2F%2F Simple single-level flatten to avoid infinite loops%0A    %2F%2F Only flatten if it's an array with exactly 1 element that is also an array%0A    if (Array.isArray(data) %26%26 data.length %3D%3D%3D 1 %26%26 Array.isArray(data%5B0%5D)) %7B%0A      return data%5B0%5D%3B%0A    %7D%0A    return data%3B%0A  %7D%0A%0A  function extractGreedyJson(text) %7B%0A    const results %3D %5B%5D%3B%0A    let remainingText %3D text.trim()%3B%0A    %0A    while (remainingText.length > 0) %7B%0A        let foundThisIteration %3D false%3B%0A        let firstJsonCharIndex %3D -1%3B%0A%0A        for (let i %3D 0%3B i < remainingText.length%3B i%2B%2B) %7B%0A            if (remainingText%5Bi%5D %3D%3D%3D '%7B' %7C%7C remainingText%5Bi%5D %3D%3D%3D '%5B') %7B%0A                firstJsonCharIndex %3D i%3B%0A                break%3B%0A            %7D%0A        %7D%0A%0A        if (firstJsonCharIndex %3D%3D%3D -1) break%3B %0A%0A        const textToParse %3D remainingText.substring(firstJsonCharIndex)%3B%0A%0A        for (let i %3D 1%3B i <%3D textToParse.length%3B i%2B%2B) %7B%0A            const segment %3D textToParse.substring(0%2C i)%3B%0A            %0A            if ((segment.startsWith('%7B') %26%26 segment.endsWith('%7D')) %7C%7C (segment.startsWith('%5B') %26%26 segment.endsWith('%5D'))) %7B%0A                try %7B%0A                    JSON.parse(segment)%3B%0A                    results.push(segment)%3B%0A                    remainingText %3D textToParse.substring(i)%3B %0A                    foundThisIteration %3D true%3B%0A                    break%3B %0A                %7D catch (e) %7B%0A                    try %7B%0A                        const repairedSegment %3D repairJsonStringLiterals(segment)%3B%0A                        if (repairedSegment !%3D%3D segment) %7B%0A                            JSON.parse(repairedSegment)%3B%0A                            results.push(repairedSegment)%3B%0A                            remainingText %3D textToParse.substring(i)%3B%0A                            foundThisIteration %3D true%3B%0A                            break%3B %0A                        %7D%0A                    %7D catch (e2) %7B%0A                        %2F%2F Continue extending segment%0A                    %7D%0A                %7D%0A            %7D%0A        %7D%0A        %0A        if (!foundThisIteration) %7B%0A            remainingText %3D remainingText.substring(firstJsonCharIndex %2B 1)%3B%0A        %7D%0A    %7D%0A    return results%3B%0A  %7D%0A%0A  function extractJSON(element%2C mode) %7B%0A    const timestamp %3D new Date().toISOString()%3B%0A    const commonData %3D %7B%0A        selector%3A getSelector(element)%2C%0A        tag%3A element.tagName.toLowerCase()%2C%0A        timestamp%3A timestamp%0A    %7D%3B%0A    const rawTextForPartial %3D element.textContent %3F element.textContent.trim() %3A ''%3B%0A%0A    switch (mode) %7B%0A      case 'textContent'%3A%0A        return %7B ...commonData%2C textContent%3A rawTextForPartial %7D%3B%0A      case 'innerHTML'%3A%0A        return %7B ...commonData%2C innerHTML%3A element.innerHTML %7D%3B%0A      case 'attributes'%3A%0A        let attrs %3D %7B%7D%3B%0A        for (let attr of element.attributes) attrs%5Battr.name%5D %3D attr.value%3B%0A        return %7B ...commonData%2C attributes%3A attrs %7D%3B%0A      case 'dataset'%3A%0A        return %7B ...commonData%2C dataset%3A %7B ...element.dataset %7D %7D%3B%0A      case 'computed'%3A%0A        let styles %3D window.getComputedStyle(element)%3B%0A        let computedStyles %3D %7B%7D%3B%0A        %5B'display'%2C 'position'%2C 'width'%2C 'height'%2C 'color'%2C 'background-color'%2C 'font-size'%2C 'font-family'%2C 'font-weight'%2C 'margin'%2C 'padding'%2C 'border'%2C 'opacity'%2C 'visibility'%2C 'z-index'%2C 'overflow'%2C 'text-align'%2C 'line-height'%5D.forEach(prop %3D> %7B%0A          computedStyles%5Bprop%5D %3D styles.getPropertyValue(prop)%3B%0A        %7D)%3B%0A        return %7B ...commonData%2C computedStyles%3A computedStyles %7D%3B%0A      case 'custom'%3A %0A        let jsonText %3D rawTextForPartial%3B%0A        try %7B%0A          const parsedText %3D JSON.parse(jsonText)%3B%0A          return %7B ...commonData%2C source%3A 'textContent'%2C parsedJSON%3A parsedText %7D%3B%0A        %7D catch (e) %7B%0A          let jsonAttrs %3D %7B%7D%3B%0A          let foundInDataAttr %3D false%3B%0A          for (let attr of element.attributes) %7B%0A            if (attr.name.startsWith('data-') %26%26 ((attr.value.startsWith('%7B') %26%26 attr.value.endsWith('%7D')) %7C%7C (attr.value.startsWith('%5B') %26%26 attr.value.endsWith('%5D')))) %7B%0A              try %7B%0A                jsonAttrs%5Battr.name%5D %3D JSON.parse(attr.value)%3B%0A                foundInDataAttr %3D true%3B%0A              %7D catch (e2) %7B%0A                jsonAttrs%5Battr.name%5D %3D %60Error parsing%3A %24%7Battr.value.substring(0%2C50)%7D...%60%3B%0A              %7D%0A            %7D%0A          %7D%0A          if (foundInDataAttr) %7B%0A            return %7B ...commonData%2C source%3A 'dataAttributes'%2C possibleJSON%3A jsonAttrs %7D%3B%0A          %7D else %7B%0A            return %7B ...commonData%2C source%3A 'none'%2C error%3A 'Could not parse JSON from text or data attributes.'%2C rawTextSample%3A jsonText.substring(0%2C 200) %7D%3B%0A          %7D%0A        %7D%0A      case 'partialJSON'%3A %0A        try %7B%0A            const parsedOuter %3D JSON.parse(rawTextForPartial)%3B%0A            if (parsedOuter %26%26 typeof parsedOuter.input %3D%3D%3D 'string' %26%26 typeof parsedOuter.output %3D%3D%3D 'string') %7B%0A                let finalOutputString %3D parsedOuter.output%3B%0A                let parsedInnerJson %3D null%3B%0A                try %7B%0A                    parsedInnerJson %3D JSON.parse(finalOutputString)%3B%0A                %7D catch (innerParseError) %7B%0A                    const repairedInnerOutput %3D repairJsonStringLiterals(finalOutputString)%3B%0A                    try %7B%0A                        parsedInnerJson %3D JSON.parse(repairedInnerOutput)%3B%0A                    %7D catch (repairedInnerParseError) %7B%0A                        parsedInnerJson %3D null%3B%0A                    %7D%0A                %7D%0A%0A                if (parsedInnerJson !%3D%3D null) %7B%0A                    %2F%2F Flatten unnecessary nested arrays%0A                    const flattened %3D flattenUnnecessaryArrays(parsedInnerJson)%3B%0A                    return Array.isArray(flattened) %3F flattened %3A %5Bflattened%5D%3B%0A                %7D%0A            %7D%0A        %7D catch (outerParseError) %7B%0A            %2F%2F Fall through to greedy extraction%0A        %7D%0A%0A        const extractedStringParts %3D extractGreedyJson(rawTextForPartial)%3B %0A        if (extractedStringParts.length > 0) %7B%0A            const parsed %3D extractedStringParts.map(jsonStringPart %3D> %7B%0A                try %7B%0A                    const parsedJson %3D JSON.parse(jsonStringPart)%3B%0A                    return flattenUnnecessaryArrays(parsedJson)%3B%0A                %7D catch (e) %7B%0A                    return jsonStringPart%3B %2F%2F Fallback to string if parsing fails%0A                %7D%0A            %7D)%3B%0A            %0A            %2F%2F Flatten the results - if we get nested arrays%2C flatten them%0A            const result %3D %5B%5D%3B%0A            parsed.forEach(item %3D> %7B%0A                if (Array.isArray(item)) %7B%0A                    result.push(...item)%3B%0A                %7D else %7B%0A                    result.push(item)%3B%0A                %7D%0A            %7D)%3B%0A            %0A            return result.length > 0 %3F result %3A null%3B%0A        %7D else %7B%0A            return null%3B %0A        %7D%0A      default%3A%0A        return %7B ...commonData%2C error%3A 'Unknown extraction mode' %7D%3B%0A    %7D%0A  %7D%0A%0A  function getSelector(element) %7B%0A    if (!element %7C%7C !element.tagName) return 'unknown'%3B%0A    if (element.id) return %60%23%24%7Belement.id%7D%60%3B%0A%0A    let path %3D %5B%5D%3B%0A    let current %3D element%3B%0A    while (current %26%26 current.parentElement %26%26 path.length < 7) %7B %0A      let selectorPart %3D current.tagName.toLowerCase()%3B%0A      const parent %3D current.parentElement%3B%0A      if (parent) %7B%0A        const siblings %3D Array.from(parent.children).filter(child %3D> child.tagName %3D%3D%3D current.tagName)%3B%0A        if (siblings.length > 1) %7B%0A          const index %3D siblings.indexOf(current) %2B 1%3B%0A          selectorPart %2B%3D %60%3Anth-of-type(%24%7Bindex%7D)%60%3B%0A        %7D else %7B%0A            if (current.classList %26%26 current.classList.length > 0) %7B%0A                const distinctiveClass %3D Array.from(current.classList).find(cls %3D> %7B%0A                    if (!cls %7C%7C !%2F%5E%5Ba-zA-Z%5D%2F.test(cls.charAt(0))) return false%3B %0A                    try %7B%0A                        return parent.querySelectorAll(%60%24%7Bcurrent.tagName.toLowerCase()%7D.%24%7BCSS.escape(cls)%7D%60).length %3D%3D%3D 1%3B%0A                    %7D catch (e) %7B%0A                        return false%3B %0A                    %7D%0A                %7D)%3B%0A                if (distinctiveClass) %7B%0A                    selectorPart %2B%3D %60.%24%7BCSS.escape(distinctiveClass)%7D%60%3B%0A                %7D%0A            %7D%0A        %7D%0A      %7D%0A      path.unshift(selectorPart)%3B%0A      if (current.tagName.toLowerCase() %3D%3D%3D 'body') break%3B%0A      current %3D parent%3B%0A    %7D%0A    return path.join(' > ')%3B%0A  %7D%0A%0A  function updateDisplay() %7B%0A    const jsonDisplay %3D document.getElementById('json-output-display')%3B%0A    const itemCount %3D document.getElementById('item-count-display')%3B%0A    const dataSize %3D document.getElementById('data-size-display')%3B%0A%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      jsonDisplay.textContent %3D 'No data captured yet... Hover and click elements when selection is active.'%3B%0A      jsonDisplay.style.color %3D '%239da5b4'%3B %0A    %7D else %7B%0A      %2F%2F Use proper JSON stringification without double-escaping%0A      jsonDisplay.textContent %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A      jsonDisplay.style.color %3D '%23d19a66'%3B %0A    %7D%0A%0A    itemCount.textContent %3D capturedData.length%3B%0A    const sizeInBytes %3D new TextEncoder().encode(JSON.stringify(capturedData)).length%3B %0A    dataSize.textContent %3D %60%24%7B(sizeInBytes %2F 1024).toFixed(2)%7D KB%60%3B%0A  %7D%0A%0A  function handleMouseOver(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Remove highlight from previous element%0A    if (highlightedElement %26%26 highlightedElement !%3D%3D target) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A    %7D%0A    %0A    %2F%2F Add highlight to current element%0A    target.classList.add(HIGHLIGHT_CLASS)%3B%0A    highlightedElement %3D target%3B%0A    %0A    %2F%2F Show badge with JSON count%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const count %3D countJsonComponents(target%2C mode)%3B%0A    showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %0A    %2F%2F Prevent event bubbling to avoid highlighting parent elements%0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseOut(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification' %7C%7C target.id %3D%3D%3D 'json-extractor-badge') return%3B%0A%0A    %2F%2F Only remove highlight if we're leaving this element and not entering a child%0A    if (target %3D%3D%3D highlightedElement %26%26 !target.contains(e.relatedTarget)) %7B%0A        target.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A        hideBadge()%3B%0A    %7D%0A    %0A    e.stopPropagation()%3B%0A  %7D%0A%0A  function handleMouseMove(e) %7B%0A    if (!isSelecting %7C%7C !highlightedElement) return%3B%0A    %0A    %2F%2F Throttle mouse move updates to prevent performance issues%0A    if (mouseMoveThrottle) return%3B%0A    %0A    mouseMoveThrottle %3D setTimeout(() %3D> %7B%0A      %2F%2F Double-check we're still selecting before updating%0A      if (!isSelecting) %7B%0A        mouseMoveThrottle %3D null%3B%0A        return%3B%0A      %7D%0A      mouseMoveThrottle %3D null%3B%0A      %2F%2F Update badge position to follow cursor%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      showBadge(count%2C e.clientX%2C e.clientY)%3B%0A    %7D%2C 50)%3B %2F%2F Update at most every 50ms%0A  %7D%0A%0A  function handleClick(e) %7B%0A    if (!isSelecting) return%3B%0A    const target %3D e.target%3B%0A    %0A    %2F%2F Ignore sidebar elements and notifications%0A    if (target.closest(%60%23%24%7BSIDEBAR_ID%7D%60) %7C%7C target.id %3D%3D%3D 'json-extractor-notification') return%3B%0A%0A    e.preventDefault()%3B%0A    e.stopPropagation()%3B%0A%0A    const mode %3D document.getElementById('extraction-mode-select').value%3B%0A    const extractionResult %3D extractJSON(target%2C mode)%3B %0A%0A    %2F%2F Visual feedback for successful extraction%0A    target.style.transition %3D 'background-color 0.2s ease-out'%3B%0A    target.style.backgroundColor %3D 'rgba(152%2C 195%2C 121%2C 0.5)'%3B %0A    setTimeout(() %3D> %7B%0A      target.style.backgroundColor %3D ''%3B %0A      if(isSelecting %26%26 highlightedElement %3D%3D%3D target) %7B%0A          target.classList.add(HIGHLIGHT_CLASS)%3B%0A      %7D%0A    %7D%2C 300)%3B%0A    %0A    if (mode %3D%3D%3D 'partialJSON') %7B%0A        if (Array.isArray(extractionResult) %26%26 extractionResult.length > 0) %7B %0A            extractionResult.forEach(item %3D> capturedData.push(item))%3B%0A            showNotification(%60âœ… Captured %24%7BextractionResult.length%7D JSON part(s) from %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B %0A            showNotification(%60â„¹%EF%B8%8F No JSON parts found in %24%7Btarget.tagName.toLowerCase()%7D.%60%2C 'info')%3B%0A        %7D%0A    %7D else %7B %0A        if (extractionResult) %7B %0A            capturedData.push(extractionResult)%3B%0A            showNotification(%60âœ… Captured %24%7Btarget.tagName.toLowerCase()%7D! (%24%7BcapturedData.length%7D total items)%60%2C 'success')%3B%0A        %7D else %7B%0A            showNotification(%60âš %EF%B8%8F Extraction failed for %24%7Btarget.tagName.toLowerCase()%7D. No data returned.%60%2C 'error')%3B%0A        %7D%0A    %7D%0A    updateDisplay()%3B%0A  %7D%0A%0A  function startSelectionMode() %7B%0A    isSelecting %3D true%3B%0A    originalCursor %3D document.body.style.cursor%3B%0A    document.body.style.cursor %3D 'crosshair'%3B%0A    %0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%23e06c75'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'â¹%EF%B8%8F Stop Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'block'%3B%0A%0A    %2F%2F Use capture phase for better event handling%0A    document.addEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.addEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.addEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.addEventListener('click'%2C handleClick%2C true)%3B%0A    document.addEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A  %7D%0A%0A  function stopSelectionMode() %7B%0A    isSelecting %3D false%3B%0A    document.body.style.cursor %3D originalCursor%3B%0A%0A    const startButton %3D document.getElementById('start-selection-btn')%3B%0A    startButton.style.background %3D '%2361afef'%3B %0A    startButton.style.color %3D '%23282c34'%3B%0A    startButton.textContent %3D 'ðŸŽ¯ Start Selecting'%3B%0A    document.getElementById('selection-status-msg').style.display %3D 'none'%3B%0A%0A    %2F%2F Remove event listeners%0A    document.removeEventListener('mouseover'%2C handleMouseOver%2C true)%3B%0A    document.removeEventListener('mouseout'%2C handleMouseOut%2C true)%3B%0A    document.removeEventListener('mousemove'%2C handleMouseMove%2C true)%3B%0A    document.removeEventListener('click'%2C handleClick%2C true)%3B%0A    document.removeEventListener('keydown'%2C handleEscapeKey%2C true)%3B%0A%0A    %2F%2F Force clean up any remaining highlights%0A    if (highlightedElement) %7B%0A        highlightedElement.classList.remove(HIGHLIGHT_CLASS)%3B%0A        highlightedElement %3D null%3B%0A    %7D%0A    %0A    %2F%2F Remove ALL highlight classes from any element that might have them%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      %2F%2F Force remove any inline styles that might have been added%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    hideBadge()%3B%0A    %0A    %2F%2F Clear any pending throttle%0A    if (mouseMoveThrottle) %7B%0A      clearTimeout(mouseMoveThrottle)%3B%0A      mouseMoveThrottle %3D null%3B%0A    %7D%0A    %0A    %2F%2F Double-check that selection is truly off by removing cursor style%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  function handleEscapeKey(e) %7B%0A    if (e.key %3D%3D%3D 'Escape' %26%26 isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D%0A  %7D%0A%0A  %2F%2F Event Listeners%0A  document.getElementById('start-selection-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (isSelecting) %7B%0A      stopSelectionMode()%3B%0A    %7D else %7B%0A      startSelectionMode()%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('clear-data-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length > 0) %7B%0A        const userConfirmed %3D confirm(\"Are you sure you want to clear all captured data%3F\")%3B%0A        if (userConfirmed) %7B%0A            capturedData %3D %5B%5D%3B%0A            updateDisplay()%3B%0A            showNotification('ðŸ—‘%EF%B8%8F All data cleared.'%2C 'info')%3B%0A        %7D%0A    %7D else %7B%0A        showNotification('No data to clear.'%2C 'info')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-json-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    const jsonString %3D JSON.stringify(capturedData%2C null%2C 2)%3B%0A    const success %3D await copyToClipboard(jsonString)%3B%0A    %0A    if (success) %7B%0A      showNotification('ðŸ“‹ JSON copied to clipboard!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy JSON. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('copy-items-btn').addEventListener('click'%2C async (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to copy.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    %0A    %2F%2F Convert each item to JSON string and join with commas%0A    const itemsString %3D capturedData.map(item %3D> JSON.stringify(item%2C null%2C 2)).join('%2C%5Cn')%3B%0A    const success %3D await copyToClipboard(itemsString)%3B%0A    %0A    if (success) %7B%0A      showNotification('ðŸ“„ Items copied to clipboard (without array brackets)!'%2C 'success')%3B%0A    %7D else %7B%0A      showNotification('Failed to copy items. Try manual selection or download.'%2C 'error')%3B%0A    %7D%0A  %7D)%3B%0A%0A  document.getElementById('export-json-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    if (capturedData.length %3D%3D%3D 0) %7B%0A      showNotification('No data to export.'%2C 'error')%3B%0A      return%3B%0A    %7D%0A    const blob %3D new Blob(%5BJSON.stringify(capturedData%2C null%2C 2)%5D%2C %7B type%3A 'application%2Fjson' %7D)%3B%0A    const url %3D URL.createObjectURL(blob)%3B%0A    const a %3D document.createElement('a')%3B%0A    a.href %3D url%3B%0A    a.download %3D %60extracted-data-%24%7Bnew Date().toISOString().slice(0%2C19).replace(%2F%5B%3AT%5D%2Fg%2C'-')%7D.json%60%3B%0A    document.body.appendChild(a)%3B%0A    a.click()%3B%0A    document.body.removeChild(a)%3B%0A    URL.revokeObjectURL(url)%3B%0A    showNotification('ðŸ’¾ JSON download started!'%2C 'success')%3B%0A  %7D)%3B%0A%0A  document.getElementById('close-sidebar-btn').addEventListener('click'%2C (e) %3D> %7B%0A    e.stopPropagation()%3B%0A    cleanupAndClose()%3B%0A  %7D)%3B%0A  %0A  function cleanupAndClose() %7B%0A    %2F%2F Force stop selection mode first%0A    stopSelectionMode()%3B %0A    %0A    %2F%2F Remove all traces of the extractor%0A    document.body.style.marginRight %3D ''%3B%0A    sidebar.remove()%3B%0A    styleElement.remove()%3B %0A    %0A    %2F%2F Clean up notifications and badge%0A    const notificationEl %3D document.getElementById('json-extractor-notification')%3B%0A    if (notificationEl) notificationEl.remove()%3B%0A    const badgeEl %3D document.getElementById('json-extractor-badge')%3B%0A    if (badgeEl) badgeEl.remove()%3B%0A    %0A    %2F%2F Final cleanup of any remaining highlights%0A    document.querySelectorAll('.' %2B HIGHLIGHT_CLASS).forEach(el %3D> %7B%0A      el.classList.remove(HIGHLIGHT_CLASS)%3B%0A      el.style.transition %3D ''%3B%0A      el.style.backgroundColor %3D ''%3B%0A    %7D)%3B%0A    %0A    %2F%2F Reset cursor completely%0A    document.body.style.cursor %3D ''%3B%0A  %7D%0A%0A  updateDisplay()%3B%0A%0A  %2F%2F Update badge when extraction mode changes%0A  document.getElementById('extraction-mode-select').addEventListener('change'%2C () %3D> %7B%0A    if (isSelecting %26%26 highlightedElement) %7B%0A      const mode %3D document.getElementById('extraction-mode-select').value%3B%0A      const count %3D countJsonComponents(highlightedElement%2C mode)%3B%0A      %2F%2F Use a simple position near the element center%0A      const rect %3D highlightedElement.getBoundingClientRect()%3B%0A      const x %3D rect.left %2B rect.width %2F 2%3B%0A      const y %3D rect.top %2B rect.height %2F 2%3B%0A      showBadge(count%2C x%2C y)%3B%0A    %7D%0A  %7D)%3B%0A%0A%7D)()%3B%7D)()%3B"
}
];

async function loadBookmarklets() {
    const container = document.getElementById('bookmarklets-container');
    const loadingDiv = document.getElementById('loading-bookmarklets');
    
    if (!container) {
        console.error('Bookmarklets container not found');
        return;
    }
    
    let bookmarklets = null;
    
    // Try to fetch from server first (works on GitHub Pages)
    try {
        // Check if we're in a file:// context
        if (window.location.protocol === 'file:') {
            throw new Error('file:// protocol detected');
        }
        
        const response = await fetch('bookmarklet/bookmarklets.json');
        if (!response.ok) {
            throw new Error('Failed to load bookmarklets.json');
        }
        
        bookmarklets = await response.json();
    } catch (error) {
        // Fallback to embedded data for local file:// access
        console.warn('Using embedded bookmarklets data:', error.message);
        bookmarklets = EMBEDDED_BOOKMARKLETS;
    }
    
    // Hide loading indicator
    if (loadingDiv) {
        loadingDiv.style.display = 'none';
    }
    
    try {
        if (!bookmarklets || bookmarklets.length === 0) {
            container.innerHTML = '<p class="no-bookmarklets">No bookmarklets available yet.</p>';
            return;
        }
        
        container.innerHTML = bookmarklets.map((bookmarklet, index) => {
            return createBookmarkletElement(bookmarklet, index);
        }).join('');
        
        // Add drag event listeners (pass bookmarklets data for embedded code)
        await attachDragListeners(bookmarklets);
        
    } catch (error) {
        console.error('Error rendering bookmarklets:', error);
        container.innerHTML = `<p class="error">Error displaying bookmarklets: ${error.message}</p>`;
    }
}

async function getBookmarkletCode(filename, bookmarkletData) {
    // First, try to get code from embedded data
    if (bookmarkletData && bookmarkletData.code) {
        return bookmarkletData.code;
    }
    
    // Fallback: try to fetch from server (works on GitHub Pages)
    if (window.location.protocol === 'file:') {
        console.warn(`Cannot load ${filename} in file:// context. Please run build_bookmarklets.py to embed code.`);
        return null;
    }
    
    try {
        const response = await fetch(`bookmarklet/${filename}`);
        if (!response.ok) {
            throw new Error(`Failed to load ${filename}`);
        }
        return await response.text();
    } catch (error) {
        console.error(`Error loading bookmarklet ${filename}:`, error);
        return null;
    }
}

function createBookmarkletElement(bookmarklet, index) {
    const id = `bookmarklet-${index}`;
    return `
        <div class="bookmarklet-item" data-index="${index}">
            <div class="bookmarklet-header">
                <span class="bookmarklet-icon">${bookmarklet.icon || 'ðŸ”–'}</span>
                <h3 class="bookmarklet-name">${escapeHtml(bookmarklet.name)}</h3>
            </div>
            ${bookmarklet.description ? `<p class="bookmarklet-description">${escapeHtml(bookmarklet.description)}</p>` : ''}
            <div class="bookmarklet-actions">
                <a 
                    href="#" 
                    id="${id}" 
                    class="bookmarklet-link" 
                    draggable="true"
                    data-filename="${bookmarklet.file}"
                    title="Drag this to your bookmarks bar or click to test"
                >
                    ðŸ“Œ ${escapeHtml(bookmarklet.name)}
                </a>
                <button class="copy-code-btn" data-filename="${bookmarklet.file}" title="Copy bookmarklet code">
                    ðŸ“‹ Copy Code
                </button>
            </div>
        </div>
    `;
}

function escapeHtml(text) {
    const div = document.createElement('div');
    div.textContent = text;
    return div.innerHTML;
}

async function attachDragListeners(bookmarkletsData = null) {
    const bookmarkletLinks = document.querySelectorAll('.bookmarklet-link');
    
    // Create a map of filename to bookmarklet data for quick lookup
    const bookmarkletsMap = {};
    if (bookmarkletsData) {
        bookmarkletsData.forEach(b => {
            bookmarkletsMap[b.file] = b;
        });
    }
    
    for (const link of bookmarkletLinks) {
        const filename = link.getAttribute('data-filename');
        const bookmarkletData = bookmarkletsMap[filename] || null;
        const code = await getBookmarkletCode(filename, bookmarkletData);
        
        if (!code) {
            link.style.opacity = '0.5';
            link.title = 'Error loading bookmarklet code. Please run build_bookmarklets.py to embed code.';
            link.style.cursor = 'not-allowed';
            continue;
        }
        
        // Set the href to the bookmarklet code
        link.href = code.trim();
        
        // Handle drag start
        link.addEventListener('dragstart', (e) => {
            e.dataTransfer.setData('text/plain', code.trim());
            e.dataTransfer.setData('text/uri-list', code.trim());
            e.dataTransfer.effectAllowed = 'copy';
            
            // Create a visual feedback
            link.style.opacity = '0.5';
        });
        
        // Handle drag end
        link.addEventListener('dragend', (e) => {
            link.style.opacity = '1';
        });
        
        // Handle click to test
        link.addEventListener('click', (e) => {
            e.preventDefault();
            if (confirm(`Test bookmarklet "${link.textContent.trim()}"?`)) {
                try {
                    eval(code);
                } catch (error) {
                    alert(`Error running bookmarklet: ${error.message}`);
                }
            }
        });
    }
    
    // Handle copy code buttons
    const copyButtons = document.querySelectorAll('.copy-code-btn');
    copyButtons.forEach(async (button) => {
        button.addEventListener('click', async () => {
            const filename = button.getAttribute('data-filename');
            const bookmarkletData = bookmarkletsMap[filename] || null;
            const code = await getBookmarkletCode(filename, bookmarkletData);
            
            if (code) {
                try {
                    await navigator.clipboard.writeText(code.trim());
                    button.textContent = 'âœ“ Copied!';
                    button.classList.add('copied');
                    setTimeout(() => {
                        button.textContent = 'ðŸ“‹ Copy Code';
                        button.classList.remove('copied');
                    }, 2000);
                } catch (error) {
                    // Fallback for older browsers
                    const textarea = document.createElement('textarea');
                    textarea.value = code.trim();
                    document.body.appendChild(textarea);
                    textarea.select();
                    document.execCommand('copy');
                    document.body.removeChild(textarea);
                    button.textContent = 'âœ“ Copied!';
                    button.classList.add('copied');
                    setTimeout(() => {
                        button.textContent = 'ðŸ“‹ Copy Code';
                        button.classList.remove('copied');
                    }, 2000);
                }
            } else {
                alert('Cannot load bookmarklet code in file:// context. Please use a local server.');
            }
        });
    });
}

// Load bookmarklets when page loads
if (document.readyState === 'loading') {
    document.addEventListener('DOMContentLoaded', loadBookmarklets);
} else {
    loadBookmarklets();
}
